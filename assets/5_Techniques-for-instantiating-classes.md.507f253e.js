import{_ as s,c as a,o as n,a as l}from"./app.d0a0f41b.js";const C=JSON.parse('{"title":"ç±»å®ä¾‹åŒ–å¼‚æ­¥å±æ€§","description":"","frontmatter":{"title":"ç±»å®ä¾‹åŒ–å¼‚æ­¥å±æ€§"},"headers":[{"level":2,"title":"1ï¸âƒ£ é—®é¢˜ï¼šå¼‚æ­¥åˆå§‹åŒ–ä¸€ä¸ªå±æ€§","slug":"_1ï¸âƒ£-é—®é¢˜-å¼‚æ­¥åˆå§‹åŒ–ä¸€ä¸ªå±æ€§","link":"#_1ï¸âƒ£-é—®é¢˜-å¼‚æ­¥åˆå§‹åŒ–ä¸€ä¸ªå±æ€§","children":[]},{"level":2,"title":"2ï¸âƒ£ â­ï¸è§£å†³æ–¹æ¡ˆï¼šåŸºäºPromiseçš„æ„é€ å™¨","slug":"_2ï¸âƒ£-â­ï¸è§£å†³æ–¹æ¡ˆ-åŸºäºpromiseçš„æ„é€ å™¨","link":"#_2ï¸âƒ£-â­ï¸è§£å†³æ–¹æ¡ˆ-åŸºäºpromiseçš„æ„é€ å™¨","children":[{"level":3,"title":"2.1 ä½¿ç”¨ä¸€ä¸ªç«‹å³è°ƒç”¨çš„å¼‚æ­¥ç®­å¤´å‡½æ•°","slug":"_2-1-ä½¿ç”¨ä¸€ä¸ªç«‹å³è°ƒç”¨çš„å¼‚æ­¥ç®­å¤´å‡½æ•°","link":"#_2-1-ä½¿ç”¨ä¸€ä¸ªç«‹å³è°ƒç”¨çš„å¼‚æ­¥ç®­å¤´å‡½æ•°","children":[]}]},{"level":2,"title":"3ï¸âƒ£ è§£å†³æ–¹æ¡ˆï¼šé™æ€å·¥å‚æ–¹æ³• ğŸ¤©","slug":"_3ï¸âƒ£-è§£å†³æ–¹æ¡ˆ-é™æ€å·¥å‚æ–¹æ³•-ğŸ¤©","link":"#_3ï¸âƒ£-è§£å†³æ–¹æ¡ˆ-é™æ€å·¥å‚æ–¹æ³•-ğŸ¤©","children":[{"level":3,"title":"3.1 â­ï¸æ”¹è¿›ï¼šé€šè¿‡ç§å¯†tokenåˆ›å»ºç§æœ‰æ„é€ å™¨","slug":"_3-1-â­ï¸æ”¹è¿›-é€šè¿‡ç§å¯†tokenåˆ›å»ºç§æœ‰æ„é€ å™¨","link":"#_3-1-â­ï¸æ”¹è¿›-é€šè¿‡ç§å¯†tokenåˆ›å»ºç§æœ‰æ„é€ å™¨","children":[]},{"level":3,"title":"3.2 æ”¹è¿›ï¼šæ„é€ å™¨æŠ›å‡ºé”™è¯¯ï¼Œå·¥å‚å‡½æ•°å€Ÿç”¨ç±»åŸå‹ ğŸ˜","slug":"_3-2-æ”¹è¿›-æ„é€ å™¨æŠ›å‡ºé”™è¯¯-å·¥å‚å‡½æ•°å€Ÿç”¨ç±»åŸå‹-ğŸ˜","link":"#_3-2-æ”¹è¿›-æ„é€ å™¨æŠ›å‡ºé”™è¯¯-å·¥å‚å‡½æ•°å€Ÿç”¨ç±»åŸå‹-ğŸ˜","children":[]},{"level":3,"title":"3.3 æ”¹è¿›ï¼šå®ä¾‹é»˜è®¤ä¸æ¿€æ´»ï¼Œåªèƒ½é€šè¿‡å·¥å‚æ–¹æ³•æ¿€æ´»","slug":"_3-3-æ”¹è¿›-å®ä¾‹é»˜è®¤ä¸æ¿€æ´»-åªèƒ½é€šè¿‡å·¥å‚æ–¹æ³•æ¿€æ´»","link":"#_3-3-æ”¹è¿›-å®ä¾‹é»˜è®¤ä¸æ¿€æ´»-åªèƒ½é€šè¿‡å·¥å‚æ–¹æ³•æ¿€æ´»","children":[]},{"level":3,"title":"3.4 å˜ç§ï¼šåˆ†ç¦»å·¥å‚å‡½æ•°","slug":"_3-4-å˜ç§-åˆ†ç¦»å·¥å‚å‡½æ•°","link":"#_3-4-å˜ç§-åˆ†ç¦»å·¥å‚å‡½æ•°","children":[]}]},{"level":2,"title":"4ï¸âƒ£ ç»§æ‰¿ä¸€ä¸ªåŸºäºPromiseçš„æ„é€ å™¨ï¼ˆå¯é€‰ï¼‰","slug":"_4ï¸âƒ£-ç»§æ‰¿ä¸€ä¸ªåŸºäºpromiseçš„æ„é€ å™¨-å¯é€‰","link":"#_4ï¸âƒ£-ç»§æ‰¿ä¸€ä¸ªåŸºäºpromiseçš„æ„é€ å™¨-å¯é€‰","children":[]},{"level":2,"title":"6ï¸âƒ£ æ€»ç»“","slug":"_6ï¸âƒ£-æ€»ç»“","link":"#_6ï¸âƒ£-æ€»ç»“","children":[]},{"level":2,"title":"7ï¸âƒ£ æ‰©å±•é˜…è¯»","slug":"_7ï¸âƒ£-æ‰©å±•é˜…è¯»","link":"#_7ï¸âƒ£-æ‰©å±•é˜…è¯»","children":[]}],"relativePath":"5/Techniques-for-instantiating-classes.md","lastUpdated":1677749232000}'),p={name:"5/Techniques-for-instantiating-classes.md"},o=l(`<p>ç›®å½•ï¼š</p><nav class="table-of-contents"><ul><li><a href="#_1ï¸âƒ£-é—®é¢˜-å¼‚æ­¥åˆå§‹åŒ–ä¸€ä¸ªå±æ€§">1ï¸âƒ£ é—®é¢˜ï¼šå¼‚æ­¥åˆå§‹åŒ–ä¸€ä¸ªå±æ€§</a></li><li><a href="#_2ï¸âƒ£-â­ï¸è§£å†³æ–¹æ¡ˆ-åŸºäºpromiseçš„æ„é€ å™¨">2ï¸âƒ£ â­ï¸è§£å†³æ–¹æ¡ˆï¼šåŸºäºPromiseçš„æ„é€ å™¨</a><ul><li><a href="#_2-1-ä½¿ç”¨ä¸€ä¸ªç«‹å³è°ƒç”¨çš„å¼‚æ­¥ç®­å¤´å‡½æ•°">2.1 ä½¿ç”¨ä¸€ä¸ªç«‹å³è°ƒç”¨çš„å¼‚æ­¥ç®­å¤´å‡½æ•°</a></li></ul></li><li><a href="#_3ï¸âƒ£-è§£å†³æ–¹æ¡ˆ-é™æ€å·¥å‚æ–¹æ³•-ğŸ¤©">3ï¸âƒ£ è§£å†³æ–¹æ¡ˆï¼šé™æ€å·¥å‚æ–¹æ³• ğŸ¤©</a><ul><li><a href="#_3-1-â­ï¸æ”¹è¿›-é€šè¿‡ç§å¯†tokenåˆ›å»ºç§æœ‰æ„é€ å™¨">3.1 â­ï¸æ”¹è¿›ï¼šé€šè¿‡ç§å¯†tokenåˆ›å»ºç§æœ‰æ„é€ å™¨</a></li><li><a href="#_3-2-æ”¹è¿›-æ„é€ å™¨æŠ›å‡ºé”™è¯¯-å·¥å‚å‡½æ•°å€Ÿç”¨ç±»åŸå‹-ğŸ˜">3.2 æ”¹è¿›ï¼šæ„é€ å™¨æŠ›å‡ºé”™è¯¯ï¼Œå·¥å‚å‡½æ•°å€Ÿç”¨ç±»åŸå‹ ğŸ˜</a></li><li><a href="#_3-3-æ”¹è¿›-å®ä¾‹é»˜è®¤ä¸æ¿€æ´»-åªèƒ½é€šè¿‡å·¥å‚æ–¹æ³•æ¿€æ´»">3.3 æ”¹è¿›ï¼šå®ä¾‹é»˜è®¤ä¸æ¿€æ´»ï¼Œåªèƒ½é€šè¿‡å·¥å‚æ–¹æ³•æ¿€æ´»</a></li><li><a href="#_3-4-å˜ç§-åˆ†ç¦»å·¥å‚å‡½æ•°">3.4 å˜ç§ï¼šåˆ†ç¦»å·¥å‚å‡½æ•°</a></li></ul></li><li><a href="#_4ï¸âƒ£-ç»§æ‰¿ä¸€ä¸ªåŸºäºpromiseçš„æ„é€ å™¨-å¯é€‰">4ï¸âƒ£ ç»§æ‰¿ä¸€ä¸ªåŸºäºPromiseçš„æ„é€ å™¨ï¼ˆå¯é€‰ï¼‰</a></li><li><a href="#_6ï¸âƒ£-æ€»ç»“">6ï¸âƒ£ æ€»ç»“</a></li><li><a href="#_7ï¸âƒ£-æ‰©å±•é˜…è¯»">7ï¸âƒ£ æ‰©å±•é˜…è¯»</a></li></ul></nav><p>è¿™ä¸€ç« ä¸­ï¼Œæ¢ç´¢å‡ ç§åˆ›å»ºç±»å®ä¾‹çš„æ–¹å¼ï¼šæ„é€ å™¨ï¼Œå·¥å‚å‡½æ•°ç­‰ç­‰ã€‚é€šè¿‡å¤šç§æ–¹å¼è§£å†³åŒä¸€ä¸ªå®é™…é—®é¢˜ã€‚æœ¬ç« çš„å…³æ³¨ç‚¹æ˜¯ç±»ï¼Œæ‰€ä»¥å…¶å®ƒå’Œç±»ä¸ç›¸å…³çš„éƒ½è¢«å¿½ç•¥ã€‚</p><h2 id="_1ï¸âƒ£-é—®é¢˜-å¼‚æ­¥åˆå§‹åŒ–ä¸€ä¸ªå±æ€§" tabindex="-1">1ï¸âƒ£ é—®é¢˜ï¼šå¼‚æ­¥åˆå§‹åŒ–ä¸€ä¸ªå±æ€§ <a class="header-anchor" href="#_1ï¸âƒ£-é—®é¢˜-å¼‚æ­¥åˆå§‹åŒ–ä¸€ä¸ªå±æ€§" aria-hidden="true">#</a></h2><p>ä¸‹é¢å®¹å™¨ç±»åº”è¯¥ <strong>å¼‚æ­¥çš„</strong> æ¥å—å®ƒçš„å±æ€§ <code>data</code> çš„å†…å®¹ã€‚ä¸‹é¢æ˜¯ç¬¬ä¸€æ¬¡å°è¯•ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight has-highlighted-lines" tabindex="0"><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DataContainer</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">  #data </span><span style="color:#676E95;font-style:italic;">// A</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">downloaded</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line highlighted"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;font-style:italic;">data</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// B</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">getData</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Data: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// C</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> dc </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataContainer</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(dc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getData</span><span style="color:#A6ACCD;">())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">dc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getData</span><span style="color:#F07178;">())</span></span>
<span class="line"><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#676E95;font-style:italic;">// æ‰“å°ç»“æœ</span></span>
<span class="line highlighted"><span style="color:#676E95;font-style:italic;">// DATA: undefined</span></span>
<span class="line highlighted"><span style="color:#676E95;font-style:italic;">// Data: downloaded</span></span>
<span class="line"></span></code></pre></div><p><code>Aè¡Œ</code> å£°æ˜äº†ä¸€ä¸ª <a href="https://2ality.com/2019/07/private-class-fields.html" target="_blank" rel="noreferrer">ç§æœ‰å±æ€§</a> <code>#data</code>, åœ¨ <code>B</code> &amp; <code>C</code> è¡Œä½¿ç”¨äº†è¯¥ç§æœ‰å±æ€§ã€‚</p><p>ğŸ¤” åœ¨ <code>DataContainer</code> æ„é€ å™¨å†…çš„Promiseå¼‚æ­¥æ•²å®šï¼ˆ<code>settlement</code>ï¼‰, è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåªæœ‰å½“æˆ‘ä»¬å®Œæˆå½“å‰ä»»åŠ¡ï¼Œç„¶åé€šè¿‡ <code>setTimeout</code> å¼€å¯ä¸€ä¸ªæ–°çš„ä»»åŠ¡æ‰èƒ½çœ‹åˆ°æœ€ç»ˆçš„ <code>.data</code> å€¼ã€‚æ¢å¥è¯è¯´ï¼Œ<em>å½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡çœ‹åˆ° <code>DataContainer</code> å®ä¾‹æ—¶ï¼Œå®ƒæ²¡æœ‰å®Œå…¨å®ä¾‹åŒ–ğŸ˜¥</em>ã€‚</p><p id="2"></p><h2 id="_2ï¸âƒ£-â­ï¸è§£å†³æ–¹æ¡ˆ-åŸºäºpromiseçš„æ„é€ å™¨" tabindex="-1">2ï¸âƒ£ â­ï¸è§£å†³æ–¹æ¡ˆï¼šåŸºäºPromiseçš„æ„é€ å™¨ <a class="header-anchor" href="#_2ï¸âƒ£-â­ï¸è§£å†³æ–¹æ¡ˆ-åŸºäºpromiseçš„æ„é€ å™¨" aria-hidden="true">#</a></h2><p>é‚£å‡å¦‚æˆ‘ä»¬å»¶è¿Ÿè®¿é—® <code>DataContainer</code> å®ä¾‹ç›´åˆ°å®ƒå®Œå…¨å®ä¾‹åŒ–å‘¢ï¼Ÿ<strong>ğŸ“šæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨æ„é€ å™¨ä¸­è¿”å›ä¸€ä¸ªPromiseå°±å¯ä»¥å®Œæˆã€‚</strong></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ„é€ å‡½æ•°è¿”å›å®ƒæ‰€å±çš„ç±»çš„æ–°å®ä¾‹ï¼Œä½†æˆ‘ä»¬å¯ä»¥æ˜¾å¼çš„è¿”å›ä¸€ä¸ªå¯¹è±¡è¦†ç›–è¿™ç§é»˜è®¤è¡Œä¸ºã€‚</p></div><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight has-highlighted-lines" tabindex="0"><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DataContainer</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">#data</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// ğŸ˜ è¿”å›ä¸€ä¸ªPromise è¦†ç›–é»˜è®¤è¿”å›çš„ç±»çš„å®ä¾‹</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">downloaded</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;font-style:italic;">data</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span></span>
<span class="line highlighted"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// A</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">getData</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DATA: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataContainer</span><span style="color:#A6ACCD;">()</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;font-style:italic;">dc</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// B</span></span>
<span class="line highlighted"><span style="color:#F07178;">  	</span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">dc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getData</span><span style="color:#F07178;">())</span></span>
<span class="line highlighted"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ‰“å°</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Data: downloaded</span></span>
<span class="line"></span></code></pre></div><p>ç°åœ¨æˆ‘ä»¬å¿…é¡»ç­‰åˆ°æˆ‘ä»¬å¯ä»¥è®¿é—®æˆ‘ä»¬çš„å®ä¾‹ï¼ˆ<code>Bè¡Œ</code>ï¼‰ã€‚æ•°æ® â€œä¸‹è½½å®Œâ€ï¼ˆ<code>downloaded</code>ï¼‰åä¼ ç»™æˆ‘ä»¬ï¼ˆ<code>Aè¡Œ</code>ï¼‰ã€‚</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>ä¸Šé¢ä»£ç å­˜åœ¨2ç§å¯èƒ½é”™è¯¯çš„æ¥æºï¼š</p><ol><li>ä¸‹è½½å¯èƒ½å¤±è´¥ï¼Œäº§ç”Ÿä¸€ä¸ªæ‹’ç»çŠ¶æ€ï¼ˆ<code>rejection</code>ï¼‰</li><li>åœ¨ç¬¬ä¸€ä¸ª <code>.then()</code> å›è°ƒå‡½æ•°ä½“ä¸­å¯èƒ½æŠ›å‡ºå¼‚å¸¸</li></ol></div><p>ä¸è®ºé‚£ç§æƒ…å†µï¼Œé”™è¯¯éƒ½ä¼šæˆä¸ºä»æ„é€ å‡½æ•°ä¸­è¿”å›çš„Promiseçš„æ‹’ç»çŠ¶æ€ï¼ˆ<code>rejection</code>ï¼‰ã€‚</p><p>ğŸ‘©ğŸ»â€ğŸ« ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼š</p><ul><li>è¿™ç§æ–¹å¼çš„ä¸€ä¸ªå¥½å¤„å°±æ˜¯ï¼Œåªæœ‰è¯¥å®ä¾‹å®Œå…¨åˆå§‹åŒ–åæˆ‘ä»¬æ‰èƒ½å¯ä»¥è®¿é—®ã€‚å¹¶ä¸”æ²¡æœ‰å…¶å®ƒæ–¹å¼åˆ›å»º <code>DataContainer</code> å®ä¾‹ã€‚</li><li>ç¼ºç‚¹å°±æ˜¯ï¼Œè¯¥ç±»æ„é€ å™¨è¿”å›çš„æ˜¯ä¸€ä¸ªPromiseï¼Œè€Œä¸æ˜¯è¯¥ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œè¿™å¯èƒ½ä»¤äººæ„Ÿåˆ°æƒŠè®¶ã€‚ğŸ˜®</li></ul><h3 id="_2-1-ä½¿ç”¨ä¸€ä¸ªç«‹å³è°ƒç”¨çš„å¼‚æ­¥ç®­å¤´å‡½æ•°" tabindex="-1">2.1 ä½¿ç”¨ä¸€ä¸ªç«‹å³è°ƒç”¨çš„å¼‚æ­¥ç®­å¤´å‡½æ•° <a class="header-anchor" href="#_2-1-ä½¿ç”¨ä¸€ä¸ªç«‹å³è°ƒç”¨çš„å¼‚æ­¥ç®­å¤´å‡½æ•°" aria-hidden="true">#</a></h3><p>é™¤äº†ç›´æ¥ä½¿ç”¨ Promise API æ¥åˆ›å»ºä»æ„é€ å‡½æ•°è¿”å›çš„ Promiseï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨æˆ‘ä»¬ <a href="https://exploringjs.com/impatient-js/ch_async-functions.html#immediately-invoked-async-arrow-functions" target="_blank" rel="noreferrer">ç«‹å³è°ƒç”¨</a> çš„å¼‚æ­¥ç®­å¤´å‡½æ•°ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DataContainer</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">#data</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">async</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">downloaded</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// A</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">getData</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DATA: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> dc </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataContainer</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">dc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;font-style:italic;">dc</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">dc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getData</span><span style="color:#F07178;">())</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ‰“å°</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// DATA: downloaded</span></span>
<span class="line"></span></code></pre></div><h2 id="_3ï¸âƒ£-è§£å†³æ–¹æ¡ˆ-é™æ€å·¥å‚æ–¹æ³•-ğŸ¤©" tabindex="-1">3ï¸âƒ£ è§£å†³æ–¹æ¡ˆï¼šé™æ€å·¥å‚æ–¹æ³• ğŸ¤© <a class="header-anchor" href="#_3ï¸âƒ£-è§£å†³æ–¹æ¡ˆ-é™æ€å·¥å‚æ–¹æ³•-ğŸ¤©" aria-hidden="true">#</a></h2><p>ç±» <code>C</code> çš„é™æ€å·¥å‚æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªç±» <code>C</code> çš„å®ä¾‹ï¼Œè¿™æ˜¯ä½¿ç”¨ <code>new C()</code> å¤–çš„å¦ä¸€ç§é€‰æ‹©ã€‚JSä¸­å¸¸è§çš„é™æ€å·¥å‚ğŸ­æ–¹æ³•åå­—æœ‰ï¼š</p><ol><li><code>.create()</code>ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚ä¾‹å­ï¼š <code>Object.create()</code></li><li><code>.from()</code>ï¼šåŸºäºä¸åŒçš„å¯¹è±¡é€šè¿‡æ‹·è´æˆ–è€…è½¬æ¢çš„æ–¹å¼åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚ä¾‹å­ï¼š<code>Array.from()</code></li><li><code>.of()</code>ï¼šé€šè¿‡å‚æ•°ç»„åˆçš„æ–¹å¼åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚ä¾‹å­ï¼š<code>Array.of()</code></li></ol><p>ä¸‹é¢ä¾‹å­ä¸­ï¼Œ<code>DataContainer.create()</code> æ˜¯ä¸€ä¸ªé™æ€å·¥å‚å‡½æ•°ã€‚å®ƒè¿”å› DataContainer å®ä¾‹çš„ Promisesï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight has-highlighted-lines" tabindex="0"><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DataContainer</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">#data</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">create</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">downloaded</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line highlighted"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// ğŸ’¡ è¿™é‡Œè°ƒç”¨äº†DataContainerçš„æ„é€ å‡½æ•°</span></span>
<span class="line highlighted"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">data</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">getData</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DATA: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#A6ACCD;">DataContainer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create</span><span style="color:#A6ACCD;">()</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;font-style:italic;">dc</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> dc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getData</span><span style="color:#A6ACCD;">())</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ‰“å°</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// DATA: downloaded</span></span>
<span class="line"></span></code></pre></div><p>ç°åœ¨ï¼Œæ‰€æœ‰çš„å¼‚æ­¥åŠŸèƒ½éƒ½åŒ…å«åœ¨äº† <code>.create()</code> ä¸­ï¼Œè¿™ä¹Ÿä½¿å¾—ç±»çš„å…¶ä½™éƒ¨åˆ†éƒ½å®Œå…¨åŒæ­¥ï¼Œå› æ­¤æ›´åŠ ç®€æ´ã€‚</p><p>ğŸ‘©ğŸ»â€ğŸ« ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼š</p><ul><li>ä¼˜ç‚¹ï¼šæ„é€ å™¨å˜å¾—ååˆ†ç®€æ´</li><li>ç¼ºç‚¹ï¼šå¯èƒ½é€šè¿‡ <code>new DataContainer()</code> çš„æ–¹å¼ï¼Œå¯¼è‡´ä¸èƒ½æ­£ç¡®çš„åˆ›å»ºå®ä¾‹</li></ul><h3 id="_3-1-â­ï¸æ”¹è¿›-é€šè¿‡ç§å¯†tokenåˆ›å»ºç§æœ‰æ„é€ å™¨" tabindex="-1">3.1 â­ï¸æ”¹è¿›ï¼šé€šè¿‡ç§å¯†tokenåˆ›å»ºç§æœ‰æ„é€ å™¨ <a class="header-anchor" href="#_3-1-â­ï¸æ”¹è¿›-é€šè¿‡ç§å¯†tokenåˆ›å»ºç§æœ‰æ„é€ å™¨" aria-hidden="true">#</a></h3><p>å¦‚æœä½ æƒ³å®ä¾‹æ€»æ˜¯è¢«æ­£ç¡®çš„åˆ›å»ºï¼Œæˆ‘ä»¬å¿…é¡»ä¿è¯åªæœ‰ <code>DataContainer.create()</code> æ‰èƒ½è°ƒç”¨æ„é€ å™¨å‡½æ•°ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç§å¯†tokençš„æ–¹å¼å®Œæˆï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight has-highlighted-lines" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">// ğŸ¤© ç§˜å¯†token ä¸å‘å¤–å¯¼å‡º å› æ­¤å¤–éƒ¨æ— æ³•ä½¿ç”¨è¯¥token </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ä»è€Œä¿è¯æ„é€ å™¨æ— æ³•ç›´æ¥è°ƒç”¨ åªèƒ½è°ƒç”¨å·¥å‚å‡½æ•°</span></span>
<span class="line highlighted"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> secretToken </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Symbol</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DataContainer</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DataContainer</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">#data</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">create</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">downloaded</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line highlighted"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">secretToken</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">token</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">data</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">token</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">secretToken</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">è¯·ä½¿ç”¨DataContainer.create()åˆ›å»ºå®ä¾‹</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line highlighted"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">getData</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DATA: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">DataContainer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;font-style:italic;">dc</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> dc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getData</span><span style="color:#A6ACCD;">())</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ‰“å°</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// DATA: downloaded</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#676E95;font-style:italic;">// âŒ</span></span>
<span class="line highlighted"><span style="color:#676E95;font-style:italic;">// å¦‚æœä½¿ç”¨æ„é€ å™¨è°ƒç”¨</span></span>
<span class="line highlighted"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> dc </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataContainer</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">Symbol</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DataContainer</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">xxx</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ç›´æ¥æŠ›å‡ºé”™è¯¯</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Error: è¯·ä½¿ç”¨DataContainer.create()åˆ›å»ºå®ä¾‹</span></span>
<span class="line"></span></code></pre></div><p>å¦‚æœ <code>secretToken</code> å’Œ <code>DataContainer</code> åœ¨åŒä¸€ä¸ªæ¨¡å—ä¸‹ï¼Œåªå¯¼å‡º <code>DataContainer</code>ï¼Œåˆ™å¤–éƒ¨æ¨¡æ¿æ˜¯æ— æ³•è®¿é—® <code>secretToken</code>ï¼Œå› æ­¤æ˜¯æ— æ³•åˆ›å»º <code>DataContainer</code> å®ä¾‹çš„ã€‚</p><p>ğŸ‘©ğŸ»â€ğŸ« ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼š</p><ul><li>ä¼˜ç‚¹ï¼šå®‰å…¨å’Œç›´ç™½</li><li>ç¼ºç‚¹ï¼šæœ‰ç‚¹å¤æ‚å†—ä½™</li></ul><h3 id="_3-2-æ”¹è¿›-æ„é€ å™¨æŠ›å‡ºé”™è¯¯-å·¥å‚å‡½æ•°å€Ÿç”¨ç±»åŸå‹-ğŸ˜" tabindex="-1">3.2 æ”¹è¿›ï¼šæ„é€ å™¨æŠ›å‡ºé”™è¯¯ï¼Œå·¥å‚å‡½æ•°å€Ÿç”¨ç±»åŸå‹ ğŸ˜ <a class="header-anchor" href="#_3-2-æ”¹è¿›-æ„é€ å™¨æŠ›å‡ºé”™è¯¯-å·¥å‚å‡½æ•°å€Ÿç”¨ç±»åŸå‹-ğŸ˜" aria-hidden="true">#</a></h3><p>ä¸‹é¢è§£å†³æ–¹æ¡ˆå˜ç§ä¸­ï¼Œ<code>DataContainer</code> æ„é€ å‡½æ•°è¢«ç¦ç”¨ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªæŠ€å·§çš„æ–¹å¼åˆ›å»ºå®ä¾‹ï¼ˆ<code>Aè¡Œ</code>ï¼‰:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight has-highlighted-lines" tabindex="0"><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DataContainer</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">create</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">downloaded</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line highlighted"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">_init</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// A</span></span>
<span class="line highlighted"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">æ„é€ å™¨æ˜¯ç§æœ‰çš„ï¼Œè¯·é€šè¿‡DataContainer.create()åˆ›å»ºå®ä¾‹</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line highlighted"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">_init</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">data</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span></span>
<span class="line highlighted"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this</span></span>
<span class="line highlighted"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">getData</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DATA: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_data</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">DataContainer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;font-style:italic;">dc</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">dc</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">instanceof</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">DataContainer</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// B</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">dc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getData</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ‰“å°</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// true</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// DATA: downloaded</span></span>
<span class="line"></span></code></pre></div><p>åœ¨å†…éƒ¨ï¼Œ<code>DataContainer</code> çš„å®ä¾‹æ˜¯å…¶åŸå‹ä¸º <code>DataContainer.prototype</code> çš„ä»»ä½•å¯¹è±¡ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>Object.create()</code> (<code>Aè¡Œ</code>) åˆ›å»ºå®ä¾‹ï¼Œä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ <code>B</code> è¡Œè¿”å› <code>true</code>ã€‚</p><p>ğŸ‘©ğŸ»â€ğŸ« ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼š</p><ul><li>ä¼˜ç‚¹ï¼šä¼˜é›…ï¼›<code>instanceof</code> ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œï¼ˆè¯‘è€…æ³¨ï¼šå…¶ä½™çš„æ–¹å¼éƒ½æ˜¯é€šè¿‡è¿”å› <code>Promise</code> çš„æ–¹å¼ï¼‰</li><li>ç¼ºç‚¹ï¼š <ul><li>åˆ›å»ºå®ä¾‹æ²¡æœ‰è¢«å®Œå…¨è¢«é˜»æ­¢ã€‚ä¸è¿‡ï¼Œå…¬å¹³åœ°è¯´ï¼Œé€šè¿‡ <code>Object.create()</code> çš„å˜é€šæ–¹æ³•ä¹Ÿå¯ä»¥ç”¨äºæˆ‘ä»¬ä¹‹å‰çš„è§£å†³æ–¹æ¡ˆã€‚</li><li>ä¸èƒ½åœ¨DataContainerä¸­ä½¿ç”¨ <a href="https://2ality.com/2019/07/private-class-fields.html" target="_blank" rel="noreferrer">ç§æœ‰å­—æ®µ</a> å’Œ <a href="https://2ality.com/2019/07/private-methods-accessors-in-classes.html" target="_blank" rel="noreferrer">ç§æœ‰æ–¹æ³•</a>ï¼Œå› ä¸ºè¿™äº›ä»…é’ˆå¯¹é€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºçš„å®ä¾‹æ‰èƒ½è¢«æ­£ç¡®è®¾ç½®ã€‚</li></ul></li></ul><h3 id="_3-3-æ”¹è¿›-å®ä¾‹é»˜è®¤ä¸æ¿€æ´»-åªèƒ½é€šè¿‡å·¥å‚æ–¹æ³•æ¿€æ´»" tabindex="-1">3.3 æ”¹è¿›ï¼šå®ä¾‹é»˜è®¤ä¸æ¿€æ´»ï¼Œåªèƒ½é€šè¿‡å·¥å‚æ–¹æ³•æ¿€æ´» <a class="header-anchor" href="#_3-3-æ”¹è¿›-å®ä¾‹é»˜è®¤ä¸æ¿€æ´»-åªèƒ½é€šè¿‡å·¥å‚æ–¹æ³•æ¿€æ´»" aria-hidden="true">#</a></h3><p>å¦ä¸€ç§æ›´å†—ä½™çš„å˜ç§æ–¹å¼æ˜¯ï¼Œé€šè¿‡ <code>.#active</code> æ ‡å¿—å…³é—­å®ä¾‹ã€‚å¼€å¯å®ä¾‹çš„æ–¹æ³• <code>.#init()</code> ä¸èƒ½è¢«è®¿é—®è®¿é—®ï¼Œä½†æ˜¯ <code>Data.container()</code> å¯ä»¥è°ƒç”¨å®ƒ</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight has-highlighted-lines" tabindex="0"><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DataContainer</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">#data</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">create</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">downloaded</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line highlighted"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">#init</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// è°ƒç”¨ç§æœ‰æ–¹æ³•</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">#active</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  #</span><span style="color:#F07178;">init</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">data</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#active</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">getData</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">#check</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DATA: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  #</span><span style="color:#F07178;">check</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!this.</span><span style="color:#A6ACCD;">#active</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">è¯·ä½¿ç”¨DataContainer.create()åˆ›å»ºå®ä¾‹</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">DataContainer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;font-style:italic;">dc</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> dc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getData</span><span style="color:#A6ACCD;">())</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ‰“å°</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// DATA: downloaded</span></span>
<span class="line"></span></code></pre></div><p>æ ‡å¿— <code>.#active</code> å¼ºåˆ¶åœ¨æ¯ä¸ªæ–¹æ³•å¼€å§‹å‰éƒ½å¿…é¡»è°ƒç”¨ç§æœ‰æ–¹æ³• <code>.#check()</code>.</p><p>è¿™ç§æ–¹æ³•çš„ç¼ºç‚¹å°±æ˜¯å¤ªè¿‡å†—ä½™ã€‚æœ‰å¯èƒ½åœ¨æŸä¸ªæ–¹æ³•ä¸­å¿˜è®°è°ƒç”¨ <code>#check()</code>ã€‚</p><h3 id="_3-4-å˜ç§-åˆ†ç¦»å·¥å‚å‡½æ•°" tabindex="-1">3.4 å˜ç§ï¼šåˆ†ç¦»å·¥å‚å‡½æ•° <a class="header-anchor" href="#_3-4-å˜ç§-åˆ†ç¦»å·¥å‚å‡½æ•°" aria-hidden="true">#</a></h3><p>ä¸ºäº†å®Œæ•´æ€§ï¼Œä¸‹é¢å±•ç¤ºå¦ä¸€ç§å˜ç§ï¼šé™¤äº†ä½¿ç”¨é™æ€æ–¹æ³•ä½œä¸ºå·¥å‚å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨åˆ†ç¦»ç‰ˆæœ¬çš„å·¥å‚å‡½æ•°ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight has-highlighted-lines" tabindex="0"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> secretToken </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Symbol</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">secretToken</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DataContainer</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">#data</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">token</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">data</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">token</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">secretToken</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">æ„é€ å™¨æ˜¯ç§æœ‰çš„</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">getData</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DATA: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createDataContainer</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line highlighted"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">downloaded</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line highlighted"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">DataContainer</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">secretToken</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">)</span></span>
<span class="line highlighted"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">createDataContainer</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;font-style:italic;">dc</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> dc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getData</span><span style="color:#A6ACCD;">())</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ‰“å°</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// DATA: downloaded</span></span>
<span class="line"></span></code></pre></div><p>å•ç‹¬å‡½æ•°ä½œä¸ºå·¥å‚ä¼˜åŠ¿å¾ˆæœ‰ç”¨ï¼Œä½†åœ¨è¿™é‡Œè¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘æ›´åå¥½é™æ€æ–¹æ³•çš„å½¢å¼ï¼š</p><ul><li>å•ç‹¬å‡½æ•°ä¸èƒ½è®¿é—®DataContainerä¸­çš„ç§æœ‰æˆå‘˜</li><li><code>DataContainer.create()</code> è¿™ç§å½¢å¼æ›´ç¾è§‚ğŸ˜…</li></ul><h2 id="_4ï¸âƒ£-ç»§æ‰¿ä¸€ä¸ªåŸºäºpromiseçš„æ„é€ å™¨-å¯é€‰" tabindex="-1">4ï¸âƒ£ ç»§æ‰¿ä¸€ä¸ªåŸºäºPromiseçš„æ„é€ å™¨ï¼ˆå¯é€‰ï¼‰ <a class="header-anchor" href="#_4ï¸âƒ£-ç»§æ‰¿ä¸€ä¸ªåŸºäºpromiseçš„æ„é€ å™¨-å¯é€‰" aria-hidden="true">#</a></h2><p>é€šå¸¸ï¼Œç»§æ‰¿ä¸€èˆ¬ç”¨çš„å¾ˆå°‘ã€‚</p><p>ä½¿ç”¨ä¸€ä¸ªå•ç‹¬çš„å·¥å‚å‡½æ•°ï¼Œç›¸å¯¹æ¥è¯´ç»§æ‰¿ <code>DataContainer</code> å¾ˆç®€å•ã€‚</p><p>ä½¿ç”¨åŸºäº Promise çš„æ„é€ å‡½æ•°æ‰©å±•ç±»ä¼šå¯¼è‡´ä¸¥é‡çš„é™åˆ¶ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ç»§æ‰¿äº† <code>DataContainer</code>ã€‚å­ç±» <code>SubDataContainer</code> æœ‰è‡ªå·±çš„ç§æœ‰å­—æ®µ <code>.#moreData</code> ï¼Œå®ƒé€šè¿‡æŒ‚é’©åˆ°å…¶çˆ¶ç±»çš„æ„é€ å‡½æ•°è¿”å›çš„ <code>Promise</code> æ¥å¼‚æ­¥åˆå§‹åŒ–ã€‚</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DataContainer</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">#data</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">downloaded</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;font-style:italic;">data</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">getData</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DATA: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SubDataContainer</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DataContainer</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">#moreData</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">super</span><span style="color:#F07178;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">promise</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;font-style:italic;">_this</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">more</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;font-style:italic;">moreData</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#A6ACCD;">_this</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">#moreData</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">moreData</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">_this</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">getData</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">super</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getData</span><span style="color:#F07178;">() </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#moreData</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>æˆ‘ä»¬ä¸èƒ½å®ä¾‹åŒ–è¿™ä¸ªç±»ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">rejects</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">SubDataContainer</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">TypeError</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">message</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Cannot write private member #moreData </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">to an object whose class did not declare it</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>ä¸ºä»€ä¹ˆä¼šå¤±è´¥å‘¢ï¼Ÿä¸€ä¸ªæ„é€ å™¨æ€»æ˜¯å°†å®ƒçš„ç§æœ‰å±æ€§æ·»åŠ åˆ°å®ƒçš„ <code>this</code> ä¸­ã€‚ä½†æ˜¯è¿™é‡Œï¼Œåœ¨å­æ„é€ å™¨çš„ <code>this</code> æ˜¯çˆ¶æ„é€ å™¨ä¸­è¿”å›çš„Promise(è€Œä¸æ˜¯é€šè¿‡ <code>Promise</code> ä¼ é€’çš„ <code>SubDataContainer</code> çš„å®ä¾‹)ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœ <code>SubDataContainer</code> æ²¡æœ‰ä»»ä½•ç§æœ‰å­—æ®µï¼Œè¿™ç§æ–¹æ³•ä»ç„¶æœ‰æ•ˆã€‚</p><h2 id="_6ï¸âƒ£-æ€»ç»“" tabindex="-1">6ï¸âƒ£ æ€»ç»“ <a class="header-anchor" href="#_6ï¸âƒ£-æ€»ç»“" aria-hidden="true">#</a></h2><p>å¯¹äºæœ¬ç« ç ”ç©¶çš„åœºæ™¯ï¼Œæˆ‘æ›´å–œæ¬¢åŸºäºPromiseçš„æ„é€ å‡½æ•°ï¼ˆå³ <a href="#2.1">2.1</a>ï¼‰æˆ–é™æ€å·¥å‚æ–¹æ³•åŠ ä¸Šé€šè¿‡ç§˜å¯†ä»¤ç‰Œçš„ç§æœ‰æ„é€ å‡½æ•°ï¼ˆå³ <a href="#3.1">3.1</a>ï¼‰ã€‚</p><p>ä½†æ˜¯ï¼Œæ­¤å¤„ä»‹ç»çš„å…¶ä»–æŠ€æœ¯åœ¨å…¶ä»–åœºæ™¯ä¸­ä»ç„¶æœ‰ç”¨ã€‚</p><h2 id="_7ï¸âƒ£-æ‰©å±•é˜…è¯»" tabindex="-1">7ï¸âƒ£ æ‰©å±•é˜…è¯» <a class="header-anchor" href="#_7ï¸âƒ£-æ‰©å±•é˜…è¯»" aria-hidden="true">#</a></h2><ul><li>å¼‚æ­¥ç¼–ç¨‹ï¼š <ul><li><a href="https://exploringjs.com/impatient-js/ch_promises.html" target="_blank" rel="noreferrer">Promise for asynchronous programming</a> - â€œJavaScript for impatient programmersâ€ ğŸ“š</li><li><a href="https://exploringjs.com/impatient-js/ch_async-functions.html" target="_blank" rel="noreferrer">Async Functions</a> - â€œJavaScript for impatient programmersâ€ ğŸ“š</li><li><a href="https://exploringjs.com/impatient-js/ch_async-functions.html#immediately-invoked-async-arrow-functions" target="_blank" rel="noreferrer">Immediately invoked async arrow function</a> - â€œJavaScript for impatient programmersâ€ ğŸ“š</li></ul></li><li>OOP: <ul><li><a href="https://exploringjs.com/impatient-js/ch_proto-chains-classes.html" target="_blank" rel="noreferrer">Prototype chains and classed</a> - â€œJavaScript for impatient programmersâ€ ğŸ“š</li><li><a href="https://2ality.com/2019/07/private-class-fields.html" target="_blank" rel="noreferrer">åšå®¢ï¼š ES proposal: private class fields</a></li><li><a href="https://2ality.com/2019/07/private-methods-accessors-in-classes.html" target="_blank" rel="noreferrer">åšå®¢ï¼š ES proposal: private methods and accessors in JavaScript classes</a></li></ul></li></ul><p>è¯‘è€…æ³¨ï¼šå…³äºè¿™ä¸€ç« ï¼Œæ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯ï¼Œ</p><ul><li>æ„é€ å™¨ä¸­è¿”å›çš„ä¸æ˜¯å®ä¾‹è‡ªèº«ï¼Œè€Œæ˜¯è‡ªå®šä¹‰çš„Promiseï¼ŒåŠ ä¸Šå¼‚æ­¥çš„ç‰¹æ€§ã€‚</li><li>è¿˜æœ‰äº›å¥‡å¥‡æ€ªæ€ªçš„ç”¨æ³•ï¼Œæ¯”å¦‚ <a href="#3.2">Object.create(this.prototype)._init(data)</a> å€Ÿç”¨ç±»åŸå‹çš„æ–¹å¼ã€‚</li><li>å¦å¤–å¦‚ä½•ä½¿ç”¨ <code>secretToken</code> çš„æ–¹å¼ä¿è¯æ„é€ å™¨çš„æ­£ç¡®è°ƒç”¨ã€‚</li><li>ç§æœ‰æ–¹æ³•å’Œå±æ€§çš„ä½¿ç”¨</li></ul><p>2022å¹´07æœˆ08æ—¥11:24:33</p>`,68),e=[o];function t(c,r,y,F,D,i){return n(),a("div",null,e)}const d=s(p,[["render",t]]);export{C as __pageData,d as default};
