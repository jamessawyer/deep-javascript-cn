import{_ as s,c as n,o as a,O as l}from"./chunks/framework.103df890.js";const C=JSON.parse('{"title":"ç±»å‹å¼ºè½¬","description":"","frontmatter":{"title":"ç±»å‹å¼ºè½¬"},"headers":[],"relativePath":"2/Type-coercion-in-JavaScript.md","lastUpdated":1682474873000}'),p={name:"2/Type-coercion-in-JavaScript.md"},o=l(`<p>ç›®å½•ï¼š</p><nav class="table-of-contents"><ul><li><a href="#_1ï¸âƒ£-ä»€ä¹ˆæ˜¯ç±»å‹å¼ºè½¬">1ï¸âƒ£ ä»€ä¹ˆæ˜¯ç±»å‹å¼ºè½¬ï¼Ÿ</a><ul><li><a href="#_2-1-å¤„ç†ç±»å‹å¼ºè½¬">2.1 å¤„ç†ç±»å‹å¼ºè½¬</a></li></ul></li><li><a href="#_2ï¸âƒ£-â­-ecmascriptè§„èŒƒä¸­å¸®åŠ©å®ç°å¼ºè½¬çš„æ“ä½œ">2ï¸âƒ£ â­ ECMAScriptè§„èŒƒä¸­å¸®åŠ©å®ç°å¼ºè½¬çš„æ“ä½œ</a><ul><li><a href="#_2-1-è½¬æ¢ä¸ºåŸå§‹ç±»å‹å’Œå¯¹è±¡">2.1 è½¬æ¢ä¸ºåŸå§‹ç±»å‹å’Œå¯¹è±¡</a></li><li><a href="#_2-2-è½¬æ¢ä¸ºæ•°å€¼ç±»å‹">2.2 è½¬æ¢ä¸ºæ•°å€¼ç±»å‹</a></li><li><a href="#_2-3-è½¬æ¢ä¸ºå±æ€§é”®">2.3 è½¬æ¢ä¸ºå±æ€§é”®</a></li><li><a href="#_2-4-è½¬æ¢ä¸ºæ•°ç»„ç´¢å¼•">2.4 è½¬æ¢ä¸ºæ•°ç»„ç´¢å¼•</a></li><li><a href="#_2-5-è½¬æ¢ä¸ºç±»å‹æ•°ç»„å…ƒç´ ">2.5 è½¬æ¢ä¸ºç±»å‹æ•°ç»„å…ƒç´ </a></li></ul></li><li><a href="#_3ï¸âƒ£-â­ä¸­åœºä¼‘æ¯-ä»¥jså½¢å¼è¡¨ç¤ºè§„èŒƒä¸­çš„ç®—æ³•">3ï¸âƒ£ â­ä¸­åœºä¼‘æ¯ï¼šä»¥JSå½¢å¼è¡¨ç¤ºè§„èŒƒä¸­çš„ç®—æ³•</a></li><li><a href="#_4ï¸âƒ£-â­å¼ºè½¬ç®—æ³•jsç‰ˆ">4ï¸âƒ£ â­å¼ºè½¬ç®—æ³•JSç‰ˆ</a><ul><li><a href="#_4-1-toprimitive">4.1 ToPrimitive()</a></li><li><a href="#_4-2-tostring-å’Œç›¸å…³æ“ä½œ">4.2 ToString() å’Œç›¸å…³æ“ä½œ</a></li><li><a href="#_4-3-topropertykey">4.3 ToPropertyKey()</a></li><li><a href="#_4-4-tonumeric-å’Œç›¸å…³æ“ä½œ">4.4 ToNumeric() å’Œç›¸å…³æ“ä½œ</a></li></ul></li><li><a href="#_5ï¸âƒ£-å¼ºè½¬çš„æ“ä½œ">5ï¸âƒ£ å¼ºè½¬çš„æ“ä½œ</a><ul><li><a href="#_5-1-â­-æ“ä½œ">5.1 â­ + æ“ä½œ</a></li><li><a href="#_5-2-â­-æŠ½è±¡ç›¸ç­‰æ€§æ¯”è¾ƒ">5.2 â­ æŠ½è±¡ç›¸ç­‰æ€§æ¯”è¾ƒï¼ˆ==ï¼‰</a></li></ul></li><li><a href="#_6ï¸âƒ£-æœ¯è¯­è¡¨-å…³äºç±»å‹å¼ºè½¬çš„åè¯">6ï¸âƒ£ æœ¯è¯­è¡¨ï¼šå…³äºç±»å‹å¼ºè½¬çš„åè¯</a></li></ul></nav><p>æœ¬ç« æˆ‘ä»¬å°†æ¢ç´¢JSä¸­ <em>ç±»å‹å¼ºè½¬ï¼ˆ<code>type coercion</code>ï¼‰</em>ã€‚å¹¶ä¸”æˆ‘ä»¬å°†ç›¸å¯¹æ·±å…¥è¿™ä¸ªä¸»é¢˜ï¼Œä¾‹å¦‚ï¼ŒECMAScriptè§„èŒƒæ˜¯å¦‚ä½•å¤„ç†å¼ºè½¬çš„ã€‚</p><p id="1"></p><h2 id="_1ï¸âƒ£-ä»€ä¹ˆæ˜¯ç±»å‹å¼ºè½¬" tabindex="-1">1ï¸âƒ£ ä»€ä¹ˆæ˜¯ç±»å‹å¼ºè½¬ï¼Ÿ <a class="header-anchor" href="#_1ï¸âƒ£-ä»€ä¹ˆæ˜¯ç±»å‹å¼ºè½¬" aria-label="Permalink to &quot;1ï¸âƒ£ ä»€ä¹ˆæ˜¯ç±»å‹å¼ºè½¬ï¼Ÿ&quot;">â€‹</a></h2><p>ğŸ‘©ğŸ»â€ğŸ« æ¯ä¸ªæ“ä½œï¼ˆå‡½æ•°ï¼Œæ“ä½œç¬¦ç­‰ï¼‰éƒ½æœŸæœ›å…¶å‚æ•°æ˜¯æ­£ç¡®çš„ç±»å‹ã€‚å¦‚æœæŸä¸ªå‚æ•°çš„ç±»å‹ä¸æ­£ç¡®ï¼Œé€šå¸¸ä¼šå‡ºç°3ç§é€‰é¡¹ï¼Œæ¯”å¦‚ï¼Œä¸€ä¸ªå‡½æ•°ï¼š</p><ol><li><p>å‡½æ•°æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">multiply</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">x</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">y</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">  ) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">TypeError</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></li><li><p>å‡½æ•°è¿”å›ä¸€ä¸ªä¸æ­£ç¡®çš„å€¼</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">multiply</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">x</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">y</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">  ) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">NaN</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></li><li><p>å‡½æ•°å°†å…¶å‚æ•°è½¬æ¢ä¸ºæ­£ç¡®çš„ç±»å‹ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">multiply</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">x</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">y</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Number</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Number</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div></li></ol><p><strong>åœ¨ç¬¬3ç§æƒ…å†µä¸­ï¼Œæ“ä½œæ‰§è¡Œäº†éšå¼ç±»å‹è½¬æ¢ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ç±»å‹å¼ºè½¬ï¼ˆ<code>Type Coercion</code>ï¼‰</strong>ã€‚</p><p>JSå¼€å§‹çš„æ—¶å€™æ˜¯æ²¡æœ‰å¼‚å¸¸çš„ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆJSä¼šå¯¹å¤§å¤šæ•°æ“ä½œä½¿ç”¨å¼ºè½¬å’Œé”™è¯¯å€¼ğŸ˜…ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// å¼ºè½¬</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equal</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// é”™è¯¯å€¼ä»£æ›¿</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equal</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">Infinity</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equal</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">Number</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">xyz</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">NaN</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><p>ç„¶è€Œï¼Œæœ‰äº›æƒ…å†µï¼ˆå°¤å…¶æ˜¯JSæœ€æ–°çš„ä¸€äº›ç‰¹æ€§ï¼‰åœ¨å‚æ•°ç±»å‹ä¸æ­£ç¡®æ—¶ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼š</p><ul><li><p>è®¿é—® <code>null</code> æˆ– <code>undefined</code> å±æ€§ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">undefined</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prop</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// âŒ TypeError: ä¸èƒ½è¯»å–undefinedçš„å±æ€§ \`prop\`</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">null</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prop</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// âŒ TypeError: ä¸èƒ½è¯»å–nullçš„å±æ€§ \`prop\`</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">prop</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// âŒ TypeError: ä¸èƒ½åœ¨ nullä¸­ä½¿ç”¨ \`in\` æ“ä½œç¬¦æœç´¢ \`prop\`</span></span></code></pre></div></li><li><p>ä½¿ç”¨symbols:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Symbol</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// âŒ TypeError: ä¸èƒ½å°†ä¸€ä¸ªSymbolå€¼è½¬æ¢ä¸ºnumberç±»å‹</span></span></code></pre></div></li><li><p>æ··åˆä½¿ç”¨ <code>bigints</code> &amp; <code>numbers</code>ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// \`æ•°å­— + n\` è¡¨ç¤º BigInt ç±»å‹ </span></span>
<span class="line"><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#C792EA;">n</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// âŒ TypeError: ä¸èƒ½å°†BigIntå’Œå…¶å®ƒç±»å‹æ··åˆ</span></span></code></pre></div></li><li><p>ä¸æ”¯æŒè¯¥æ“ä½œçš„ <code>New</code> è°ƒç”¨ æˆ– å‡½æ•°è°ƒç”¨</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">123</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// âŒ TypeError: 123ä¸æ˜¯ä¸€ä¸ªå‡½æ•°</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;">)()</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// // âŒ TypeError: ç±»æ„é€ å™¨è°ƒç”¨è¦ä½¿ç”¨ \`new\` æ“ä½œç¬¦</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// âŒ TypeError: (ä¸­é—´å€¼) ä¸æ˜¯ä¸€ä¸ªæ„é€ å™¨</span></span></code></pre></div></li><li><p>æ”¹å˜åªè¯»å±æ€§ï¼ˆåªåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹æŠ›å‡ºé”™è¯¯ï¼‰ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// å¯é€šè¿‡ Object.getOwnPropertyDescriptor(&#39;abc&#39;, &#39;length&#39;) æŸ¥çœ‹æè¿°å™¨å±æ€§</span></span>
<span class="line"><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">abc</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// âŒ TypeError: ä¸èƒ½ç»™åªè¯»å±æ€§ \`length\` èµ‹å€¼</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">freeze</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">prop</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prop </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// âŒ TypeError: ä¸èƒ½ç»™åªè¯»å±æ€§ \`prop\` èµ‹å€¼</span></span></code></pre></div></li></ul><p id="2.1"></p><h3 id="_2-1-å¤„ç†ç±»å‹å¼ºè½¬" tabindex="-1">2.1 å¤„ç†ç±»å‹å¼ºè½¬ <a class="header-anchor" href="#_2-1-å¤„ç†ç±»å‹å¼ºè½¬" aria-label="Permalink to &quot;2.1 å¤„ç†ç±»å‹å¼ºè½¬&quot;">â€‹</a></h3><p>ğŸ“š 2ç§å¤„ç†å¼ºè½¬çš„å¸¸è§æ–¹å¼ï¼š</p><ol><li><p>è°ƒç”¨è€…æ˜¾å¼çš„è½¬æ¢å…¶å€¼ï¼Œå› æ­¤è®©å…¶æ‹¥æœ‰æ­£ç¡®ç±»å‹ã€‚æ¯”å¦‚ï¼šä¸‹é¢ğŸŒ°ï¼Œæˆ‘ä»¬åƒå°†2ä¸ªå­—ç¬¦ä¸²ç¼–ç çš„æ•°å­—ç›¸ä¹˜ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> x </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> y </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equal</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">Number</span><span style="color:#A6ACCD;">(x) </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Number</span><span style="color:#A6ACCD;">(y)</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;">)</span></span></code></pre></div></li><li><p><em>è°ƒç”¨è€…è®©æ“ä½œ(<code>*</code> æ“ä½œ)å¸®å¿™è½¬æ¢ç±»å‹</em> ğŸ˜‚</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> x </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> y </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#82AAFF;">assert</span><span style="color:#A6ACCD;">(x </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> y</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;">)</span></span></code></pre></div></li></ol><p>æˆ‘é€šå¸¸åå‘ä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼ï¼Œå› ä¸ºå®ƒèƒ½å¾ˆå¥½çš„é˜æ˜æˆ‘çš„æ„å›¾ï¼šæˆ‘å¸Œæœ›xå’Œyè™½ç„¶ä¸æ˜¯æ•°å­—ï¼Œä½†æ˜¯ä¸¤ä¸ªæ•°å­—èƒ½ç›¸ä¹˜ã€‚ï¼ˆè¯‘è€…æ³¨ï¼šå³è®©å­—ç¬¦ä¸²æ•°å­—èƒ½æ­£ç¡®ç›¸ä¹˜ï¼‰</p><p id="2"></p><h2 id="_2ï¸âƒ£-â­-ecmascriptè§„èŒƒä¸­å¸®åŠ©å®ç°å¼ºè½¬çš„æ“ä½œ" tabindex="-1">2ï¸âƒ£ â­ ECMAScriptè§„èŒƒä¸­å¸®åŠ©å®ç°å¼ºè½¬çš„æ“ä½œ <a class="header-anchor" href="#_2ï¸âƒ£-â­-ecmascriptè§„èŒƒä¸­å¸®åŠ©å®ç°å¼ºè½¬çš„æ“ä½œ" aria-label="Permalink to &quot;2ï¸âƒ£ â­ ECMAScriptè§„èŒƒä¸­å¸®åŠ©å®ç°å¼ºè½¬çš„æ“ä½œ&quot;">â€‹</a></h2><p>ä¸‹é¢æˆ‘ä»¬å°†æè¿°ECMAScriptè§„èŒƒä¸­ç”¨äºå°†å®é™…å‚æ•°è½¬æ¢ä¸ºæœŸæœ›ç±»å‹æœ€é‡è¦çš„å†…éƒ¨å‡½æ•°ã€‚</p><p>æ¯”å¦‚ï¼Œåœ¨TypeScriptä¸­ï¼Œæˆ‘ä»¬å¯èƒ½å†™ä¸ºï¼š</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">isNaN</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">number</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">number</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>åœ¨è§„èŒƒä¸­ï¼Œè¿™å¯èƒ½çœ‹ç€ <a href="https://tc39.es/ecma262/#sec-multiplicative-operators-runtime-semantics-evaluation" target="_blank" rel="noreferrer">å¦‚ä¸‹</a> ï¼ˆç¿»è¯‘ä¸ºJSï¼Œä»¥ä¾¿æˆ‘ä»¬èƒ½æ›´å¥½çš„ç†è§£ï¼‰</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">isNaN</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">number</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ToNumber æ˜¯åé¢ä¼šå®šä¹‰çš„ä¸€ä¸ªç®—æ³•æ“ä½œ</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">num</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ToNumber</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">number</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p id="2.1"></p><h3 id="_2-1-è½¬æ¢ä¸ºåŸå§‹ç±»å‹å’Œå¯¹è±¡" tabindex="-1">2.1 è½¬æ¢ä¸ºåŸå§‹ç±»å‹å’Œå¯¹è±¡ <a class="header-anchor" href="#_2-1-è½¬æ¢ä¸ºåŸå§‹ç±»å‹å’Œå¯¹è±¡" aria-label="Permalink to &quot;2.1 è½¬æ¢ä¸ºåŸå§‹ç±»å‹å’Œå¯¹è±¡&quot;">â€‹</a></h3><p>å½“æœŸæœ›åŸå§‹ç±»å‹æˆ–è€…å¯¹è±¡æ—¶ï¼Œå°†ä½¿ç”¨ä¸‹é¢ï¼ˆè§„èŒƒå†…éƒ¨ï¼‰è½¬æ¢å‡½æ•°ï¼š</p><ul><li><code>ToBoolean()</code></li><li><code>ToNumber()</code></li><li><code>ToBigInt()</code></li><li><code>ToString()</code></li><li><code>ToObject()</code></li></ul><p>ä¸Šé¢å†…éƒ¨å‡½æ•°ï¼ŒJSä¸­å­˜åœ¨ç±»ä¼¼çš„æ–¹æ³•ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">Boolean</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">Boolean</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">Number</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 123</span></span></code></pre></div><p>åœ¨å¼•å…¥bigints(ä¸æ•°å­—ä¸€èµ·å­˜åœ¨)ä¹‹åï¼Œè§„èŒƒé€šå¸¸ä½¿ç”¨ <code>ToNumeric()</code>ï¼Œè€Œä¹‹å‰ä½¿ç”¨çš„æ˜¯ <code>ToNumber()</code>ã€‚</p><p id="2.2"></p><h3 id="_2-2-è½¬æ¢ä¸ºæ•°å€¼ç±»å‹" tabindex="-1">2.2 è½¬æ¢ä¸ºæ•°å€¼ç±»å‹ <a class="header-anchor" href="#_2-2-è½¬æ¢ä¸ºæ•°å€¼ç±»å‹" aria-label="Permalink to &quot;2.2 è½¬æ¢ä¸ºæ•°å€¼ç±»å‹&quot;">â€‹</a></h3><p>ç›®å‰ï¼ŒJSä¸­å­˜åœ¨2ç§ <a href="https://tc39.es/ecma262/#sec-numeric-types" target="_blank" rel="noreferrer">å†…ç½®æ•°å€¼ç±»å‹</a>ï¼š <em>number &amp; bigint</em>ã€‚</p><p>ğŸ‘©ğŸ»â€ğŸ«ï¼š</p><ol><li><p><code>ToNumeric()</code> è¿”å›ä¸€ä¸ªæ•°å­—å€¼ <code>num</code>ã€‚å®ƒçš„è°ƒç”¨è€…é€šå¸¸è°ƒç”¨è§„èŒƒç±»å‹<code>num</code>çš„<code>mthd</code>æ–¹æ³•:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">Type</span><span style="color:#A6ACCD;">(num)::</span><span style="color:#82AAFF;">mthd</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><p>å…¶ä½™çš„ï¼Œä¸‹é¢æ“ä½œä½¿ç”¨çš„æ˜¯ <code>ToNumeric()</code>: ğŸš€</p><ul><li><code>++x</code> &amp; <code>x++</code> æ“ä½œç¬¦</li><li><code>*</code> æ“ä½œç¬¦</li></ul></li><li><p>å½“æœŸæœ›æ•°å€¼æ²¡æœ‰å°æ•°éƒ¨åˆ†æ—¶ï¼Œä¼šä½¿ç”¨ <code>ToInteger(x)</code> ã€‚ä¹‹åå…¶ç»“æœè¿”å›é€šå¸¸ä¼šè¿›ä¸€æ­¥é™åˆ¶ï¼š</p><ul><li>å®ƒä¼šå…ˆè°ƒç”¨ <code>ToNumber(x)</code>ï¼Œç„¶åç§»é™¤å°æ•°éƒ¨åˆ†ï¼ˆç±»ä¼¼ <code>Math.trunc()</code>ï¼‰</li><li>ä½¿ç”¨äº† <code>ToInteger()</code> çš„ä¸€äº›æ“ä½œï¼š <ul><li><code>Number.prototype.toString(radix?)</code></li><li><code>String.prototype.codePointAt(pos)</code></li><li><code>Array.prototype.slice(start, end)</code></li><li>ç­‰ç­‰</li></ul></li></ul></li><li><p><code>ToInt32()</code> &amp; <code>ToUint32()</code> å°†æ•°å€¼è½¬æ¢ä¸º32ä½æ•´æ•°ï¼Œç”¨äº <strong>ä½æ“ä½œ</strong>ï¼ˆå¦‚ä¸‹è¡¨ï¼‰</p><ul><li><code>ToInt32()</code>ï¼šæœ‰ç¬¦ï¼ŒåŒºé—´ <code>[âˆ’2^31, 2^31âˆ’1] </code></li><li><code>ToUint32()</code>ï¼š æ— ç¬¦ï¼ŒåŒºé—´ <code>[0, 2^32-1]</code></li></ul></li></ol><p>ä½æ•°å­—æ“ä½œç¬¦çš„æ“ä½œæ•°å¼ºåˆ¶è½¬æ¢ï¼ˆBigIntæ“ä½œç¬¦æ²¡æœ‰é™åˆ¶ä½çš„æ•°é‡ï¼‰</p><table><thead><tr><th style="text-align:center;">æ“ä½œç¬¦</th><th style="text-align:center;">å·¦æ“ä½œæ•°</th><th style="text-align:center;">å³æ“ä½œæ•°</th><th style="text-align:center;">ç»“æœç±»å‹</th></tr></thead><tbody><tr><td style="text-align:center;">å·¦ç§» &lt;&lt;</td><td style="text-align:center;">ToInt32()</td><td style="text-align:center;">ToUint32()</td><td style="text-align:center;">Int32</td></tr><tr><td style="text-align:center;">æœ‰ç¬¦å³ç§» &gt;&gt;</td><td style="text-align:center;">ToInt32()</td><td style="text-align:center;">ToUint32()</td><td style="text-align:center;">Int32</td></tr><tr><td style="text-align:center;">æ— ç¬¦å³ç§» &gt;&gt;&gt;</td><td style="text-align:center;">ToInt32()</td><td style="text-align:center;">ToUint32()</td><td style="text-align:center;">Uint32</td></tr><tr><td style="text-align:center;">&amp;, ^, |</td><td style="text-align:center;">ToInt32()</td><td style="text-align:center;">ToUint32()</td><td style="text-align:center;">Int32</td></tr><tr><td style="text-align:center;">~</td><td style="text-align:center;">--</td><td style="text-align:center;">ToInt32()</td><td style="text-align:center;">Int32</td></tr></tbody></table><p id="2.3"></p><h3 id="_2-3-è½¬æ¢ä¸ºå±æ€§é”®" tabindex="-1">2.3 è½¬æ¢ä¸ºå±æ€§é”® <a class="header-anchor" href="#_2-3-è½¬æ¢ä¸ºå±æ€§é”®" aria-label="Permalink to &quot;2.3 è½¬æ¢ä¸ºå±æ€§é”®&quot;">â€‹</a></h3><p><code>ToPropertyKey()</code> è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–symbolï¼Œä¸‹é¢æ“ä½œä½¿ç”¨äº†è¿™ä¸ªå†…éƒ¨æ–¹æ³•ï¼š</p><ul><li>ä¸­æ‹¬å·æ“ä½œç¬¦ <code>[]</code></li><li>å¯¹è±¡å­—é¢é‡ä¸­çš„è®¡ç®—å±æ€§</li><li><code>in</code> æ“ä½œç¬¦çš„å·¦æ‰‹ï¼ˆä¾‹å¦‚ï¼š <code>&#39;prop&#39; in obj</code> ä¸­çš„ <code>prop</code>ï¼‰</li><li><code>Object.defineProperty(_, P, _)</code> ä¸­çš„ <code>P</code> å±æ€§éƒ¨åˆ†</li><li><code>Object.fromEntries()</code></li><li><code>Object.getOwnPropertyDescriptor()</code></li><li><code>Object.prototype.hasOwnProperty()</code></li><li><code>Object.prototype.propertyIsEnumerable()</code></li><li><code>Reflect</code> çš„å‡ ä¸ªæ–¹æ³•</li></ul><p id="2.4"></p><h3 id="_2-4-è½¬æ¢ä¸ºæ•°ç»„ç´¢å¼•" tabindex="-1">2.4 è½¬æ¢ä¸ºæ•°ç»„ç´¢å¼• <a class="header-anchor" href="#_2-4-è½¬æ¢ä¸ºæ•°ç»„ç´¢å¼•" aria-label="Permalink to &quot;2.4 è½¬æ¢ä¸ºæ•°ç»„ç´¢å¼•&quot;">â€‹</a></h3><ul><li><code>ToLength()</code> ä¸»è¦ç”¨äºå­—ç¬¦ä¸²ç´¢å¼• <ul><li><code>ToIndex()</code> çš„è¾…åŠ©å‡½æ•°</li><li>ç»“æœåŒºé—´ï¼š<code>0 &lt;= l &lt;= 2^53-1</code></li></ul></li><li><code>ToIndex()</code> ç”¨äºç±»å‹æ•°ç»„ï¼ˆ<code>Typed Array</code>ï¼‰ç´¢å¼• <ul><li>å’Œ <code>ToLength()</code> ä¸»è¦å·®åˆ«æ˜¯ï¼šå¦‚æœå‚æ•°è¶…å‡ºèŒƒå›´æŠ›å‡ºå¼‚å¸¸</li><li>ç»“æœåŒºé—´ï¼š<code>0 &lt;= i &lt;= 2^53-1</code></li></ul></li><li><code>ToUint32()</code> ç”¨äºæ•°ç»„ç´¢å¼• <ul><li>ç»“æœåŒºé—´ï¼š<code>0 &lt;= i &lt; 2^32-1</code></li></ul></li></ul><p id="2.5"></p><h3 id="_2-5-è½¬æ¢ä¸ºç±»å‹æ•°ç»„å…ƒç´ " tabindex="-1">2.5 è½¬æ¢ä¸ºç±»å‹æ•°ç»„å…ƒç´  <a class="header-anchor" href="#_2-5-è½¬æ¢ä¸ºç±»å‹æ•°ç»„å…ƒç´ " aria-label="Permalink to &quot;2.5 è½¬æ¢ä¸ºç±»å‹æ•°ç»„å…ƒç´ &quot;">â€‹</a></h3><p>å½“æˆ‘ä»¬è®¾ç½®ä¸€ä¸ªç±»å‹æ•°ç»„å…ƒç´ çš„å€¼æ˜¯ï¼Œä¼šä½¿ç”¨ä¸‹é¢ä¸­æŸä¸€ä¸ªè½¬æ¢ï¼š</p><ul><li><code>ToInt8()</code></li><li><code>ToUint8()</code></li><li><code>ToUint8Clamp()</code></li><li><code>ToInt16()</code></li><li><code>ToUint16()</code></li><li><code>ToInt32()</code></li><li><code>ToUint32()</code></li><li><code>ToBigInt64()</code></li><li><code>ToBigUint64()</code></li></ul><p id="3"></p><h2 id="_3ï¸âƒ£-â­ä¸­åœºä¼‘æ¯-ä»¥jså½¢å¼è¡¨ç¤ºè§„èŒƒä¸­çš„ç®—æ³•" tabindex="-1">3ï¸âƒ£ â­ä¸­åœºä¼‘æ¯ï¼šä»¥JSå½¢å¼è¡¨ç¤ºè§„èŒƒä¸­çš„ç®—æ³• <a class="header-anchor" href="#_3ï¸âƒ£-â­ä¸­åœºä¼‘æ¯-ä»¥jså½¢å¼è¡¨ç¤ºè§„èŒƒä¸­çš„ç®—æ³•" aria-label="Permalink to &quot;3ï¸âƒ£ â­ä¸­åœºä¼‘æ¯ï¼šä»¥JSå½¢å¼è¡¨ç¤ºè§„èŒƒä¸­çš„ç®—æ³•&quot;">â€‹</a></h2><p>æœ¬ç« å‰©ä¸‹éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä¼šç¢°åˆ°å‡ ä¸ªè§„èŒƒç®—æ³•ï¼Œä½†æ˜¯æ˜¯ä»¥JSçš„æ–¹å¼å®ç°çš„ã€‚<strong>ä¸‹é¢ä»‹ç»å¦‚ä½•å°†è§„èŒƒè½¬æ¢ä¸ºJSçš„å†™æ³•</strong>ï¼š</p><p>ğŸš€ğŸš€ï¼š</p><ul><li>è§„èŒƒï¼š <code>If Type(value) is String</code><ul><li>JS: <code>if (TypeOf(value) === &#39;string&#39;)</code></li></ul></li><li>è§„èŒƒï¼š<code>If IsCallable(method) is true</code><ul><li>JS: <code>if (IsCallable(method))</code></li></ul></li><li>è§„èŒƒï¼š<code>Let numValue be ToNumber(value)</code><ul><li>JSï¼š<code>let numValue = Number(value)</code></li></ul></li><li>è§„èŒƒï¼š<code>Let isArray be IsArray(O)</code><ul><li>JSï¼š<code>let isArray = Array.isArray(O)</code></li></ul></li><li>è§„èŒƒï¼š<code>If O has [[NumberData]] internal slot</code><ul><li>JSï¼š<code>if (&#39;__NumberData__&#39; in O)</code></li></ul></li><li>è§„èŒƒï¼š<code>Let tag be Get(O, @@toStringTag)</code><ul><li>JSï¼š<code>let tag = O[Symbol.toStringTag]</code></li></ul></li><li>è§„èŒƒï¼š<code>Return the string-concatenation of &quot;[object&quot;,tag,and &quot;]&quot;</code><ul><li>JSï¼š<code>return &#39;[object &#39; + tag + &#39;]&#39;</code></li></ul></li></ul><p><code>let</code>ï¼ˆè€Œä¸æ˜¯ <code>const</code>ï¼‰ ç”¨äºåŒ¹é…è¯­è¨€è§„èŒƒã€‚</p><p>æœ‰äº›ç»†èŠ‚è¢«å¿½ç•¥äº†ï¼Œæ¯”å¦‚ <a href="https://tc39.es/ecma262/#sec-returnifabrupt-shorthands" target="_blank" rel="noreferrer">ReturnIfAbrupt ç¼©å†™ç¬¦ <code>ï¼Ÿ</code> &amp; <code>ï¼</code></a></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// typeof æ”¹è¿›ç‰ˆæœ¬</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">TypecOf</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">value</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">value</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">switch</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">case</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">function</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">object</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">case</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">object</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">null</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">object</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">IsCallable</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">x</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">function</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p id="4"></p><h2 id="_4ï¸âƒ£-â­å¼ºè½¬ç®—æ³•jsç‰ˆ" tabindex="-1">4ï¸âƒ£ â­å¼ºè½¬ç®—æ³•JSç‰ˆ <a class="header-anchor" href="#_4ï¸âƒ£-â­å¼ºè½¬ç®—æ³•jsç‰ˆ" aria-label="Permalink to &quot;4ï¸âƒ£ â­å¼ºè½¬ç®—æ³•JSç‰ˆ&quot;">â€‹</a></h2><p id="4.1"></p><h3 id="_4-1-toprimitive" tabindex="-1">4.1 ToPrimitive() <a class="header-anchor" href="#_4-1-toprimitive" aria-label="Permalink to &quot;4.1 ToPrimitive()&quot;">â€‹</a></h3><p><a href="https://tc39.es/ecma262/#sec-toprimitive" target="_blank" rel="noreferrer">ToPrimitive()</a> æ“ä½œæ˜¯å…¶å®ƒå¼ºè½¬ç®—æ³•çš„ä¸­é—´æ­¥éª¤ğŸ˜ã€‚<em>å®ƒå°†ä»»æ„å€¼è½¬æ¢ä¸ºåŸå§‹ç±»å‹å€¼ã€‚</em></p><p><code>ToPrimitive()</code> åœ¨è§„èŒƒä¸­ç»å¸¸è¢«ä½¿ç”¨ï¼Œå› ä¸ºå¤§å¤šæ•°æ“ä½œç¬¦åªèƒ½å’ŒåŸå§‹ç±»å‹çš„å€¼ä¸€èµ·ä½¿ç”¨ğŸ¤©ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨ <code>+</code> æ“ä½œç¬¦è®©æ•°å­—ç›¸åŠ å’Œå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸èƒ½ç”¨å®ƒå°†2ä¸ªæ•°ç»„è¿›è¡Œæ‹¼æ¥ã€‚</p><p>ä¸‹é¢æ˜¯JSç‰ˆæœ¬çš„ <code>ToPrimitive()</code>:</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">input</span><span style="color:#676E95;font-style:italic;"> any è¾“å…¥å€¼</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * </span><span style="color:#89DDFF;font-style:italic;">@</span><span style="color:#C792EA;font-style:italic;">param</span><span style="color:#676E95;font-style:italic;"> </span><span style="color:#A6ACCD;font-style:italic;">hint</span><span style="color:#676E95;font-style:italic;"> &#39;number&#39; | &#39;string&#39; | &#39;default&#39; æ›´å€¾å‘äºè¿”å›å“ªç§ç±»å‹ç»“æœï¼Œdefault è¡¨ç¤ºä¸åœ¨ä¹</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ToPrimitive</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#A6ACCD;font-style:italic;">input</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#A6ACCD;font-style:italic;">hint</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">default</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">default</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">input</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">object</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// å¦‚æœè¾“å…¥æ˜¯ä¸€ä¸ªå¯¹è±¡</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// å…ˆæŸ¥çœ‹å¯¹è±¡æ˜¯æ˜¯å¦å®šä¹‰äº† Symbol.toPrimitive æ–¹æ³•</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// ToPrimitive - A method that converts an object to a corresponding primitive value.</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">exoticToPrim</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">input</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">Symbol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">toPrimitive</span><span style="color:#F07178;">] </span><span style="color:#676E95;font-style:italic;">// A</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">exoticToPrim</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">exoticToPrim</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">input</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">hint</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">object</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// å¦‚æœç»“æœä¸æ˜¯å¯¹è±¡ï¼Œè¯´æ˜å·²ç»è½¬æ¢ä¸ºäº†åŸå§‹ç±»å‹å€¼</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">TypeError</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// å¦‚æœæ²¡æœ‰å®šä¹‰ Symbol.toPrimitive æ–¹æ³•</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">hint</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">default</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// ğŸ’¡å¦‚æœæ²¡æœ‰æŒ‡å®šæƒ³è¦è½¬æ¢çš„ç±»å‹ åˆ™ä¼˜å…ˆè½¬æ¢ä¸ºæ•°å€¼ç±»å‹</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">hint</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">OrdinaryToPrimitive</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">input</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">hint</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// è°ƒç”¨å¦ä¸€ä¸ªæ–¹æ³•</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// inputå·²ç»æ˜¯åŸå§‹ç±»å‹äº†</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">input</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>ğŸ’¡ <code>ToPrimitive()</code> å…è®¸å¯¹è±¡é€šè¿‡ <code>Symbol.toPrimitive</code> æ–¹æ³•ï¼ˆAè¡Œï¼‰è¦†å†™è½¬æ¢ä¸ºåŸå§‹ç±»å‹å€¼çš„ç»“æœã€‚å¦‚æœå¯¹è±¡ä¸Šæ²¡æœ‰å®šä¹‰è¿™ä¸ªæ–¹æ³•ï¼Œåˆ™ç»§ç»­é€šè¿‡ <code>OrdinaryToPrimitive()</code> å¤„ç†ï¼š</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">OrdinaryToPrimitive</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">O</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">object</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">hint</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">methodNames</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// è¦è°ƒç”¨çš„æ–¹æ³•</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">hint</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// å¦‚æœåå‘äºè½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹ è°ƒç”¨æ–¹æ³•é¡ºåºå¦‚ä¸‹ï¼Œ</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// å…ˆ &#39;toString&#39;ï¼Œå¦‚æœè¿”å›ç»“æœä¸æ­£ç¡®ï¼Œå†è°ƒç”¨ &#39;valueOf&#39;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">methodNames</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">toString</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">valueOf</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">]</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">methodNames</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">valueOf</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">toString</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">]</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">of</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">methodNames</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">method</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">O</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">name</span><span style="color:#F07178;">] </span><span style="color:#676E95;font-style:italic;">// è°ƒç”¨å¯¹è±¡ä¸Šå¯¹è±¡çš„ toString | valueOf æ–¹æ³•</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">IsCallable</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">method</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// å¦‚æœæ˜¯ä¸€ä¸ªæ–¹æ³•</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">method</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">O</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">object</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// å¦‚æœè¿”å›çš„ç»“æœä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™è¯´æ˜å·²ç»è¿”å›äº†åŸå§‹ç±»å‹çš„å€¼äº†</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">TypeError</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h4 id="â­4-1-1-è°ƒç”¨è€…çš„-toprimitive-ä½¿ç”¨äº†ä»€ä¹ˆhints" tabindex="-1">â­4.1.1 è°ƒç”¨è€…çš„ ToPrimitive() ä½¿ç”¨äº†ä»€ä¹ˆhintsï¼Ÿ <a class="header-anchor" href="#â­4-1-1-è°ƒç”¨è€…çš„-toprimitive-ä½¿ç”¨äº†ä»€ä¹ˆhints" aria-label="Permalink to &quot;â­4.1.1 è°ƒç”¨è€…çš„ ToPrimitive() ä½¿ç”¨äº†ä»€ä¹ˆhintsï¼Ÿ&quot;">â€‹</a></h4><p>ğŸ‘©ğŸ»â€ğŸ« <code>ToPrimitive</code> çš„å‚æ•° <code>hint</code> æœ‰3ç§å€¼ï¼š</p><ol><li><code>number</code> è¡¨ç¤ºï¼šå¦‚æœå¯èƒ½çš„è¯ï¼Œ<code>input</code> åº”å½“è½¬æ¢ä¸ºæ•°å€¼ç±»å‹çš„å€¼</li><li><code>string</code> è¡¨ç¤ºï¼šå¦‚æœå¯èƒ½çš„è¯ï¼Œ<code>input</code> åº”å½“è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹çš„å€¼</li><li><code>default</code> è¡¨ç¤ºï¼šå¯¹è½¬æ¢ä¸ºæ•°å­—è¿˜æ˜¯å­—ç¬¦ä¸²æ— æ‰€è°“</li></ol><p>ğŸš€ğŸš€ ä¸‹é¢ç¤ºä¾‹å±•ç¤ºå„ç§æ“ä½œæ˜¯å¦‚ä½•ä½¿ç”¨ <code>ToPrimitive()</code> çš„ï¼š</p><ol><li><code>hint === &#39;number&#39;</code>ï¼Œä¸‹é¢æ“ä½œæ›´åå‘äºè½¬æ¢ä¸ºæ•°å€¼ç±»å‹ï¼š <ul><li><code>ToNumeric()</code></li><li><code>ToNumber()</code></li><li><code>ToBigInit()</code> &amp; <code>BigInt()</code></li><li>æŠ½è±¡å…³ç³»æ¯”è¾ƒ ï¼ˆ<code>&lt;</code>ï¼‰</li></ul></li><li><code>hint === &#39;string&#39;</code>ï¼Œä¸‹é¢æ“ä½œæ›´åå‘äºè½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼š <ul><li><code>ToString()</code></li><li><code>ToPropertyKey()</code></li></ul></li><li><code>hint === &#39;default&#39;</code>ï¼Œä¸‹é¢æ“ä½œæ˜¯<em>ä¸­æ€§çš„</em>ï¼Œè¿”å›åŸå§‹å€¼çš„ç±»å‹: <ul><li>æŠ½è±¡ç›¸ç­‰æ€§æ¯”è¾ƒï¼ˆ<code>==</code>ï¼‰</li><li>åŠ æ“ä½œç¬¦ï¼ˆ<code>+</code>ï¼‰</li><li><code>new Date(value)</code> (<code>value</code> å¯ä»¥æ˜¯æ•°å­—ä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²)</li></ul></li></ol><p>æ­£å¦‚æˆ‘ä»¬åœ¨ <code>ToPrimitive()</code> ä¸­æ‰€è§ï¼Œ<code>default</code> é»˜è®¤è¡Œä¸ºåå‘äº <code>number</code>ã€‚åªæœ‰ <code>Symbol</code> å’Œ <code>Date</code> çš„å®ä¾‹è¦†ç›–äº†è¿™ç§è¡Œä¸ºğŸ¤”ï¼ˆä¹‹åä¼šå±•ç¤ºï¼‰</p><h4 id="_4-1-2-å°†å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹ç±»å‹è°ƒç”¨å“ªä¸€ä¸ªæ–¹æ³•" tabindex="-1">4.1.2 å°†å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹ç±»å‹è°ƒç”¨å“ªä¸€ä¸ªæ–¹æ³•ï¼Ÿ <a class="header-anchor" href="#_4-1-2-å°†å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹ç±»å‹è°ƒç”¨å“ªä¸€ä¸ªæ–¹æ³•" aria-label="Permalink to &quot;4.1.2 å°†å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹ç±»å‹è°ƒç”¨å“ªä¸€ä¸ªæ–¹æ³•ï¼Ÿ&quot;">â€‹</a></h4><p>å¦‚æœè½¬æ¢ä¸ºåŸå§‹ç±»å‹æ²¡æœ‰è¢« <code>Symbol.toPrimitive</code> è¦†å†™ï¼Œ<code>OrdinaryToPrimitive()</code> ä¼šè°ƒç”¨ä¸‹é¢æ–¹æ³•ä¸­çš„ä¸€ç§ï¼Œæˆ–è€…2ç§éƒ½è°ƒç”¨ï¼š</p><ol><li>å¦‚æœ <code>hint</code> ä¸ºå­—ç¬¦ä¸²ï¼Œåˆ™è°ƒç”¨ <code>toString</code></li><li>å¦‚æœ <code>hint</code> ä¸ºæ•°å€¼ï¼Œåˆ™è°ƒç”¨ <code>valueOf</code></li></ol><p>ğŸŒ°ä¸‹é¢ä»£ç æ¼”ç¤ºäº†è¿™ä¸€å·¥ä½œè¿‡ç¨‹ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> obj </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">toString</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">valueOf</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// String() åå‘äºè½¬æ¢ä¸ºå­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#82AAFF;">String</span><span style="color:#A6ACCD;">(obj) </span><span style="color:#676E95;font-style:italic;">// &#39;a&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Number() åå‘äºè½¬æ¢ä¸ºæ•°å­—</span></span>
<span class="line"><span style="color:#82AAFF;">Number</span><span style="color:#A6ACCD;">(obj) </span><span style="color:#676E95;font-style:italic;">// 1</span></span></code></pre></div><p>æ–¹æ³• <code>Symbol.toPrimitive</code> è¦†å†™äº†æ­£å¸¸è½¬æ¢åŸå§‹ç±»å‹ã€‚è¿™ç§æƒ…å†µåªåœ¨æ ‡å‡†åº“ä¸­ä½¿ç”¨äº†2æ¬¡ï¼šï¼ˆè¯‘è€…æ³¨ï¼šå¯ä½¿ç”¨ <code>Object.getOwnPropertyDescriptors(Symbol.prototype)</code> è¿›è¡ŒæŸ¥çœ‹ï¼‰</p><ol><li><code>Symbol.prototype[Symbol.toPrimitive](hint)</code><ul><li>å¦‚æœæ¥æ”¶è€…æ˜¯ä¸€ä¸ªSymbolå®ä¾‹ï¼Œè¿™ä¸ªæ–¹æ³•æ€»æ˜¯è¿”å›åŒ…è£…çš„symbol</li><li>æ ¹æœ¬åŸå› æ˜¯ï¼Œ<code>Symbol</code> å®ä¾‹æœ‰ä¸€ä¸ª <code>.toString()</code> æ–¹æ³•è¿”å›å­—ç¬¦ä¸²ã€‚ä½†å³ä½¿å…¶ <code>hint</code> ä¸º <code>string</code>, <code>.toString()</code> ä¹Ÿä¸åº”è¯¥è¢«è°ƒç”¨ï¼Œå› æ­¤æˆ‘ä»¬ä¸ä¼šä¸å°å¿ƒå°†Symbolå®ä¾‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼ˆ<em>Symbolå®Œå…¨æ˜¯ä¸€ç§ä¸èƒ½ç±»å‹çš„å±æ€§é”®</em>ï¼‰</li></ul></li><li><code>Date.prototype[Symbol.toPrimitve](hint)</code><ul><li>ä¸‹é¢æœ‰æ›´è¯¦ç»†çš„è§£é‡Š</li></ul></li></ol><h4 id="_4-1-3-date-prototype-symbol-toprimitive" tabindex="-1">4.1.3 Date.prototype[Symbol.toPrimitive]() <a class="header-anchor" href="#_4-1-3-date-prototype-symbol-toprimitive" aria-label="Permalink to &quot;4.1.3 Date.prototype\\[Symbol.toPrimitive\\]()&quot;">â€‹</a></h4><p>ä¸‹é¢æ˜¯ <code>Dates</code> å¦‚ä½•å¤„ç†è½¬æ¢ä¸ºåŸå§‹ç±»å‹å€¼çš„ï¼š</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">Date</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype[Symbol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">toPrimitive] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">hint</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">default</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">O</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">O</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">object</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">TypeError</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">tryFirst</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// å¯ä»¥çœ‹å‡ºè¿™é‡Œå¦‚æœä¸º \`default\` ä¹Ÿæ›´åå‘äºè¿”å› \`string\` </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">hint</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">hint</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">default</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">tryFirst</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">hint</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">tryFirst</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">TypeError</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">OrdinaryToPrimitive</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">O</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">tryFirst</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>ğŸ“š è¿™é‡Œå’Œé»˜è®¤ç®—æ³•å”¯ä¸€çš„åŒºåˆ«æ˜¯ <code>default</code> å˜ä¸ºäº† <code>string</code> (è€Œä¸æ˜¯ <code>number</code>)ã€‚è¿™å¯ä»¥é€šè¿‡é‚£äº›å°† <code>hint</code> è®¾ç½®ä¸º <code>default</code> çš„æ“ä½œï¼ˆè¯‘è€…æ³¨ï¼šå³ä¸Šé¢æåˆ°çš„ä¸­æ€§æ“ä½œï¼‰è¿›è¡Œè§‚æµ‹ï¼š</p><ul><li><p>å¦‚æœå…¶å®ƒæ“ä½œæ•°ä¸æ˜¯ <code>undefined | null | boolean </code>æ—¶ï¼Œ <a href="https://exploringjs.com/deep-js/ch_type-coercion.html#abstract-equality-comparison" target="_blank" rel="noreferrer">== æ“ä½œç¬¦</a> ä¼šä½¿ç”¨ <code>default hint</code> å°†å¯¹è±¡å¼ºåˆ¶ä¸ºåŸå§‹ç±»å‹ã€‚ä¸‹ä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°dateå¼ºè½¬çš„ç»“æœæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> d </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Date</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2222-03-27</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// å¯ä»¥çœ‹å‡º Date å¯¹äºhintä¸º defaultæ—¶ï¼Œé»˜è®¤åå‘äºè½¬æ¢ä¸ºå­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equal</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  d </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Wed Mar 27 2222 08:00:00 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span></code></pre></div></li><li><p>ğŸš€ğŸš€ <a href="https://exploringjs.com/deep-js/ch_type-coercion.html#addition-operator" target="_blank" rel="noreferrer">+ æ“ä½œç¬¦</a> ä¼šä½¿ç”¨ <code>default hint</code> å°†2ä¸ªæ“ä½œæ•°ï¼ˆ<code>operands</code>ï¼‰ å¼ºè½¬ä¸ºåŸå§‹ç±»å‹ã€‚å¦‚æœå…¶ä¸­ä¸€ä¸ªç»“æœä¸ºå­—ç¬¦ä¸²ï¼Œåˆ™æ‰§è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ï¼ˆå¦åˆ™åˆ™æ‰§è¡Œæ•°å­—ç›¸åŠ ï¼‰ã€‚ä¸‹ä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°dateå¼ºè½¬çš„ç»“æœæ˜¯å­—ç¬¦ä¸²ï¼Œå› ä¸ºæ“ä½œç¬¦è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> d </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Date</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2222-03-27</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equal</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">123</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> dï¼Œ</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123Wed Mar 27 2222 08:00:00 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span></code></pre></div></li></ul><p id="4.2"></p><h3 id="_4-2-tostring-å’Œç›¸å…³æ“ä½œ" tabindex="-1">4.2 ToString() å’Œç›¸å…³æ“ä½œ <a class="header-anchor" href="#_4-2-tostring-å’Œç›¸å…³æ“ä½œ" aria-label="Permalink to &quot;4.2 ToString() å’Œç›¸å…³æ“ä½œ&quot;">â€‹</a></h3><p>ä¸‹é¢æ˜¯JSç‰ˆæœ¬ <code>ToString()</code> æ“ä½œï¼š</p><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ToString</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">argument</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">any</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">argument</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">undefined</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">argument</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">null</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">argument</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">true</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">argument</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">false</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">argument</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Number</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">argument</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">argument</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">argument</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">argument</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">symbol</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">TypeError</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">argument</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bigint</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">BigInt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">argument</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// argument æ˜¯ä¸€ä¸ªå¯¹è±¡</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// è°ƒç”¨ä¹‹å‰å®šä¹‰çš„ ToPrimitive, hint ä¸º &#39;string&#39;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">primValue</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ToPrimitive</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">argument</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// A</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ToString</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">primValue</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>æ³¨æ„è¿™ä¸ªå‡½æ•°åœ¨è½¬æ¢åŸå§‹ç±»å‹ç»“æœä¸ºå­—ç¬¦ä¸²å‰ï¼Œä¼šä½¿ç”¨ <code>ToPrimitive()</code> ä½œä¸ºå¯¹å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹ç±»å‹çš„ä¸­é—´æ­¥éª¤ï¼ˆ<code>A</code> è¡Œï¼‰ã€‚</p><p><code>ToString()</code> ä»¥ä¸€ç§æœ‰è¶£çš„æ–¹å¼åç¦»äº† <code>String()</code> çš„å·¥ä½œæ–¹å¼ï¼šå¦‚æœ <code>argument</code> æ˜¯ä¸€ä¸ªsymbolï¼Œ<code>ToString()</code> æŠ›å‡ºä¸€ä¸ª <code>TypeError</code>, è€Œ <code>String()</code> åˆ™ä¸ä¼šã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿ<em>å› ä¸ºsymbolçš„é»˜è®¤è¡Œä¸ºæ˜¯å°†å®ƒä»¬è½¬æ¢ä¸ºå­—ç¬¦ä¸²ä¼šæŠ›å‡ºå¼‚å¸¸:</em></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> sym </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Symbol</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">sym</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> sym</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// âŒ TypeError: ä¸èƒ½å°†ä¸€ä¸ªSymbolå€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">\`\${</span><span style="color:#A6ACCD;">sym</span><span style="color:#89DDFF;">}\`</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// âŒ TypeError: ä¸èƒ½å°†ä¸€ä¸ªSymbolå€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²</span></span></code></pre></div><p>è¿™ç§é»˜è®¤è¡Œä¸ºåœ¨ <code>String()</code> å’Œ <code>Symbol.prototype.toString()</code> ä¸­éƒ½è¢«è¦†å†™ï¼ˆ2ç§æ“ä½œéƒ½åœ¨åé¢ä»‹ç»ï¼‰</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">String</span><span style="color:#A6ACCD;">(sym)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// âœ…</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// &#39;Symbol(sym)&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">sym</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// âœ…</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// &#39;Symbol(sym)&#39;</span></span></code></pre></div><h4 id="_4-2-1-string" tabindex="-1">4.2.1 String() <a class="header-anchor" href="#_4-2-1-string" aria-label="Permalink to &quot;4.2.1 String()&quot;">â€‹</a></h4><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">String</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">value</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">s</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">new.</span><span style="color:#A6ACCD;">target</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">symbol</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// è¿™ä¸ªå‡½æ•°æ˜¯å‡½æ•°è°ƒç”¨çš„ï¼Œå€¼æ˜¯ä¸€ä¸ªSymbol</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">SymbolDescriptiveString</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">s</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ToString</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">new.</span><span style="color:#A6ACCD;">target</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// è¿™ä¸ªå‡½æ•°æ˜¯å‡½æ•°è°ƒç”¨çš„</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// This function was new-called å³æ„é€ å‡½æ•°</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">StringCreate</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new.</span><span style="color:#A6ACCD;">target</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// ç®€åŒ–ç‰ˆæœ¬</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p><code>String()</code> çš„å·¥ä½œæ•ˆæœå·®å¼‚å–å†³äºæ˜¯å‡½æ•°è°ƒç”¨è¿˜æ˜¯é€šè¿‡ <code>new</code> è°ƒç”¨ï¼ˆå³æ„é€ å‡½æ•°è°ƒç”¨ï¼‰ã€‚å®ƒä½¿ç”¨ <a href="https://exploringjs.com/es6/ch_classes.html#sec_allocating-and-initializing-instances" target="_blank" rel="noreferrer">new.target</a> æ¥åŒºåˆ†è¿™2ç§å‡½æ•°ã€‚</p><p>ä¸‹é¢æ˜¯ <code>StringCreate()</code> å’Œ <code>SymbolDescriptiveString()</code> 2ä¸ªè¾…åŠ©å‡½æ•°ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> * åˆ›å»ºä¸€ä¸ªåŒ…è£…äº† value çš„å­—ç¬¦ä¸²ç¤ºä¾‹ï¼Œå¹¶æ‹¥æœ‰ç»™å®šçš„åŸå‹</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"> */</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">StringCreate</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">value</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">prototype</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">SymbolDescriptiveString</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">sym</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equal</span><span style="color:#F07178;">(</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">sym</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">symbol</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">desc</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sym</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">description</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">desc</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">desc</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;&#39;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equal</span><span style="color:#F07178;">(</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">desc</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Symbol(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">desc</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">)</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h4 id="_4-2-2-symbol-prototype-tostring" tabindex="-1">4.2.2 Symbol.prototype.toString() <a class="header-anchor" href="#_4-2-2-symbol-prototype-tostring" aria-label="Permalink to &quot;4.2.2 Symbol.prototype.toString()&quot;">â€‹</a></h4><p>é™¤äº† <code>String()</code>ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>.toString()</code> å°†ä¸€ä¸ªsymbolè½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚å®ƒçš„è§„èŒƒçœ‹èµ·æ¥å¦‚ä¸‹ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">Symbol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sym</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">thisSymbolValue</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">SymbolDescriptiveString</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">sym</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">thisSymbolValue</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">value</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">symbol</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">value</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">object</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">__SymbolData__</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">in</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">__SymbolData__</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// ç¡®ä¿ s ä¸º Symbolç±»å‹ </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equal</span><span style="color:#F07178;">(</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">s</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">symbol</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">s</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h4 id="_4-2-3-â­-object-prototype-tostring" tabindex="-1">4.2.3 â­ Object.prototype.toString <a class="header-anchor" href="#_4-2-3-â­-object-prototype-tostring" aria-label="Permalink to &quot;4.2.3 â­ Object.prototype.toString&quot;">â€‹</a></h4><p><code>.toString()</code> é»˜è®¤è§„èŒƒçœ‹èµ·æ¥å¦‚ä¸‹ï¼šğŸš€ğŸš€</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">this</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">undefined</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">[object Undefined]</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">this</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">null</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">[object Null]</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">O</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ToObject</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">isArray</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Array</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isArray</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">O</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">builtinTag</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// å†…ç½®æ ‡ç­¾</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">isArray</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">builtinTag</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Array</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">__ParameterMap__</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">in</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">O</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">   </span><span style="color:#676E95;font-style:italic;">// [[ParameterMap]]</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">builtinTag</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Arguments</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">__Call__</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">in</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">O</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">           </span><span style="color:#676E95;font-style:italic;">// [[Call]]</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">builtinTag</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Function</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">__ErrorData__</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">in</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">O</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">      </span><span style="color:#676E95;font-style:italic;">// [[ErrorData]]</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">builtinTag</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Error</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">__BooleanData__</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">in</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">O</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">    </span><span style="color:#676E95;font-style:italic;">// [[BooleanData]]</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">builtinTag</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Boolean</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">__NumberData__</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">in</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">O</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">     </span><span style="color:#676E95;font-style:italic;">// [[NumberData]]</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">builtinTag</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Number</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">__DateValue__</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">in</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">O</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">      </span><span style="color:#676E95;font-style:italic;">// [[DateValue]]</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">builtinTag</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Date</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">__RegExpMatcher__</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">in</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">O</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">  </span><span style="color:#676E95;font-style:italic;">// [[RegExpMatcher]]</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">builtinTag</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">RegExp</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// é»˜è®¤ Object</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">builtinTag</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Object</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// å…ˆæŸ¥çœ‹æ˜¯å¦å­˜åœ¨ Symbol.toStringTag å®šä¹‰</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">tag</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">O</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">Symbol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">toStringTag</span><span style="color:#F07178;">]</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">tag</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// ä¸å­˜åœ¨åˆ™ä½¿ç”¨å†…ç½®tag</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">tag</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">builtinTag</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">[object </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">tag</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">]</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>å¯å‚è€ƒï¼šï¼ˆè¯‘è€…æ³¨ï¼‰</p><ul><li><a href="https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-object.prototype.tostring" target="_blank" rel="noreferrer">Object.prototype.toString - tc39</a></li></ul><p>è¿™ä¸ªæ“ä½œç”¨äºå°†æ™®é€šå¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ—¶ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">String</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// &#39;[object Object]&#39;</span></span></code></pre></div><p>é»˜è®¤ï¼Œå®ƒä¹Ÿå¯ç”¨äºå°†ç±»å®ä¾‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MyClass</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#82AAFF;">String</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">MyClass</span><span style="color:#A6ACCD;">())</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// &#39;[object Object]&#39;</span></span></code></pre></div><p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½ä¸ºäº†é…ç½®MyClassçš„å­—ç¬¦ä¸²è¡¨è¾¾å½¢å¼ï¼Œè¦†å†™ <code>.toString()</code>æ–¹æ³•ï¼Œä½†æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨æ–¹æ‹¬å·æ”¹å˜å­—ç¬¦ä¸²ä¸­ <code>&quot; object &quot;</code> åé¢çš„å†…å®¹:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MyClass</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#FFCB6B;">MyClass</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype[Symbol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">toStringTag] </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Custom!</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">String</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">MyClass</span><span style="color:#A6ACCD;">())</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// &#39;[object Custom!]&#39;</span></span></code></pre></div><p>å¯¹æ¯”è¦†å†™ç‰ˆæœ¬çš„ <code>.toString()</code> å’Œ <code>Object.prototype</code> åŸå§‹ç‰ˆæœ¬å¾ˆæœ‰è¶£ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// Array.prototype.toString è¦†å†™äº† Object.prototype.toString çš„æ–¹æ³• </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æˆ–è€… Array.prototype.toString.call([&#39;a&#39;, &#39;b&#39;])</span></span>
<span class="line"><span style="color:#A6ACCD;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">b</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// &#39;a,b&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">toString</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#A6ACCD;">([</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">b</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">])</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// &#39;[object Array]&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;font-style:italic;">^</span><span style="color:#C3E88D;">abc</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// &#39;/^abc$/&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">toString</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;font-style:italic;">^</span><span style="color:#C3E88D;">abc</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// &#39;[object RegExp]&#39;</span></span></code></pre></div><p id="4.3"></p><h3 id="_4-3-topropertykey" tabindex="-1">4.3 ToPropertyKey() <a class="header-anchor" href="#_4-3-topropertykey" aria-label="Permalink to &quot;4.3 ToPropertyKey()&quot;">â€‹</a></h3><p><code>ToPropertyKey()</code> ç”¨äºæ‹¬å·æ“ä½œç¬¦ã€‚è¿™æ˜¯å®ƒå·¥ä½œçš„æ–¹å¼ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ToPropertyKey</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">argument</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ToPrimitive</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">argument</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// å†æ¬¡ä½¿ç”¨åˆ°äº† ToPrimitive </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">symbol</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">key</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// è°ƒç”¨ä¸Šé¢çš„ ToString() æ“ä½œ</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ToString</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>å†ä¸€æ¬¡ï¼Œåœ¨éœ€è¦åŸå§‹ç±»å‹å‰ï¼Œå°†å¯¹è±¡è½¬æ¢ä¸ºäº†åŸå§‹ç±»å‹</p><p id="4.4"></p><h3 id="_4-4-tonumeric-å’Œç›¸å…³æ“ä½œ" tabindex="-1">4.4 ToNumeric() å’Œç›¸å…³æ“ä½œ <a class="header-anchor" href="#_4-4-tonumeric-å’Œç›¸å…³æ“ä½œ" aria-label="Permalink to &quot;4.4 ToNumeric() å’Œç›¸å…³æ“ä½œ&quot;">â€‹</a></h3><p><code>ToNumeric()</code> è¢«ç”¨äºä¹˜æ³•æ“ä½œç¬¦ï¼ˆ<code>*</code>ï¼‰ã€‚å·¥ä½œæ–¹å¼å¦‚ä¸‹ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ToNumeric</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">value</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">primValue</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ToPrimitive</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// å†æ¬¡ä½¿ç”¨åˆ°äº† ToPrimitive </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">primValue</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bigint</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// å¯¹ BigInt å•ç‹¬å¤„ç†</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">primValue</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// è°ƒç”¨åé¢å®šä¹‰çš„ ToNumber æ“ä½œ</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ToNumber</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">primValue</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h4 id="_4-4-1-â­-tonumber" tabindex="-1">4.4.1 â­ ToNumber() <a class="header-anchor" href="#_4-4-1-â­-tonumber" aria-label="Permalink to &quot;4.4.1 â­ ToNumber()&quot;">â€‹</a></h4><p><code>ToNumber()</code> å·¥ä½œå¦‚ä¸‹ï¼š(ç›¸å½“äºè°ƒç”¨ <code>valueOf()</code>)</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ToNumber</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">argument</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">argument</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">NaN</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">argument</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">argument</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">argument</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">argument</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">argument</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">argument</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// å¦‚æœæ˜¯å­—ç¬¦ä¸² å°±å°è¯•è½¬æ¢ä¸ºæ•°å­—</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">parseTheString</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">argument</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">argument</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">symbol</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// å¦‚æœæ˜¯Symbolåˆ™ç›´æ¥æŠ›å‡ºé”™è¯¯</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">TypeError</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">argument</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bigint</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">TypeError</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// argumentæ˜¯ä¸€ä¸ªå¯¹è±¡</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// å†æ¬¡è°ƒç”¨ ToPrimitive å°†å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹ç±»å‹å€¼</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">primValue</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ToPrimitive</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">argument</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ToNumber</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">primValue</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// é€’å½’ä¸€ä¸‹</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>å¯ä»¥çœ‹å‡º <code>ToNumber()</code> å’Œ <code>ToString()</code> ç»“æ„ç›¸ä¼¼ã€‚</p><p id="5"></p><h2 id="_5ï¸âƒ£-å¼ºè½¬çš„æ“ä½œ" tabindex="-1">5ï¸âƒ£ å¼ºè½¬çš„æ“ä½œ <a class="header-anchor" href="#_5ï¸âƒ£-å¼ºè½¬çš„æ“ä½œ" aria-label="Permalink to &quot;5ï¸âƒ£ å¼ºè½¬çš„æ“ä½œ&quot;">â€‹</a></h2><p id="5.1"></p><h3 id="_5-1-â­-æ“ä½œ" tabindex="-1">5.1 â­ + æ“ä½œ <a class="header-anchor" href="#_5-1-â­-æ“ä½œ" aria-label="Permalink to &quot;5.1 â­ + æ“ä½œ&quot;">â€‹</a></h3><p>ä¸‹é¢å°±æ˜¯ <code>+</code> æ“ä½œç®—æ³•ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Addition</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">leftHandSide</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">rightHandSide</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// å…ˆç”¨ToPrimitiveè½¬æ¢ä¸ºåŸå§‹ç±»å‹</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">lprim</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ToPrimitive</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">leftHandSide</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">rprim</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ToPrimitive</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">rightHandSide</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// å¦‚æœå·¦æ“ä½œæ•°æˆ–å³æ“ä½œæ•°æœ‰ä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">lprim</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">rprim</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// A</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// å°†2ä¸ªæ“ä½œæ•°éƒ½è°ƒç”¨ToString() ç„¶åæ‹¼æ¥åœ¨ä¸€èµ·</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ToString</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">lprim</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ToString</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">rprim</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">lnum</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ToNumeric</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">lprim</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">rnum</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ToNumeric</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">rprim</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">lnum</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">rnum</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// å¦‚æœè½¬æ¢ä¸ºæ•°å€¼ç±»å‹åï¼Œç±»å‹è¿˜ä¸ç›¸åŒ åˆ™æŠ›å‡ºé”™è¯¯</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">TypeError</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">T</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Type</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">lnum</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">T</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">lnum</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">rnum</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// B</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>ç®—æ³•æ­¥éª¤ï¼š</p><ul><li>2ä¸ªæ“ä½œæ•°éƒ½è½¬æ¢ä¸ºåŸå§‹ç±»å‹</li><li>å¦‚æœå…¶ä¸­ä¸€ä¸ªç»“æœæ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™2ä¸ªæ“ä½œæ•°éƒ½è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶æ‹¼æ¥åœ¨ä¸€èµ·ï¼ˆè¡ŒAï¼‰</li><li>å¦åˆ™ï¼Œ2ä¸ªæ“ä½œæ•°è½¬æ¢ä¸ºæ•°å€¼ç±»å‹ç›¸åŠ ï¼ˆè¡ŒBï¼‰, <code>Type()</code> è¿”å› ECMAScriptè§„èŒƒä¸­ <code>lnum.add()</code> æ–¹æ³•éœ€è¦çš„ <a href="https://tc39.es/ecma262/#sec-numeric-types" target="_blank" rel="noreferrer">numeric ç±»å‹</a></li></ul><p>è¯‘è€…æ³¨ç¤ºä¾‹ğŸŒ°ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> obj </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">toString</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">valueOf</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> obj </span><span style="color:#676E95;font-style:italic;">// 2 æ­¤æ—¶ä¼šè°ƒç”¨obj valueOf</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">x</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> obj </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// &#39;x1&#39; </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ToPrimitive(obj) é»˜è®¤ hintä¸º &#39;number&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// å› æ­¤æ–¹æ³•è°ƒç”¨é¡ºåºä¸º å…ˆ valueOf</span></span></code></pre></div><p id="5.2"></p><h3 id="_5-2-â­-æŠ½è±¡ç›¸ç­‰æ€§æ¯”è¾ƒ" tabindex="-1">5.2 â­ æŠ½è±¡ç›¸ç­‰æ€§æ¯”è¾ƒï¼ˆ==ï¼‰ <a class="header-anchor" href="#_5-2-â­-æŠ½è±¡ç›¸ç­‰æ€§æ¯”è¾ƒ" aria-label="Permalink to &quot;5.2 â­ æŠ½è±¡ç›¸ç­‰æ€§æ¯”è¾ƒï¼ˆ==ï¼‰&quot;">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// æ¾ç›¸ç­‰æ€§æ¯”è¾ƒï¼ˆ==ï¼‰</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">abstractEqualityComparison</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">x</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">y</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 1. å¦‚æœç±»å‹ç›¸åŒ ç›´æ¥ä¸¥æ ¼æ¯”è¾ƒ</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰æ€§ ===</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">strictEqualityComparison</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 2. æ¯”è¾ƒ null å’Œ undefined</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// jsä¸­ null == undefined è¿”å› true</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 3. æ¯”è¾ƒæ•°å­—å’Œå­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—å†è¿›è¡Œæ¯”è¾ƒ</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">abstractEqualityComparison</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Number</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;">))</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—å†è¿›è¡Œæ¯”è¾ƒ</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">abstractEqualityComparison</span><span style="color:#F07178;">(</span><span style="color:#82AAFF;">Number</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 4. æ¯”è¾ƒ bigint å’Œ å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bigint</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">n</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">StringToBigInt</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">Number</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isNaN</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">n</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">abstractEqualityComparison</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">n</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bigint</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">abstractEqualityComparison</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">y</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 5. æ¯”è¾ƒå¸ƒå°”å€¼å’Œéå¸ƒå°”å€¼</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">boolean</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">abstractEqualityComparison</span><span style="color:#F07178;">(</span><span style="color:#82AAFF;">Number</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#F07178;">   </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">boolean</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">abstractEqualityComparison</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Number</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;">))</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 6. æ¯”è¾ƒå¯¹è±¡å’ŒåŸå§‹ç±»å‹</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// é™¤äº† undefined null &amp; boolean</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">    [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bigint</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">symbol</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">includes</span><span style="color:#F07178;">(</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;">))</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">object</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">  ) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// å°†yè½¬æ¢ä¸ºåŸå§‹ç±»å‹</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">abstractEqualityComparison</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ToPrimitive</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;">)) </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">object</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bigint</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">symbol</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">includes</span><span style="color:#F07178;">(</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;">))</span></span>
<span class="line"><span style="color:#F07178;">  ) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// å°†xè½¬æ¢ä¸ºåŸå§‹ç±»å‹</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">abstractEqualityComparison</span><span style="color:#F07178;">(</span><span style="color:#82AAFF;">ToPrimitive</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// 8. æ¯”è¾ƒbigint å’Œ æ•°å­—</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">    (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bigint</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">number</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">TypeOf</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">bigint</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  ) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">      [</span><span style="color:#89DDFF;">NaN,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+Infinity,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-Infinity</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">includes</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> [</span><span style="color:#89DDFF;">NaN,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+Infinity,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-Infinity</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">includes</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    ) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// JSä¸­ NaN è‡ªèº«ä¹Ÿä¸ç›¸ç­‰</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// å³NaN == NaN  è¿”å›false</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;">// ä¸€èˆ¬ç”¨ç”¨ Object.is(NaN, NaN) è¿”å›true è¿›è¡Œåˆ¤æ–­</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">isSameMathematicalValue</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">eles</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">false</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>ä¸Šé¢æ²¡æœ‰åˆ—ä¸¾ä»¥ä¸‹æ“ä½œç¬¦ï¼š</p><ul><li><a href="https://tc39.es/ecma262/#sec-strict-equality-comparison" target="_blank" rel="noreferrer">strictEqualityComparison()</a></li><li><a href="https://tc39.es/ecma262/#sec-stringtobigint" target="_blank" rel="noreferrer">StringToBigInt()</a></li><li><a href="https://tc39.es/ecma262/#mathematical-value" target="_blank" rel="noreferrer">isSameMathematicalValue()</a></li></ul><p>è¯‘è€…æ³¨ï¼šå¯ä»¥çœ‹å‡º <code>==</code> åˆ¤æ–­é€»è¾‘è¶…çº§çš„å¤šï¼Œä½†æ˜¯æ•´ä¸ªè¿‡ç¨‹ä¹Ÿå¾ˆæ¸…æ™°</p><p id="6"></p><h2 id="_6ï¸âƒ£-æœ¯è¯­è¡¨-å…³äºç±»å‹å¼ºè½¬çš„åè¯" tabindex="-1">6ï¸âƒ£ æœ¯è¯­è¡¨ï¼šå…³äºç±»å‹å¼ºè½¬çš„åè¯ <a class="header-anchor" href="#_6ï¸âƒ£-æœ¯è¯­è¡¨-å…³äºç±»å‹å¼ºè½¬çš„åè¯" aria-label="Permalink to &quot;6ï¸âƒ£ æœ¯è¯­è¡¨ï¼šå…³äºç±»å‹å¼ºè½¬çš„åè¯&quot;">â€‹</a></h2><p>æˆ‘ä»¬å·²ç»æ·±å…¥çœ‹è¿‡äº†JSç±»å‹å¼ºè½¬ï¼Œä¸‹é¢ç®€çŸ­çš„æ€»ç»“ä¸€ä¸‹å…³äºç±»å‹å¼ºè½¬ç›¸å…³çš„æœ¯è¯­åè¯ï¼š</p><ul><li>åœ¨ <em>ç±»å‹è½¬æ¢ï¼ˆ<code>type conversion</code>ï¼‰</em>ï¼Œæˆ‘ä»¬æƒ³è¦è¾“å‡ºå€¼ä¸ºæŒ‡å®šç±»å‹ã€‚å¦‚æœè¾“å…¥å€¼å·²ç»æ˜¯è¯¥ç±»å‹ï¼Œåˆ™ç›´æ¥è¿”å›å³å¯ï¼Œå¦åˆ™ï¼Œè¾“å…¥å€¼å°†è½¬æ¢ä¸ºæƒ³è¦çš„ç±»å‹</li><li><em>æ˜¾ç¤ºç±»å‹è½¬æ¢ï¼ˆ<code>Explicit type conversion</code>ï¼‰</em> è¡¨ç¤ºç¨‹åºå‘˜ä½¿ç”¨æ“ä½œï¼ˆå‡½æ•°ï¼Œæ“ä½œç¬¦ç­‰ï¼‰æ¥è§¦å‘ç±»å‹è½¬æ¢ã€‚æ˜¾å¼è½¬æ¢å¯ä»¥æ˜¯ï¼š <ul><li><em>å·²æ ¡éªŒï¼ˆ<code>Checked</code>ï¼‰</em>: å¦‚æœä¸€ä¸ªå€¼ä¸èƒ½è¢«è½¬æ¢ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ï¼ˆæ¯”å¦‚ <code>1 + Symbol()</code> ç›´æ¥æŠ›å‡ºé”™è¯¯ï¼‰</li><li><em>æœªæ ¡éªŒï¼ˆ<code>Unchecked</code>ï¼‰</em>: å¦‚æœä¸€ä¸ªå€¼ä¸èƒ½è¢«è½¬æ¢ï¼Œè¿”å›ä¸€ä¸ªé”™è¯¯çš„å€¼ï¼ˆæ¯”å¦‚ <code>1 / 0</code> è¿”å›é”™è¯¯å€¼ <code>Infinity</code>ï¼‰</li></ul></li><li><em>ç±»å‹å¼ºè½¬ï¼ˆ<code>Type coercion</code>ï¼‰</em> æ˜¯éšå¼ç±»å‹è½¬æ¢ï¼šä¸€ä¸ªæ“ä½œè‡ªåŠ¨å°†å…¶å‚æ•°è½¬æ¢ä¸ºæ‰€éœ€è¦çš„ç±»å‹ã€‚å¯ä»¥æ˜¯å·²æ ¡éªŒçš„ï¼Œä¹Ÿå¯ä»¥æ˜¯æœªæ ¡éªŒçš„ï¼Œä¹Ÿå¯ä»¥æ˜¯2è€…ä¹‹é—´çš„ã€‚</li></ul><p>åŸæ–‡é“¾æ¥ï¼š</p><ul><li><a href="https://exploringjs.com/deep-js/ch_type-coercion.html#converting-to-typed-array-elements" target="_blank" rel="noreferrer">Type coercion in JavaScript</a></li></ul><p>è¯‘è€…æ³¨ï¼šæœ¬ç« å¯¹ä»¥ä¸‹çŸ¥è¯†ç‚¹çš„ç†è§£æä¾›äº†æå…¶æ·±å…¥çš„ç†è§£ï¼š</p><ol><li><code>+</code> æ“ä½œçš„æ€ªå¼‚è¡Œä¸º</li><li><code>==</code> æ“ä½œç¬¦çš„æ€ªå¼‚è¡Œä¸º</li><li>å¯¹è±¡è½¬æ¢ä¸ºåŸºç¡€ç±»å‹æ—¶ï¼Œåˆ°åº•æ˜¯è°ƒç”¨ <code>Symbol[toPrimitive] </code> è¿˜æ˜¯ <code>toString()</code> è¿˜æ˜¯ <code>valueOf()</code> çš„ç»†èŠ‚é—®é¢˜</li><li><code>Object.prototype.toString</code> çš„å†…éƒ¨é€»è¾‘æ˜¯ä»€ä¹ˆï¼Œ<code>Symbol.toStringTag</code> å’Œ è‡ªå®šä¹‰ <code>toString()</code> æ–¹æ³•çš„ä½œç”¨</li><li>å¦‚ä½•ä»¥JSå½¢å¼ç†è§£ECMAScriptè§„èŒƒï¼Œå¹¶å°†å…¶è¿›è¡Œè½¬æ¢</li><li><code>ToPrimitive()</code> ä¸­çš„ <code>hint</code> å«ä¹‰ï¼Œå“ªäº›æ“ä½œ <code>hint</code> æ˜¯ <code>number</code> ï¼Œå“ªäº›æ˜¯ <code>string</code>ï¼›å½“ä¸º <code>default</code> æ—¶ï¼Œ<code>Date</code> &amp; <code>Symbol</code> å’Œå…¶å®ƒç±»å‹ä¸åŒï¼Œå®ƒä»¬é»˜è®¤åå‘äºè½¬æ¢ä¸ºå­—ç¬¦ä¸²</li><li>è§„èŒƒç®—æ³• <ol><li><code>ToPrimitive(input: any, hint: &#39;number&#39; | &#39;string&#39; | &#39;default&#39; = &#39;default&#39;)</code></li><li><code>TypeOf(O: any)</code></li><li><code>IsCallable(x)</code></li><li><code>Date.prototype[Symbol.toPrimitive]</code> &amp; <code>Symbol.prototype[Symbol.toPrimitive]</code></li><li><code>ToString(argument: any)</code> &amp; <code>String(value: any)</code></li><li><code>Object.prototype.toString()</code></li><li><code>ToPropertyKey(argument)</code></li><li><code>ToNumeric(value)</code> &amp; <code>ToNumber(argument)</code> åŒºåˆ«ï¼šå‰ç½®ä¼šå¤„ç† <code>bigint</code> ç±»å‹</li><li><code>+</code> æ“ä½œç¬¦</li><li><code>==</code> æ“ä½œç¬¦</li></ol></li></ol><p>2022å¹´07æœˆ12æ—¥23:45:07</p>`,153),e=[o];function t(c,r,y,F,D,i){return a(),n("div",null,e)}const d=s(p,[["render",t]]);export{C as __pageData,d as default};
