import{_ as s,c as n,o as a,a as l}from"./app.93b72932.js";const C=JSON.parse('{"title":"JS\u5BF9\u8C61\u548C\u6570\u7EC4\u7684\u62F7\u8D1D","description":"","frontmatter":{"title":"JS\u5BF9\u8C61\u548C\u6570\u7EC4\u7684\u62F7\u8D1D"},"headers":[{"level":2,"title":"1\uFE0F\u20E3 \u6D45\u62F7\u8D1D vs. \u6DF1\u62F7\u8D1D","slug":"_1\uFE0F\u20E3-\u6D45\u62F7\u8D1D-vs-\u6DF1\u62F7\u8D1D"},{"level":2,"title":"2\uFE0F\u20E3 JS\u4E2D\u7684\u6D45\u62F7\u8D1D","slug":"_2\uFE0F\u20E3-js\u4E2D\u7684\u6D45\u62F7\u8D1D"},{"level":3,"title":"2.1 \u901A\u8FC7spreading\u64CD\u4F5C\u7B26\u62F7\u8D1D\u5BF9\u8C61\u548C\u6570\u7EC4","slug":"_2-1-\u901A\u8FC7spreading\u64CD\u4F5C\u7B26\u62F7\u8D1D\u5BF9\u8C61\u548C\u6570\u7EC4"},{"level":3,"title":"2.2 \u4F7F\u7528 Object.assign() \u8FDB\u884C\u6D45\u62F7\u8D1D","slug":"_2-2-\u4F7F\u7528-object-assign-\u8FDB\u884C\u6D45\u62F7\u8D1D"},{"level":3,"title":"2.3 \u2B50 \u4F7F\u7528Object.getOwnPropertyDescriptors()+Object.defineProperties()\u8FDB\u884C\u6D45\u62F7\u8D1D","slug":"_2-3-\u2B50-\u4F7F\u7528object-getownpropertydescriptors-object-defineproperties-\u8FDB\u884C\u6D45\u62F7\u8D1D"},{"level":2,"title":"3\uFE0F\u20E3 JS\u4E2D\u7684\u6DF1\u62F7\u8D1D","slug":"_3\uFE0F\u20E3-js\u4E2D\u7684\u6DF1\u62F7\u8D1D"},{"level":3,"title":"3.1 \u4F7F\u7528\u5D4C\u5957spreading\u624B\u52A8\u6DF1\u62F7\u8D1D","slug":"_3-1-\u4F7F\u7528\u5D4C\u5957spreading\u624B\u52A8\u6DF1\u62F7\u8D1D"},{"level":3,"title":"3.2 \u{1F914} Hack\u65B9\u5F0F\uFF1A\u4F7F\u7528JSON\u6DF1\u62F7\u8D1D","slug":"_3-2-\u{1F914}-hack\u65B9\u5F0F\uFF1A\u4F7F\u7528json\u6DF1\u62F7\u8D1D"},{"level":3,"title":"3.3 \u{1F680} \u5B9E\u73B0\u901A\u7528\u6DF1\u62F7\u8D1D","slug":"_3-3-\u{1F680}-\u5B9E\u73B0\u901A\u7528\u6DF1\u62F7\u8D1D"},{"level":2,"title":"4\uFE0F\u20E3 \u8FDB\u4E00\u6B65\u9605\u8BFB","slug":"_4\uFE0F\u20E3-\u8FDB\u4E00\u6B65\u9605\u8BFB"},{"level":2,"title":"5\uFE0F\u20E3 \u603B\u7ED3\uFF08\u8BD1\u8005\u6CE8\uFF09","slug":"_5\uFE0F\u20E3-\u603B\u7ED3\uFF08\u8BD1\u8005\u6CE8\uFF09"}],"relativePath":"3/Copying-objects-and-arrays.md","lastUpdated":1658973266000}'),p={name:"3/Copying-objects-and-arrays.md"},o=l(`<p>\u76EE\u5F55\uFF1A</p><nav class="table-of-contents"><ul><li><a href="#_1\uFE0F\u20E3-\u6D45\u62F7\u8D1D-vs-\u6DF1\u62F7\u8D1D">1\uFE0F\u20E3 \u6D45\u62F7\u8D1D vs. \u6DF1\u62F7\u8D1D</a></li><li><a href="#_2\uFE0F\u20E3-js\u4E2D\u7684\u6D45\u62F7\u8D1D">2\uFE0F\u20E3 JS\u4E2D\u7684\u6D45\u62F7\u8D1D</a><ul><li><a href="#_2-1-\u901A\u8FC7spreading\u64CD\u4F5C\u7B26\u62F7\u8D1D\u5BF9\u8C61\u548C\u6570\u7EC4">2.1 \u901A\u8FC7spreading\u64CD\u4F5C\u7B26\u62F7\u8D1D\u5BF9\u8C61\u548C\u6570\u7EC4</a><ul></ul></li><li><a href="#_2-2-\u4F7F\u7528-object-assign-\u8FDB\u884C\u6D45\u62F7\u8D1D">2.2 \u4F7F\u7528 Object.assign() \u8FDB\u884C\u6D45\u62F7\u8D1D</a></li><li><a href="#_2-3-\u2B50-\u4F7F\u7528object-getownpropertydescriptors-object-defineproperties-\u8FDB\u884C\u6D45\u62F7\u8D1D">2.3 \u2B50 \u4F7F\u7528Object.getOwnPropertyDescriptors()+Object.defineProperties()\u8FDB\u884C\u6D45\u62F7\u8D1D</a></li></ul></li><li><a href="#_3\uFE0F\u20E3-js\u4E2D\u7684\u6DF1\u62F7\u8D1D">3\uFE0F\u20E3 JS\u4E2D\u7684\u6DF1\u62F7\u8D1D</a><ul><li><a href="#_3-1-\u4F7F\u7528\u5D4C\u5957spreading\u624B\u52A8\u6DF1\u62F7\u8D1D">3.1 \u4F7F\u7528\u5D4C\u5957spreading\u624B\u52A8\u6DF1\u62F7\u8D1D</a></li><li><a href="#_3-2-\u{1F914}-hack\u65B9\u5F0F\uFF1A\u4F7F\u7528json\u6DF1\u62F7\u8D1D">3.2 \u{1F914} Hack\u65B9\u5F0F\uFF1A\u4F7F\u7528JSON\u6DF1\u62F7\u8D1D</a></li><li><a href="#_3-3-\u{1F680}-\u5B9E\u73B0\u901A\u7528\u6DF1\u62F7\u8D1D">3.3 \u{1F680} \u5B9E\u73B0\u901A\u7528\u6DF1\u62F7\u8D1D</a><ul></ul></li></ul></li><li><a href="#_4\uFE0F\u20E3-\u8FDB\u4E00\u6B65\u9605\u8BFB">4\uFE0F\u20E3 \u8FDB\u4E00\u6B65\u9605\u8BFB</a></li><li><a href="#_5\uFE0F\u20E3-\u603B\u7ED3\uFF08\u8BD1\u8005\u6CE8\uFF09">5\uFE0F\u20E3 \u603B\u7ED3\uFF08\u8BD1\u8005\u6CE8\uFF09</a></li></ul></nav><p>\u672C\u7AE0\u6211\u4EEC\u5C06\u5B66\u4E60JS\u4E2D\u5982\u4F55\u62F7\u8D1D\u5BF9\u8C61\u548C\u6570\u7EC4\u3002</p><p id="1"></p><h2 id="_1\uFE0F\u20E3-\u6D45\u62F7\u8D1D-vs-\u6DF1\u62F7\u8D1D" tabindex="-1">1\uFE0F\u20E3 \u6D45\u62F7\u8D1D vs. \u6DF1\u62F7\u8D1D <a class="header-anchor" href="#_1\uFE0F\u20E3-\u6D45\u62F7\u8D1D-vs-\u6DF1\u62F7\u8D1D" aria-hidden="true">#</a></h2><p>\u62F7\u8D1D\u6570\u636E\u5B58\u57282\u79CD <strong>\u6DF1\u5EA6</strong>\uFF1A</p><ol><li><strong>\u6D45\u62F7\u8D1D\uFF08<code>Shallow copying</code>\uFF09</strong>\uFF1A\u53EA\u62F7\u8D1D\u5BF9\u8C61\u548C\u6570\u7EC4\u6700\u5916\u5C42\u7684\u9879\uFF08<code>entries</code>\uFF09\u3002\u539F\u59CB\u503C\u548C\u526F\u672C\u503C\u4E00\u6837</li><li><strong>\u6DF1\u62F7\u8D1D\uFF08<code>Deep copying</code>\uFF09</strong>\uFF1A\u62F7\u8D1D\u6240\u6709\u7684\u9879\u3002\u5373\u904D\u5386\u6240\u6709\u9879\u8FDB\u884C\u62F7\u8D1D</li></ol><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u4E0B\u9762\u4F1A\u4ECB\u7ECD\u8FD92\u79CD\u62F7\u8D1D\u3002\u4E0D\u5E78\u7684\u662F\uFF0CJS\u4E2D\u53EA\u5185\u7F6E\u652F\u6301\u6D45\u62F7\u8D1D\uFF0C\u5982\u679C\u60F3\u8981\u6DF1\u62F7\u8D1D\uFF0C\u5219\u6211\u4EEC\u9700\u8981\u81EA\u5DF1\u5B9E\u73B0\u{1F605}\u3002</p></div><p id="2"></p><h2 id="_2\uFE0F\u20E3-js\u4E2D\u7684\u6D45\u62F7\u8D1D" tabindex="-1">2\uFE0F\u20E3 JS\u4E2D\u7684\u6D45\u62F7\u8D1D <a class="header-anchor" href="#_2\uFE0F\u20E3-js\u4E2D\u7684\u6D45\u62F7\u8D1D" aria-hidden="true">#</a></h2><p>\u6211\u4EEC\u770B\u770B\u51E0\u79CD\u6D45\u62F7\u8D1D\u6570\u636E\u7684\u65B9\u5F0F\u3002</p><p id="2.1"></p><h3 id="_2-1-\u901A\u8FC7spreading\u64CD\u4F5C\u7B26\u62F7\u8D1D\u5BF9\u8C61\u548C\u6570\u7EC4" tabindex="-1">2.1 \u901A\u8FC7spreading\u64CD\u4F5C\u7B26\u62F7\u8D1D\u5BF9\u8C61\u548C\u6570\u7EC4 <a class="header-anchor" href="#_2-1-\u901A\u8FC7spreading\u64CD\u4F5C\u7B26\u62F7\u8D1D\u5BF9\u8C61\u548C\u6570\u7EC4" aria-hidden="true">#</a></h3><p>\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528 <a href="https://exploringjs.com/impatient-js/ch_single-objects.html#spreading-into-object-literals" target="_blank" rel="noopener noreferrer">\u5C55\u5F00\u5BF9\u8C61\u5B57\u9762\u91CF</a> \u548C <a href="https://exploringjs.com/impatient-js/ch_arrays.html#spreading-into-array-literals" target="_blank" rel="noopener noreferrer">\u5C55\u5F00\u6570\u7EC4\u5B57\u9762\u91CF</a> \u65B9\u5F0F\u8FDB\u884C\u62F7\u8D1D\u3002</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> copyOfObject </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">originalObject </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> copyOfArray </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [ </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">originalArray ]</span></span>
<span class="line"></span></code></pre></div><p>spreading\u64CD\u4F5C\u7B26\u5B58\u5728\u51E0\u4E2A\u95EE\u9898\u3002\u5176\u4E2D\u4E00\u4E9B\u662F\u5B9E\u5B9E\u5728\u5728\u7684\u9650\u5236\uFF0C\u800C\u6709\u4E00\u4E9B\u5219\u662F\u7279\u6027\u3002</p><h4 id="_2-1-1-spreading-\u4E0D\u4F1A\u62F7\u8D1D\u5BF9\u8C61\u539F\u578B\u4E0A\u7684\u5C5E\u6027" tabindex="-1">2.1.1 spreading \u4E0D\u4F1A\u62F7\u8D1D\u5BF9\u8C61\u539F\u578B\u4E0A\u7684\u5C5E\u6027 <a class="header-anchor" href="#_2-1-1-spreading-\u4E0D\u4F1A\u62F7\u8D1D\u5BF9\u8C61\u539F\u578B\u4E0A\u7684\u5C5E\u6027" aria-hidden="true">#</a></h4><p>\u{1F330}\uFF1A</p><div class="language-js"><span class="copy"></span><div class="highlight-lines"><br><br><br><br><br><br><div class="highlighted">\xA0</div><br></div><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MyClass</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> original </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">MyClass</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equal</span><span style="color:#A6ACCD;">(original </span><span style="color:#89DDFF;">instanceof</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MyClass</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> copy </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">original </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equal</span><span style="color:#A6ACCD;">(copy </span><span style="color:#89DDFF;">instanceof</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MyClass</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>\u6CE8\u610F\uFF0C\u4E0B\u97622\u4E2A\u8868\u8FBE\u5F0F\u662F\u76F8\u7B49\u7684\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">obj </span><span style="color:#89DDFF;">instanceof</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SomeClass</span></span>
<span class="line"><span style="color:#FFCB6B;">SomeClass</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isPrototypeOf</span><span style="color:#A6ACCD;">(obj)</span></span>
<span class="line"></span></code></pre></div><p>\u56E0\u6B64\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u7ED9\u526F\u672C\u6DFB\u52A0\u548C\u539F\u59CB\u5BF9\u8C61\u4E00\u6837\u7684\u539F\u578B\u6765\u4FEE\u590D\u8FD9\u4E2A\u95EE\u9898\u{1F60E}\uFF1A</p><div class="language-js"><span class="copy"></span><div class="highlight-lines"><br><br><br><br><br><div class="highlighted">\xA0</div><br><br><div class="highlighted">\xA0</div><br></div><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MyClass</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> original </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">MyClass</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> copy </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">__proto__</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getPrototypeOf</span><span style="color:#A6ACCD;">(original)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">original</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equal</span><span style="color:#A6ACCD;">(copy </span><span style="color:#89DDFF;">instanceof</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MyClass</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>\u{1F4A1}\u53E6\u5916\uFF0C\u6211\u4EEC\u8FD8\u53EF\u4EE5\u4F7F\u7528 <code>Object.setPrototypeOf()</code> \u65B9\u6CD5\u5728\u526F\u672C\u521B\u5EFA\u4E4B\u540E\u518D\u8BBE\u7F6E\u5176\u539F\u578B\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> copy </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">original</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#FFCB6B;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setPrototypeOf</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  copy</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getPrototypeOf</span><span style="color:#A6ACCD;">(original)</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><h4 id="_2-1-2-\u5F88\u591A\u5185\u7F6E\u5BF9\u8C61\u6709\u7279\u6B8A\u7684\u5185\u7F6E\u69FD\u4E0D\u80FD\u901A\u8FC7spreading\u64CD\u4F5C\u7B26\u62F7\u8D1D" tabindex="-1">2.1.2 \u5F88\u591A\u5185\u7F6E\u5BF9\u8C61\u6709\u7279\u6B8A\u7684\u5185\u7F6E\u69FD\u4E0D\u80FD\u901A\u8FC7spreading\u64CD\u4F5C\u7B26\u62F7\u8D1D <a class="header-anchor" href="#_2-1-2-\u5F88\u591A\u5185\u7F6E\u5BF9\u8C61\u6709\u7279\u6B8A\u7684\u5185\u7F6E\u69FD\u4E0D\u80FD\u901A\u8FC7spreading\u64CD\u4F5C\u7B26\u62F7\u8D1D" aria-hidden="true">#</a></h4><p>\u8FD9\u6837\u7684\u5185\u7F6E\u5BF9\u8C61\u6709 <strong>\u6B63\u5219\u8868\u8FBE\u5F0F\u548CDate</strong>\u3002\u5982\u679C\u4F60\u62F7\u8D1D\u5B83\u4EEC\uFF0C\u6211\u4EEC\u5C06\u4E22\u5931\u5927\u591A\u662F\u5176\u5185\u90E8\u5B58\u50A8\u7684\u6570\u636E\u{1F605}</p><h4 id="_2-1-3-\u2B50\u53EA\u6709\u81EA\u8EAB\uFF08\u975E\u7EE7\u627F\u7684\uFF09\u5C5E\u6027\u624D\u80FD\u88ABspreading\u62F7\u8D1D" tabindex="-1">2.1.3 \u2B50\u53EA\u6709\u81EA\u8EAB\uFF08\u975E\u7EE7\u627F\u7684\uFF09\u5C5E\u6027\u624D\u80FD\u88ABSpreading\u62F7\u8D1D <a class="header-anchor" href="#_2-1-3-\u2B50\u53EA\u6709\u81EA\u8EAB\uFF08\u975E\u7EE7\u627F\u7684\uFF09\u5C5E\u6027\u624D\u80FD\u88ABspreading\u62F7\u8D1D" aria-hidden="true">#</a></h4><p>\u9274\u4E8E <a href="https://exploringjs.com/impatient-js/ch_proto-chains-classes.html#prototype-chains" target="_blank" rel="noopener noreferrer">\u539F\u578B\u94FE</a> \u7684\u5DE5\u4F5C\u539F\u7406\uFF0C\u8FD9\u901A\u5E38\u662F\u6211\u4EEC\u60F3\u8981\u7684\u6B63\u786E\u65B9\u5F0F\u{1F600}\u3002\u4F46\u662F\u6211\u4EEC\u4ECD\u9700\u8981\u6CE8\u610F\u8FD9\u4E00\u70B9\u3002</p><p>\u4E0B\u9762\u793A\u4F8B\u4E2D\uFF0C<code>original</code> \u7EE7\u627F\u7684\u5C5E\u6027 <code>.inherietedProp</code> \u5728\u526F\u672C <code>copy</code> \u4E2D\u662F\u4E0D\u5B58\u5728\u7684\uFF0C\u56E0\u4E3A\u6211\u4EEC\u53EA\u4F1A\u62F7\u8D1D\u81EA\u8EAB\u7684\u5C5E\u6027\uFF0C\u4E0D\u4F1A\u4FDD\u7559\u539F\u578B\u94FE\u5C5E\u6027\u3002\u{1F4DA}</p><div class="language-js"><span class="copy"></span><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlighted">\xA0</div><br></div><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> proto </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">inheritedProp</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> original </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">__proto__</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> proto</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">ownProp</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">b</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equal</span><span style="color:#A6ACCD;">(original</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">inheritedProp</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equal</span><span style="color:#A6ACCD;">(original</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ownProp</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">b</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> copy </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">original </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equal</span><span style="color:#A6ACCD;">(copy</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">inheritedProp</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">undefined</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equal</span><span style="color:#A6ACCD;">(copy</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ownProp</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">b</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><h4 id="_2-1-4-\u2B50-spreading\u53EA\u62F7\u8D1D\u53EF\u679A\u4E3E\u5C5E\u6027" tabindex="-1">2.1.4 \u2B50 Spreading\u53EA\u62F7\u8D1D\u53EF\u679A\u4E3E\u5C5E\u6027 <a class="header-anchor" href="#_2-1-4-\u2B50-spreading\u53EA\u62F7\u8D1D\u53EF\u679A\u4E3E\u5C5E\u6027" aria-hidden="true">#</a></h4><p>\u{1F4A1}\u6570\u7EC4\u7684 <code>.length</code> \u5C5E\u6027\u662F\u4E0D\u53EF\u679A\u4E3E\u7684\u81EA\u8EAB\u5C5E\u6027\uFF0C\u5B83\u4E0D\u4F1A\u88AB\u62F7\u8D1D\u3002</p><p>\u{1F330}\uFF0C\u6211\u4EEC\u901A\u8FC7spreading\u62F7\u8D1D\u6570\u7EC4 <code>arr</code>\uFF08\u884CA\uFF09\uFF1A</p><div class="language-js"><span class="copy"></span><div class="highlight-lines"><br><br><br><br><br><div class="highlighted">\xA0</div><br></div><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> arr </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">b</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equal</span><span style="color:#A6ACCD;">(arr</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equal</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{}.</span><span style="color:#A6ACCD;">hasOwnProperty</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#A6ACCD;">(arr</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">length</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> copy </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{...</span><span style="color:#A6ACCD;">arr</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// A</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equal</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{}.</span><span style="color:#A6ACCD;">hasOwnProperty</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#A6ACCD;">(copy</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">length</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u5176\u5B9E\u5E76\u4E0D\u662F\u4EC0\u4E48\u9650\u5236\uFF0C\u56E0\u4E3A\u5927\u591A\u6570\u5C5E\u6027\u90FD\u662F\u53EF\u679A\u4E3E\u7684\u3002</p><p>\u{1F4A1} <strong>\u5982\u679C\u6211\u4EEC\u9700\u8981\u4E0D\u53EF\u679A\u4E3E\u5C5E\u6027\uFF0C\u6211\u4EEC\u9700\u8981\u4F7F\u7528 <code>Object.getOwnPropertyDescriptors()</code> + <code>Object.defineProperties()</code> \u62F7\u8D1D\u5BF9\u8C61</strong> \uFF08\u4E0B\u9762\u4F1A\u8BB2\uFF09\uFF1A</p><ul><li>\u5B83\u4F1A\u5305\u542B\u6240\u6709\u7279\u6027\uFF08\u4E0D\u6B62\u662F <code>value</code>\uFF09\uFF0C\u56E0\u6B64\u5B83\u4EEC\u80FD\u6B63\u786E\u7684\u62F7\u8D1D <code>getters</code> &amp; <code>setters</code> &amp; \u53EA\u8BFB\u5C5E\u6027\uFF0C\u7B49\u7B49</li><li><code>Object.getOwnPropertyDescriptors()</code> \u4F1A\u540C\u65F6\u83B7\u53D6\u53EF\u679A\u4E3E\u5C5E\u6027\u548C\u4E0D\u53EF\u679A\u4E3E\u5C5E\u6027</li></ul><p>\u5173\u4E8E\u679A\u4E3E\u6027\uFF0C\u53EF\u4EE5\u67E5\u770B <a href="./../4/Enumerability-of-Properties.html">\u5C5E\u6027\u7684\u53EF\u679A\u4E3E\u6027</a> \u8FD9\u4E00\u7AE0\u3002</p><h4 id="_2-1-5-\u2B50-\u4F7F\u7528spreading\u65F6\u5C5E\u6027\u7279\u6027\u4E0D\u4F1A\u88AB\u51C6\u786E\u7684\u62F7\u8D1D" tabindex="-1">2.1.5 \u2B50 \u4F7F\u7528Spreading\u65F6\u5C5E\u6027\u7279\u6027\u4E0D\u4F1A\u88AB\u51C6\u786E\u7684\u62F7\u8D1D <a class="header-anchor" href="#_2-1-5-\u2B50-\u4F7F\u7528spreading\u65F6\u5C5E\u6027\u7279\u6027\u4E0D\u4F1A\u88AB\u51C6\u786E\u7684\u62F7\u8D1D" aria-hidden="true">#</a></h4><p>\u{1F4DA} \u72EC\u7ACB\u4E8E <a href="./../4/Property-attributes-an-Introduction.html">\u5C5E\u6027\u7279\u6027</a>\uFF0C<strong>\u5B83\u7684\u526F\u672C\u603B\u662F\u53D8\u4E3A\u53EF\u5199\u53EF\u914D\u7F6E\u7684\u6570\u636E\u5C5E\u6027</strong>\u3002</p><p>\u6BD4\u5982\uFF0C\u6211\u4EEC\u5C06 <code>original.prop</code> \u7279\u6027\u8BBE\u7F6E\u4E3A <code>writable = false</code> &amp; <code>configurable = false</code>:</p><div class="language-js"><span class="copy"></span><div class="highlight-lines"><br><br><br><br><br><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><br><br><br><br><br><br><br></div><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> original </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">defineProeprty</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">prop</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">writable</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">configurable</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">enumerable</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">deepEqual</span><span style="color:#A6ACCD;">(original</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">prop</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>\u{1F4A1} \u5982\u679C\u6211\u4EEC\u62F7\u8D1D <code>.prop</code>, \u5219\u5B83\u7684 <code>writable &amp; configurable</code> \u7279\u6027\u90FD\u5C06\u53D8\u4E3A <code>true</code>:</p><div class="language-js"><span class="copy"></span><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><br><br><br><br><br></div><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> copy </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">original </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// \u{1F4A1}\u7279\u6027 \`writable\` &amp; \`configurable\` \u5C06\u88AB\u6539\u5199</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">deepEqaul</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getOwnPropertyDescriptors</span><span style="color:#A6ACCD;">(copy)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">prop</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">value</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">writable</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">configurable</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">enumerable</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>\u{1F4A1}\u4F5C\u4E3A\u7ED3\u679C\uFF0C<code>getters &amp; setters</code> \u5C06\u4E0D\u4F1A\u88AB\u6B63\u786E\u7684\u62F7\u8D1D\uFF1A</p><div class="language-js"><span class="copy"></span><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><br><br><br></div><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> original </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">myGetter</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">123</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">mySetter</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> copy </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">original </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">deepEqual</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  copy</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">myGetter</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// \u4ECE\u8BBF\u95EE\u5668\u5C5E\u6027\u53D8\u4E3A\u4E86\u6570\u636E\u5C5E\u6027\u{1F605}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">mySetter</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">undefined</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>\u540E\u9762\u63D0\u5230\u7684 <code>Object.getOwnPropertyDescriptorss()</code> + <code>Object.defineProperties()</code> \u603B\u662F\u4F1A\u5B8C\u6574\u65E0\u7F3A\u7684\u4F20\u8F93\u81EA\u8EAB\u5C5E\u6027\u7684\u6240\u6709\u7279\u6027\u{1F60E}\u3002</p><h4 id="_2-1-6-spreading\u62F7\u8D1D\u662F\u6D45\u62F7\u8D1D" tabindex="-1">2.1.6 Spreading\u62F7\u8D1D\u662F\u6D45\u62F7\u8D1D <a class="header-anchor" href="#_2-1-6-spreading\u62F7\u8D1D\u662F\u6D45\u62F7\u8D1D" aria-hidden="true">#</a></h4><p>\u526F\u672C\u5BF9original\u4E2D\u7684\u952E\u503C\u5BF9\u62E5\u6709\u5168\u65B0\u7684\u7248\u672C\uFF0C\u4F46\u662F\u5D4C\u5957\u7684\u90E8\u5206\u4E0D\u4F1A\u88AB\u62F7\u8D1D\u3002\u6BD4\u5982\uFF1A</p><div class="language-js"><span class="copy"></span><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlighted">\xA0</div><br><br><br><br><div class="highlighted">\xA0</div><br><br><br><br><br><br><br><br><div class="highlighted">\xA0</div><br><br><br><br><br><br><div class="highlighted">\xA0</div><br><br><br><br><br><br><div class="highlighted">\xA0</div><br><br><br><br><br><br><br><br><div class="highlighted">\xA0</div><br><br><br><br></div><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> original </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Jane</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">work</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">employer</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Acme</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> copy </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">original </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// \u{1F4A1}\u5C5E\u6027 .name \u662F\u4E00\u4E2A\u526F\u672C\uFF0C\u6539\u53D8\u526F\u672C\u4E0D\u4F1A\u5F71\u54CDoriginal</span></span>
<span class="line"><span style="color:#A6ACCD;">copy</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">John</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">deepEqual</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  original</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Jane</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// original.name \u4E0D\u53D7\u5F71\u54CD</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">work</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">employer</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Acme</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">deepEqual</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  copy</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">John</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// \u526F\u672C\u53D8\u5316\u4E86</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">work</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">employer</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Acme</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// \u{1F6A8} .work\u7684\u503C\u662F\u5171\u4EAB\u7684\uFF1A\u6539\u53D8\u526F\u672C\u4F1A\u5F71\u54CD\u5230original</span></span>
<span class="line"><span style="color:#A6ACCD;">copy</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">work</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">employer </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Spectre</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">deepEqual</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  original</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Jane</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">work</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">employer</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Spectre</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// \u53D7\u5F71\u54CD\u4E86</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">deepEqual</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  copy</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">John</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">work</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">employer</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Spectre</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>\u6211\u4EEC\u5C06\u7A0D\u540E\u770B\u5982\u4F55\u6DF1\u62F7\u8D1D\u3002</p><p id="2.2"></p><h3 id="_2-2-\u4F7F\u7528-object-assign-\u8FDB\u884C\u6D45\u62F7\u8D1D" tabindex="-1">2.2 \u4F7F\u7528 Object.assign() \u8FDB\u884C\u6D45\u62F7\u8D1D <a class="header-anchor" href="#_2-2-\u4F7F\u7528-object-assign-\u8FDB\u884C\u6D45\u62F7\u8D1D" aria-hidden="true">#</a></h3><p><code>Object.assign()</code> \u548C <code>spreading</code> \u5DE5\u4F5C\u6548\u679C\u7C7B\u4F3C\u3002\u5373\uFF0C\u4E0B\u97622\u79CD\u62F7\u8D1D\u64CD\u4F5C\u51E0\u4E4E\u76F8\u540C\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> copy1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">original </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> copy2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">assign</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{},</span><span style="color:#A6ACCD;"> oirginal)</span></span>
<span class="line"></span></code></pre></div><p>\u4F7F\u7528\u65B9\u6CD5\u5F62\u5F0F\u7684\u4F18\u52BF\u5728\u4E8E\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5728\u8001JS\u5F15\u64CE\u4E2D\u4F7F\u7528\u57AB\u7247\uFF08<code>polyfill</code>\uFF09\u7684\u65B9\u5F0F\u3002</p><p>\u{1F914} <code>Object.assign()</code> \u548C <code>Spreading</code> \u5E76\u4E0D\u662F\u5B8C\u5168\u76F8\u540C\u3002\u5728\u67D0\u4E00\u4E2A\u65B9\u9762\u5B58\u5728\u5DEE\u5F02\uFF0C\u76F8\u5BF9\u5FAE\u5999\u7684\u70B9\uFF1A<strong>\u5B83\u4EEC\u521B\u5EFA\u5C5E\u6027\u7684\u65B9\u5F0F\u4E0D\u540C</strong></p><ul><li><code>Object.assign()</code> \u4F7F\u7528 <strong>\u8D4B\u503C\uFF08<code>assignment</code>\uFF09</strong> \u521B\u5EFA\u526F\u672C\u7684\u5C5E\u6027</li><li><code>Spreading</code> \u901A\u8FC7 <strong>\u5B9A\u4E49\uFF08<code>definition</code>\uFF09</strong> \u65B9\u5F0F\u521B\u5EFA\u526F\u672C\u5C5E\u6027</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>\u{1F4A1} <em>\u8D4B\u503C\u4F1A\u8C03\u7528\u81EA\u8EAB\u548C\u7EE7\u627F\u7684 <code>setters</code>\uFF0C\u800C\u5B9A\u4E49\u5219\u4E0D\u4F1A\u3002<a href="./../4/Properties-assignment-vs-definition.html">assignment vs. definition</a></em></p></div><p>\u8FD9\u79CD\u5DEE\u5F02\u5E76\u4E0D\u662F\u5F88\u663E\u8457\u3002\u4E0B\u9762\u4EE3\u7801\u662F\u4E2A\u4F8B\u5B50\uFF0C\u4F46\u8FD9\u4E2A\u4F8B\u5B50\u6BD4\u8F83\u523B\u610F\uFF1A</p><div class="language-js"><span class="copy"></span><div class="highlight-lines"><br><div class="highlighted">\xA0</div><br><div class="highlighted">\xA0</div><br><div class="highlighted">\xA0</div><br><br><br><br><br><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><br><br></div><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> original </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">__proto__</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// A</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// \u5B9A\u4E49\u65B9\u5F0F\u521B\u5EFA\u5C5E\u6027\uFF0C\u4E0D\u4F1A\u8C03\u7528\u7EE7\u627F\u7684setter</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> copy1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">original </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// \u{1F4A1} copy1 \u6709\u81EA\u8EAB\u5C5E\u6027 &#39;__proto__&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">deepEqual</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">keys</span><span style="color:#A6ACCD;">(copy1)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">__proto__</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// \u8D4B\u503C\u65B9\u5F0F\u521B\u5EFA\u5C5E\u6027\uFF0C\u4F1A\u8C03\u7528\u7EE7\u627F\u7684setter</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> copy2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">assign</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{},</span><span style="color:#A6ACCD;"> original) </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// copy2 \u539F\u578B\u4E3A null</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">deepEqual</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getPrototypeOf</span><span style="color:#A6ACCD;">(copy2)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">null</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>\u901A\u8FC7\u4F7F\u7528 <code>A</code> \u884C\u7684\u8BA1\u7B97\u5C5E\u6027\uFF0C\u6211\u4EEC\u521B\u5EFA\u4E86\u4E00\u4E2A <code>.__proto__</code> \u4F5C\u4E3A\u81EA\u8EAB\u5C5E\u6027\uFF0C\u5E76\u4E14\u4E0D\u4F1A\u8C03\u7528\u5176\u7EE7\u627F\u7684setter\u3002\u7136\u800C\uFF0C\u5F53 <code>Object.assign()</code> \u62F7\u8D1D\u8BE5\u5C5E\u6027\u65F6\uFF0C\u5B83\u4F1A\u8C03\u7528 <code>setter</code>\u3002\uFF08\u5173\u4E8E <code>.__proto__</code> \u53EF\u67E5\u770B <a href="https://exploringjs.com/impatient-js/ch_proto-chains-classes.html#proto" target="_blank" rel="noopener noreferrer">JS for impatient programmers</a>\uFF09</p><p id="2.3"></p><h3 id="_2-3-\u2B50-\u4F7F\u7528object-getownpropertydescriptors-object-defineproperties-\u8FDB\u884C\u6D45\u62F7\u8D1D" tabindex="-1">2.3 \u2B50 \u4F7F\u7528Object.getOwnPropertyDescriptors()+Object.defineProperties()\u8FDB\u884C\u6D45\u62F7\u8D1D <a class="header-anchor" href="#_2-3-\u2B50-\u4F7F\u7528object-getownpropertydescriptors-object-defineproperties-\u8FDB\u884C\u6D45\u62F7\u8D1D" aria-hidden="true">#</a></h3><p>JS\u5141\u8BB8\u6211\u4EEC\u901A\u8FC7 <a href="./../4/Property-attributes-an-Introduction.html">\u5C5E\u6027\u63CF\u8FF0\u5668</a> \u521B\u5EFA\u5C5E\u6027\uFF0C\u5B83\u662F\u6307\u5B9A\u4E86\u5C5E\u6027\u7279\u6027\u7684\u4E00\u4E2A\u5BF9\u8C61\u3002\u6BD4\u5982\uFF0C\u901A\u8FC7 <code>Object.defineProperties()</code>\uFF0C\u5728\u5B9E\u6218\u4E2D\u6211\u4EEC\u5DF2\u7ECF\u89C1\u8FC7\u8FD9\u4E2A\u65B9\u6CD5\u3002\u5982\u679C\u7ED3\u5408 <code>Object.getOwnPropertyDescriptors()</code> \u6211\u4EEC\u53EF\u4EE5\u66F4\u51C6\u786E\u7684\u8FDB\u884C\u62F7\u8D1D\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">copyAllOwnProperties</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">original</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">defineProperties</span><span style="color:#F07178;">(</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">{},</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#FFCB6B;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getOwnPropertyDescriptors</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">original</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  )</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u{1F680}\u8FD9\u6D88\u9664\u4E86\u901A\u8FC7Spreading\u62F7\u8D1D\u76842\u4E2A\u95EE\u9898\u3002</p><p>\u7B2C\u4E00\uFF0C\u81EA\u8EAB\u5C5E\u6027\u6240\u6709\u7279\u6027\u90FD\u88AB\u6B63\u786E\u7684\u62F7\u8D1D\u3002\u56E0\u6B64\uFF0C\u6211\u4EEC\u4E5F\u53EF\u4EE5\u62F7\u8D1Dgetters &amp; setters \u{1F929}:</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> original </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">get</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">myGetter</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">123</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">mySetter</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">deepEqual</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">copyAllProperties</span><span style="color:#A6ACCD;">(original)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  original</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>\u7B2C\u4E8C\uFF0C\u56E0\u4E3A <code>Object.getOwnPropertyDescriptors()</code> \u975E\u679A\u4E3E\u5C5E\u6027\u4E5F\u53EF\u4EE5\u88AB\u62F7\u8D1D\u4E86\uFF1A</p><div class="language-js"><span class="copy"></span><div class="highlight-lines"><br><br><br><br><br><br><br><br><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><br></div><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> arr </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">b</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equal</span><span style="color:#A6ACCD;">(arr</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equal</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{}.</span><span style="color:#A6ACCD;">hasOwnProperty</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#A6ACCD;">(arr</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">length</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> copy </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">copyAllProperties</span><span style="color:#A6ACCD;">(arr)</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equal</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{}.</span><span style="color:#A6ACCD;">hasOwnProperty</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">call</span><span style="color:#A6ACCD;">(copy</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">length</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p id="3"></p><h2 id="_3\uFE0F\u20E3-js\u4E2D\u7684\u6DF1\u62F7\u8D1D" tabindex="-1">3\uFE0F\u20E3 JS\u4E2D\u7684\u6DF1\u62F7\u8D1D <a class="header-anchor" href="#_3\uFE0F\u20E3-js\u4E2D\u7684\u6DF1\u62F7\u8D1D" aria-hidden="true">#</a></h2><p>\u73B0\u5728\u8BE5\u5904\u7406\u6DF1\u62F7\u8D1D\u95EE\u9898\u4E86\u3002\u9996\u5148\u6211\u4EEC\u5C06\u624B\u52A8\u6DF1\u62F7\u8D1D\uFF0C\u7136\u540E\u6211\u4EEC\u770B\u770B\u901A\u7528\u7684\u4E00\u4E9B\u65B9\u5F0F\u3002</p><p id="3.1"></p><h3 id="_3-1-\u4F7F\u7528\u5D4C\u5957spreading\u624B\u52A8\u6DF1\u62F7\u8D1D" tabindex="-1">3.1 \u4F7F\u7528\u5D4C\u5957spreading\u624B\u52A8\u6DF1\u62F7\u8D1D <a class="header-anchor" href="#_3-1-\u4F7F\u7528\u5D4C\u5957spreading\u624B\u52A8\u6DF1\u62F7\u8D1D" aria-hidden="true">#</a></h3><p>\u5982\u679C\u6211\u4EEC\u4F7F\u7528\u5D4C\u5957\u7684spreading\uFF0C\u6211\u4EEC\u53EF\u4EE5\u6DF1\u62F7\u8D1D\uFF1A</p><div class="language-js"><span class="copy"></span><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><div class="highlighted">\xA0</div><br><br><br><br><br><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><br></div><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> original </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Jane</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">work</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">employer</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Acme</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> copy </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> original</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">work</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">original</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">work </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// \u6211\u4EEC\u6210\u529F\u62F7\u8D1D\u4E86</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">deepEqual</span><span style="color:#A6ACCD;">(original</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> copy)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// \u5E76\u4E14\u62F7\u8D1D\u662F\u6DF1\u62F7\u8D1D\u7684</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ok</span><span style="color:#A6ACCD;">(original</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">work </span><span style="color:#89DDFF;">!==</span><span style="color:#A6ACCD;"> copy</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">work)</span></span>
<span class="line"></span></code></pre></div><p id="3.2"></p><h3 id="_3-2-\u{1F914}-hack\u65B9\u5F0F\uFF1A\u4F7F\u7528json\u6DF1\u62F7\u8D1D" tabindex="-1">3.2 \u{1F914} Hack\u65B9\u5F0F\uFF1A\u4F7F\u7528JSON\u6DF1\u62F7\u8D1D <a class="header-anchor" href="#_3-2-\u{1F914}-hack\u65B9\u5F0F\uFF1A\u4F7F\u7528json\u6DF1\u62F7\u8D1D" aria-hidden="true">#</a></h3><p>\u8FD9\u662F\u4E00\u79CDhack\u65B9\u6CD5\uFF0C\u4F46\u662F\u5B83\u63D0\u4F9B\u4E86\u4E00\u79CD\u5FEB\u901F\u7684\u89E3\u51B3\u65B9\u6848\uFF1A\u4E3A\u4E86\u6DF1\u62F7\u8D1D\u5BF9\u8C61 <code>original</code>\uFF0C\u6211\u4EEC\u5148\u5C06\u5176\u8F6C\u6362\u4E3A <strong>JSON\u5B57\u7B26\u4E32</strong>\uFF0C\u7136\u540E\u89E3\u6790\u8BE5\u5B57\u7B26\u4E32\uFF1A</p><div class="language-js"><span class="copy"></span><div class="highlight-lines"><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><br><br><br><br><br><br><br><br><br><br><br></div><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">jsonDeepCopy</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">original</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">parse</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stringify</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">original</span><span style="color:#F07178;">))</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> original </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Jane</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">work</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">employer</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Acme</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> copy </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">jsonDeepCopy</span><span style="color:#A6ACCD;">(original)</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">deepEqual</span><span style="color:#A6ACCD;">(original</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> copy)</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><strong>\u8FD9\u79CD\u65B9\u5F0F\u7684\u5F0A\u7AEF\u662F\uFF0C\u6211\u4EEC\u53EA\u80FD\u62F7\u8D1DJSON\u652F\u6301\u7684\u5408\u6CD5\u5C5E\u6027keys\u548C\u5C5E\u6027values</strong> \u{1F605}\u3002</p></div><p>\u{1F469}\u{1F3FB}\u200D\u{1F3EB} \u4E0B\u9762\u662F\u4E0D\u652F\u6301\u7684keys &amp; values\u5C06\u88AB\u76F4\u63A5\u5FFD\u7565\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">deepEqual</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">jsonDeepCopy</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// Symbols\u4F5C\u4E3Akeys JSON\u4E0D\u652F\u6301 \u{1F6AB}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">[</span><span style="color:#FFCB6B;">Symbol</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)]</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">abc</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u51FD\u6570\u4F5C\u4E3A\u503C\uFF0CJSON\u4E0D\u652F\u6301 \u{1F6AB}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">b</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{},</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// undefined | null\u503C JSON\u4E0D\u652F\u6301 \u{1F6AB}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">c</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">undefined,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// \u5F97\u5230\u4E00\u4E2A\u7A7A\u5BF9\u8C61</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>\u5176\u5B83\u60C5\u51B5\u4F1A\u5BFC\u81F4\u5F02\u5E38\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">throws</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// JSON\u4E0D\u652F\u6301 BigInt \u7C7B\u578B  \u{1F6AB}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">jsonDeepCopy</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123</span><span style="color:#C792EA;">n</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;font-style:italic;">^</span><span style="color:#C3E88D;">TypeError: Do not know how to serialize a BigInt</span><span style="color:#89DDFF;font-style:italic;">$</span><span style="color:#89DDFF;">/</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p id="6.3"></p><h3 id="_3-3-\u{1F680}-\u5B9E\u73B0\u901A\u7528\u6DF1\u62F7\u8D1D" tabindex="-1">3.3 \u{1F680} \u5B9E\u73B0\u901A\u7528\u6DF1\u62F7\u8D1D <a class="header-anchor" href="#_3-3-\u{1F680}-\u5B9E\u73B0\u901A\u7528\u6DF1\u62F7\u8D1D" aria-hidden="true">#</a></h3><p>\u4E0B\u9762\u51FD\u6570\u65F6\u4E00\u79CD\u901A\u7528\u7684\u6DF1\u62F7\u8D1D\uFF1A</p><div class="language-js"><span class="copy"></span><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted">\xA0</div><br><br><br><br></div><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">deepCopy</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">original</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#FFCB6B;">Array</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isArray</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">original</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">copy</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> []</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">index</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">]</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">of</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">original</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">entries</span><span style="color:#F07178;">()) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">copy</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">index</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">deepCopy</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">copy</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">original</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">object</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">original</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">copy</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">]</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">of</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">entries</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">original</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">copy</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">] </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">deepCopy</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">copy</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u539F\u59CB\u7C7B\u578B\u5219\u76F4\u63A5\u8FD4\u56DE\uFF0C\u4E0D\u9700\u8981\u8FDB\u884C\u62F7\u8D1D</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">original</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u4E2A\u51FD\u6570\u5904\u7406\u4E863\u4E2D\u60C5\u5F62\uFF1A</p><ol><li>\u5982\u679C <code>original</code> \u662F\u6570\u7EC4\uFF1A\u6211\u4EEC\u521B\u5EFA\u4E00\u4E2A\u65B0\u6570\u7EC4\uFF0C\u6DF1\u62F7\u8D1D\u5176\u5143\u7D20\u5230\u65B0\u6570\u7EC4\u4E2D</li><li>\u5982\u679C <code>original</code> \u662F\u5BF9\u8C61\uFF0C\u6211\u4EEC\u4F7F\u7528\u7C7B\u4F3C\u7684\u65B9\u5F0F</li><li>\u5982\u679C <code>original</code> \u662F\u539F\u59CB\u7C7B\u578B\u503C\uFF0C\u6211\u4EEC\u4EC0\u4E48\u4E5F\u4E0D\u505A</li></ol><p>\u793A\u4F8B\uFF1A</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> original </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">b</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">c</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">d</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">e</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> copy </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">deepCopy</span><span style="color:#A6ACCD;">(original)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// \u526F\u672C\u548Coriginal\u5B8C\u5168\u4E00\u6837?</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">deepEqual</span><span style="color:#A6ACCD;">(copy</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> original) </span><span style="color:#676E95;font-style:italic;">// true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// \u6211\u4EEC\u662F\u5426\u771F\u7684\u5B8C\u5168\u62F7\u8D1D\u4E86\u6240\u6709\u5C42\u7EA7\uFF1F</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// \uFF08\u5185\u5BB9\u76F8\u540C\uFF0C\u4F46\u662F\u662F\u4E0D\u540C\u5BF9\u8C61\uFF1F\uFF09 </span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ok</span><span style="color:#A6ACCD;">(copy     </span><span style="color:#89DDFF;">!==</span><span style="color:#A6ACCD;"> original)</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ok</span><span style="color:#A6ACCD;">(copy</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">b   </span><span style="color:#89DDFF;">!==</span><span style="color:#A6ACCD;"> original</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">b)</span></span>
<span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ok</span><span style="color:#A6ACCD;">(copy</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">d </span><span style="color:#89DDFF;">!==</span><span style="color:#A6ACCD;"> original</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">b</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">d)</span></span>
<span class="line"></span></code></pre></div><p>\u6CE8\u610F <code>deepCopy()</code> \u53EA\u4FEE\u590D\u4E86spreading\u7684\u4E00\u4E2A\u95EE\u9898\uFF1A <strong>\u6D45\u62F7\u8D1D</strong>\u3002\u5176\u4F59\u95EE\u9898\u4ECD\u5B58\u5728\u{1F605}\uFF1A</p><ul><li>\u539F\u578B\u4E0D\u4F1A\u88AB\u62F7\u8D1D</li><li>\u7279\u6B8A\u5BF9\u8C61\u53EA\u90E8\u5206\u62F7\u8D1D</li><li>\u975E\u679A\u4E3E\u5C5E\u6027\u88AB\u5FFD\u7565</li><li>\u5927\u591A\u6570\u5C5E\u6027\u7279\u6027\u88AB\u5FFD\u7565</li></ul><p>\u5B8C\u5168\u5B9E\u73B0\u5B8C\u6574\u7684\u901A\u7528\u62F7\u8D1D\u662F\u4E0D\u53EF\u80FD\u7684\uFF0C\u53EF\u80FD\u539F\u56E0\u4E3A\uFF1A\u4E0D\u662F\u6240\u6709\u6570\u636E\u90FD\u662F\u4E00\u68F5\u6811\uFF0C\u6709\u65F6\u6211\u4EEC\u4E5F\u4E0D\u60F3\u62F7\u8D1D\u6240\u6709\u5C5E\u6027\u7B49\u3002</p><h4 id="_3-3-1-\u{1F525}-\u66F4\u7B80\u6D01\u7248\u672Cdeepcopy" tabindex="-1">3.3.1 \u{1F525} \u66F4\u7B80\u6D01\u7248\u672CdeepCopy() <a class="header-anchor" href="#_3-3-1-\u{1F525}-\u66F4\u7B80\u6D01\u7248\u672Cdeepcopy" aria-hidden="true">#</a></h4><p>\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528 <code>.map()</code> &amp; <code>Object.fromEntries()</code> \u4F7F\u4E0A\u9762\u7684deepCopy\u66F4\u7B80\u6D01\uFF1A</p><div class="language-js"><span class="copy"></span><div class="highlight-lines"><br><br><br><br><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><div class="highlighted">\xA0</div><br><br><br><br><br><br></div><pre><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">deepCopy</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">original</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#FFCB6B;">Array</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isArray</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">original</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">original</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">map</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">elem</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">deepCopy</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">elem</span><span style="color:#F07178;">)) </span><span style="color:#676E95;font-style:italic;">// \u9012\u5F52</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">original</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">object</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">original</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fromEntries</span><span style="color:#F07178;">(</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#FFCB6B;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">entries</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">original</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">      	</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">map</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">([</span><span style="color:#A6ACCD;">k</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">v</span><span style="color:#89DDFF;">])</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> [</span><span style="color:#A6ACCD;">k</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">deepCopy</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">v</span><span style="color:#F07178;">)]) </span><span style="color:#676E95;font-style:italic;">// \u9012\u5F52</span></span>
<span class="line"><span style="color:#F07178;">    )</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// \u539F\u59CB\u7C7B\u578B\u503C\uFF1A\u539F\u5B50\u6027\u7684\uFF0C\u4E0D\u9700\u8981\u62F7\u8D1D</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">original</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p id="4"></p><h2 id="_4\uFE0F\u20E3-\u8FDB\u4E00\u6B65\u9605\u8BFB" tabindex="-1">4\uFE0F\u20E3 \u8FDB\u4E00\u6B65\u9605\u8BFB <a class="header-anchor" href="#_4\uFE0F\u20E3-\u8FDB\u4E00\u6B65\u9605\u8BFB" aria-hidden="true">#</a></h2><ul><li><a href="https://exploringjs.com/deep-js/ch_copying-class-instances.html" target="_blank" rel="noopener noreferrer">\u62F7\u8D1D\u7C7B\u5B9E\u4F8B\uFF1A.clone() vs. \u62F7\u8D1D\u6784\u9020\u5668</a> \u89E3\u91CA\u57FA\u4E8E\u7C7B\u7684\u62F7\u8D1D\u6A21\u5F0F</li><li><a href="https://exploringjs.com/impatient-js/ch_single-objects.html#spreading-into-object-literals" target="_blank" rel="noopener noreferrer">Spreading\u5BF9\u8C61\u5B57\u9762\u91CF</a></li><li><a href="https://exploringjs.com/impatient-js/ch_arrays.html#spreading-into-array-literals" target="_blank" rel="noopener noreferrer">Spreading\u6570\u7EC4\u5B57\u9762\u91CF</a></li><li><a href="https://exploringjs.com/impatient-js/ch_proto-chains-classes.html#prototype-chains" target="_blank" rel="noopener noreferrer">\u539F\u578B\u94FE</a></li></ul><h2 id="_5\uFE0F\u20E3-\u603B\u7ED3\uFF08\u8BD1\u8005\u6CE8\uFF09" tabindex="-1">5\uFE0F\u20E3 \u603B\u7ED3\uFF08\u8BD1\u8005\u6CE8\uFF09 <a class="header-anchor" href="#_5\uFE0F\u20E3-\u603B\u7ED3\uFF08\u8BD1\u8005\u6CE8\uFF09" aria-hidden="true">#</a></h2><ul><li>\u5BF9\u8C61\u548C\u6570\u7EC4\u7684\u62F7\u8D1D\u65B9\u5F0F\uFF1A\u6D45\u62F7\u8D1D &amp; \u6DF1\u62F7\u8D1D</li><li>spreading \u62F7\u8D1D <ul><li>\u4E0D\u4F1A\u62F7\u8D1D\u539F\u578B\u4E0A\u7684\u5C5E\u6027</li><li>\u4E0D\u4F1A\u62F7\u8D1D\u67D0\u4E9B\u5BF9\u8C61\u5185\u90E8\u69FD\u6570\u636E\uFF08\u6BD4\u5982\u6B63\u5219 &amp; Date\u5BF9\u8C61\uFF09</li><li>spreading\u5BF9\u5C5E\u6027\u7279\u6027\u62F7\u8D1D\u4E0D\u51C6\u786E\uFF0C\u6BD4\u5982\u5C06 <code>writable=false</code> | <code>configurable=false</code> \u62F7\u8D1D\u540E\u53D8\u4E3A <code>writable=true</code> | <code>configurable=true</code></li></ul></li><li><code>Object.assign()</code> \u6D45\u62F7\u8D1D <ul><li>Object.assign() \u901A\u8FC7 <strong>\u8D4B\u503C\uFF08<code>assignment</code>\uFF09</strong> \u521B\u5EFA\u526F\u672C\u5C5E\u6027</li><li>Spreading \u901A\u8FC7 <strong>\u5B9A\u4E49\uFF08<code>definition</code>\uFF09</strong> (\u6BD4\u5982 <code>Object.defineProperties()</code>) \u65B9\u5F0F\u521B\u5EFA\u526F\u672C\u5C5E\u6027</li><li>\u8D4B\u503C vs. \u5B9A\u4E49 \u533A\u522B\uFF1A\u8D4B\u503C\u4F1A\u8C03\u7528\u81EA\u8EAB\u6216\u7EE7\u627F\u7684setter\uFF0C\u800C\u5B9A\u4E49\u5219\u4E0D\u4F1A</li></ul></li><li><code>Object.getOwnPropertyDescriptors()</code> + <code>Object.defineProperties()</code> \u6D45\u62F7\u8D1D\u65B9\u5F0F\u89E3\u51B3spreading\u62F7\u8D1D\u7684\u95EE\u9898\uFF1A <ul><li>\u5C5E\u6027\u7279\u6027\u62F7\u8D1D\u6B63\u786E</li><li>\u53EF\u4EE5\u5BF9\u8BBF\u95EE\u5668\u5C5E\u6027\uFF08<code>getters &amp; setters</code>\uFF09\u8FDB\u884C\u6B63\u786E\u7684\u62F7\u8D1D</li></ul></li><li>\u6DF1\u62F7\u8D1D\u7684\u51E0\u79CD\u65B9\u5F0F\uFF1A <ul><li>\u5D4C\u5957spreading\u62F7\u8D1D</li><li>Hack\u65B9\u5F0F\uFF1AJSON\uFF0C\u5B58\u5728\u51E0\u4E2A\u95EE\u9898 - \u53EA\u80FD\u62F7\u8D1DJSON\u652F\u6301\u7684keys &amp; values\uFF0C\u5176\u4F59\u5FFD\u7565\u6216\u629B\u51FA\u5F02\u5E38</li><li>\u{1F525}\u9012\u5F52\u65B9\u5F0F\u8FDB\u884C\u6DF1\u62F7\u8D1D\uFF0C\u4F7F\u7528\u5230\u4E86 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/fromEntries" target="_blank" rel="noopener noreferrer">Object.fromEntries()</a> \u7B49\u65B9\u6CD5</li></ul></li></ul><p>2022\u5E7407\u670826\u65E522:53:36</p>`,108),e=[o];function c(r,t,y,D,F,i){return a(),n("div",null,e)}var d=s(p,[["render",c]]);export{C as __pageData,d as default};
