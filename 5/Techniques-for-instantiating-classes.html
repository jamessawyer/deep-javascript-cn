<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ç±»å®ä¾‹åŒ–å¼‚æ­¥å±æ€§ | Deep JavaScript</title>
    <meta name="description" content="A book in the depths of JavaScript">
    <link rel="stylesheet" href="/deep-javascript-cn/assets/style.49790c05.css">
    <link rel="modulepreload" href="/deep-javascript-cn/assets/app.1f1ae7ae.js">
    <link rel="modulepreload" href="/deep-javascript-cn/assets/5_Techniques-for-instantiating-classes.md.7b977339.lean.js">
    
    <link rel="icon" href="/deep-javascript-cn/favicon.ico">
  <script>(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-6b5fd0a9><!--[--><!--]--><!--[--><span tabindex="-1" data-v-45f6ae50></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-45f6ae50> Skip to content </a><!--]--><!----><header class="VPNav" data-v-6b5fd0a9 data-v-0e356168><div class="VPNavBar has-sidebar" data-v-0e356168 data-v-8856f192><div class="container" data-v-8856f192><div class="VPNavBarTitle has-sidebar" data-v-8856f192 data-v-6a6f7ff6><a class="title" href="/deep-javascript-cn/" data-v-6a6f7ff6><!--[--><img class="VPImage logo" src="/deep-javascript-cn/js.svg" data-v-73ae1788><!--]--><!--[-->Deep JavaScript<!--]--></a></div><div class="content" data-v-8856f192><!----><!----><!----><div class="VPNavBarAppearance appearance" data-v-8856f192 data-v-311055f2><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-311055f2 data-v-781f9d1b data-v-1dda4c9c><span class="check" data-v-1dda4c9c><span class="icon" data-v-1dda4c9c><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-781f9d1b><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-781f9d1b><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-8856f192 data-v-0562f5c0 data-v-8dccea88><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-8dccea88><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-8dccea88><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-8dccea88><div class="VPMenu" data-v-8dccea88 data-v-e73581a2><!----><!--[--><!--[--><!----><div class="group" data-v-0562f5c0><div class="item appearance" data-v-0562f5c0><p class="label" data-v-0562f5c0>Appearance</p><div class="appearance-action" data-v-0562f5c0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" data-v-0562f5c0 data-v-781f9d1b data-v-1dda4c9c><span class="check" data-v-1dda4c9c><span class="icon" data-v-1dda4c9c><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-781f9d1b><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-781f9d1b><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-8856f192 data-v-6f008456><span class="container" data-v-6f008456><span class="top" data-v-6f008456></span><span class="middle" data-v-6f008456></span><span class="bottom" data-v-6f008456></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-6b5fd0a9 data-v-92b0f14a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-92b0f14a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-92b0f14a><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-92b0f14a>Menu</span></button><a class="top-link" href="#" data-v-92b0f14a> Return to top </a></div><aside class="VPSidebar" data-v-6b5fd0a9 data-v-55e4c7db><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-55e4c7db><span class="visually-hidden" id="sidebar-aria-label" data-v-55e4c7db> Sidebar Navigation </span><!--[--><div class="group" data-v-55e4c7db><section class="VPSidebarGroup collapsible" data-v-55e4c7db data-v-1f69a7ed><div class="title" role="button" data-v-1f69a7ed><h2 class="title-text" data-v-1f69a7ed>â…¡.ç±»å‹ï¼Œå€¼ï¼Œå’Œå˜é‡</h2><div class="action" data-v-1f69a7ed><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-1f69a7ed><!--[--><a class="VPLink link" href="/deep-javascript-cn/2/Type-coercion-in-JavaScript.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>2.âš¡JSä¸­çš„ç±»å‹å¼ºè½¬</span><!--]--><!----></a><a class="VPLink link" href="/deep-javascript-cn/2/The-destructuring-algorithm.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>3.è§£æ„ç®—æ³•</span><!--]--><!----></a><a class="VPLink link" href="/deep-javascript-cn/2/Environments-under-the-hood-of-variables.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>4.âš¡ç¯å¢ƒ-å˜é‡èƒŒåçš„åŸç†</span><!--]--><!----></a><a class="VPLink link" href="/deep-javascript-cn/2/A-detailed-look-at-global-variables.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>5.âš¡æ·±å…¥ç†è§£å…¨å±€å˜é‡</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-55e4c7db><section class="VPSidebarGroup collapsible" data-v-55e4c7db data-v-1f69a7ed><div class="title" role="button" data-v-1f69a7ed><h2 class="title-text" data-v-1f69a7ed>â…¢.æ•°æ®å¤„ç†</h2><div class="action" data-v-1f69a7ed><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-1f69a7ed><!--[--><!--]--></div></section></div><div class="group" data-v-55e4c7db><section class="VPSidebarGroup collapsible" data-v-55e4c7db data-v-1f69a7ed><div class="title" role="button" data-v-1f69a7ed><h2 class="title-text" data-v-1f69a7ed>â…£.OOPï¼šå¯¹è±¡å±æ€§ç‰¹æ€§</h2><div class="action" data-v-1f69a7ed><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-1f69a7ed><!--[--><a class="VPLink link" href="/deep-javascript-cn/4/Property-attributes-an-Introduction.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>10.âš¡å±æ€§ç‰¹æ€§ä»‹ç»</span><!--]--><!----></a><a class="VPLink link" href="/deep-javascript-cn/4/Protecting-objects-from-changed.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>11.ä¿æŠ¤å¯¹è±¡æ›´æ”¹</span><!--]--><!----></a><a class="VPLink link" href="/deep-javascript-cn/4/Properties-assignment-vs-definition.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>12.âš¡å±æ€§èµ‹å€¼å’Œå±æ€§å®šä¹‰</span><!--]--><!----></a><a class="VPLink link" href="/deep-javascript-cn/4/Enumerability-of-Properties.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>13.å±æ€§çš„å¯æšä¸¾æ€§</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-55e4c7db><section class="VPSidebarGroup collapsible" data-v-55e4c7db data-v-1f69a7ed><div class="title" role="button" data-v-1f69a7ed><h2 class="title-text" data-v-1f69a7ed>â…¤.OOPæŠ€æœ¯</h2><div class="action" data-v-1f69a7ed><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-1f69a7ed><!--[--><a class="VPLink link active" href="/deep-javascript-cn/5/Techniques-for-instantiating-classes.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>14.âš¡å®ä¾‹åŒ–ç±»æŠ€æœ¯ï¼ˆå¼‚æ­¥å±æ€§ï¼‰</span><!--]--><!----></a><!--]--></div></section></div><div class="group" data-v-55e4c7db><section class="VPSidebarGroup collapsible" data-v-55e4c7db data-v-1f69a7ed><div class="title" role="button" data-v-1f69a7ed><h2 class="title-text" data-v-1f69a7ed>â…¥.æ­£åˆ™è¡¨è¾¾å¼</h2><div class="action" data-v-1f69a7ed><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-1f69a7ed><!--[--><!--]--></div></section></div><div class="group" data-v-55e4c7db><section class="VPSidebarGroup collapsible" data-v-55e4c7db data-v-1f69a7ed><div class="title" role="button" data-v-1f69a7ed><h2 class="title-text" data-v-1f69a7ed>â…¦.å…¶å®ƒè¯é¢˜ï¼šå…ƒç¼–ç¨‹</h2><div class="action" data-v-1f69a7ed><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-1f69a7ed><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-1f69a7ed><!--[--><a class="VPLink link" href="/deep-javascript-cn/7/Metaprogramming-with-Proxies.html" data-v-1f69a7ed data-v-f53f775e data-v-5704c677><!--[--><span class="link-text" data-v-f53f775e>20.âš¡ä½¿ç”¨Proxiesè¿›è¡Œå…ƒç¼–ç¨‹</span><!--]--><!----></a><!--]--></div></section></div><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-6b5fd0a9 data-v-a4c57a06><div class="VPDoc has-sidebar" data-v-a4c57a06 data-v-79ca2460><div class="container" data-v-79ca2460><div class="aside" data-v-79ca2460><div class="aside-curtain" data-v-79ca2460></div><div class="aside-container" data-v-79ca2460><div class="aside-content" data-v-79ca2460><div class="VPDocAside" data-v-79ca2460 data-v-779d834d><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline has-outline" data-v-779d834d data-v-51e5a8ce><div class="content" data-v-51e5a8ce><div class="outline-marker" data-v-51e5a8ce></div><div class="outline-title" data-v-51e5a8ce>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-51e5a8ce><span class="visually-hidden" id="doc-outline-aria-label" data-v-51e5a8ce> Table of Contents for current page </span><ul class="root" data-v-51e5a8ce><!--[--><li style="" data-v-51e5a8ce><a class="outline-link" href="#_1ï¸âƒ£-é—®é¢˜ï¼šå¼‚æ­¥åˆå§‹åŒ–ä¸€ä¸ªå±æ€§" data-v-51e5a8ce>1ï¸âƒ£ é—®é¢˜ï¼šå¼‚æ­¥åˆå§‹åŒ–ä¸€ä¸ªå±æ€§</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#_2ï¸âƒ£-â­ï¸è§£å†³æ–¹æ¡ˆï¼šåŸºäºpromiseçš„æ„é€ å™¨" data-v-51e5a8ce>2ï¸âƒ£ â­ï¸è§£å†³æ–¹æ¡ˆï¼šåŸºäºPromiseçš„æ„é€ å™¨</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#_3ï¸âƒ£-è§£å†³æ–¹æ¡ˆï¼šé™æ€å·¥å‚æ–¹æ³•-ğŸ¤©" data-v-51e5a8ce>3ï¸âƒ£ è§£å†³æ–¹æ¡ˆï¼šé™æ€å·¥å‚æ–¹æ³• ğŸ¤©</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#_4ï¸âƒ£-ç»§æ‰¿ä¸€ä¸ªåŸºäºpromiseçš„æ„é€ å™¨ï¼ˆå¯é€‰ï¼‰" data-v-51e5a8ce>4ï¸âƒ£ ç»§æ‰¿ä¸€ä¸ªåŸºäºPromiseçš„æ„é€ å™¨ï¼ˆå¯é€‰ï¼‰</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#_6ï¸âƒ£-æ€»ç»“" data-v-51e5a8ce>6ï¸âƒ£ æ€»ç»“</a><!----></li><li style="" data-v-51e5a8ce><a class="outline-link" href="#_7ï¸âƒ£-æ‰©å±•é˜…è¯»" data-v-51e5a8ce>7ï¸âƒ£ æ‰©å±•é˜…è¯»</a><!----></li><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-779d834d></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-79ca2460><div class="content-container" data-v-79ca2460><!--[--><!--]--><main class="main" data-v-79ca2460><div style="position:relative;" class="vp-doc _deep-javascript-cn_5_Techniques-for-instantiating-classes" data-v-79ca2460><div><p>ç›®å½•ï¼š</p><nav class="table-of-contents"><ul><li><a href="#_1ï¸âƒ£-é—®é¢˜ï¼šå¼‚æ­¥åˆå§‹åŒ–ä¸€ä¸ªå±æ€§">1ï¸âƒ£ é—®é¢˜ï¼šå¼‚æ­¥åˆå§‹åŒ–ä¸€ä¸ªå±æ€§</a></li><li><a href="#_2ï¸âƒ£-â­ï¸è§£å†³æ–¹æ¡ˆï¼šåŸºäºpromiseçš„æ„é€ å™¨">2ï¸âƒ£ â­ï¸è§£å†³æ–¹æ¡ˆï¼šåŸºäºPromiseçš„æ„é€ å™¨</a><ul><li><a href="#_2-1-ä½¿ç”¨ä¸€ä¸ªç«‹å³è°ƒç”¨çš„å¼‚æ­¥ç®­å¤´å‡½æ•°">2.1 ä½¿ç”¨ä¸€ä¸ªç«‹å³è°ƒç”¨çš„å¼‚æ­¥ç®­å¤´å‡½æ•°</a></li></ul></li><li><a href="#_3ï¸âƒ£-è§£å†³æ–¹æ¡ˆï¼šé™æ€å·¥å‚æ–¹æ³•-ğŸ¤©">3ï¸âƒ£ è§£å†³æ–¹æ¡ˆï¼šé™æ€å·¥å‚æ–¹æ³• ğŸ¤©</a><ul><li><a href="#_3-1-â­ï¸æ”¹è¿›ï¼šé€šè¿‡ç§å¯†tokenåˆ›å»ºç§æœ‰æ„é€ å™¨">3.1 â­ï¸æ”¹è¿›ï¼šé€šè¿‡ç§å¯†tokenåˆ›å»ºç§æœ‰æ„é€ å™¨</a></li><li><a href="#_3-2-æ”¹è¿›ï¼šæ„é€ å™¨æŠ›å‡ºé”™è¯¯ï¼Œå·¥å‚å‡½æ•°å€Ÿç”¨ç±»åŸå‹-ğŸ˜">3.2 æ”¹è¿›ï¼šæ„é€ å™¨æŠ›å‡ºé”™è¯¯ï¼Œå·¥å‚å‡½æ•°å€Ÿç”¨ç±»åŸå‹ ğŸ˜</a></li><li><a href="#_3-3-æ”¹è¿›ï¼šå®ä¾‹é»˜è®¤ä¸æ¿€æ´»ï¼Œåªèƒ½é€šè¿‡å·¥å‚æ–¹æ³•æ¿€æ´»">3.3 æ”¹è¿›ï¼šå®ä¾‹é»˜è®¤ä¸æ¿€æ´»ï¼Œåªèƒ½é€šè¿‡å·¥å‚æ–¹æ³•æ¿€æ´»</a></li><li><a href="#_3-4-å˜ç§ï¼šåˆ†ç¦»å·¥å‚å‡½æ•°">3.4 å˜ç§ï¼šåˆ†ç¦»å·¥å‚å‡½æ•°</a></li></ul></li><li><a href="#_4ï¸âƒ£-ç»§æ‰¿ä¸€ä¸ªåŸºäºpromiseçš„æ„é€ å™¨ï¼ˆå¯é€‰ï¼‰">4ï¸âƒ£ ç»§æ‰¿ä¸€ä¸ªåŸºäºPromiseçš„æ„é€ å™¨ï¼ˆå¯é€‰ï¼‰</a></li><li><a href="#_6ï¸âƒ£-æ€»ç»“">6ï¸âƒ£ æ€»ç»“</a></li><li><a href="#_7ï¸âƒ£-æ‰©å±•é˜…è¯»">7ï¸âƒ£ æ‰©å±•é˜…è¯»</a></li></ul></nav><p>è¿™ä¸€ç« ä¸­ï¼Œæ¢ç´¢å‡ ç§åˆ›å»ºç±»å®ä¾‹çš„æ–¹å¼ï¼šæ„é€ å™¨ï¼Œå·¥å‚å‡½æ•°ç­‰ç­‰ã€‚é€šè¿‡å¤šç§æ–¹å¼è§£å†³åŒä¸€ä¸ªå®é™…é—®é¢˜ã€‚æœ¬ç« çš„å…³æ³¨ç‚¹æ˜¯ç±»ï¼Œæ‰€ä»¥å…¶å®ƒå’Œç±»ä¸ç›¸å…³çš„éƒ½è¢«å¿½ç•¥ã€‚</p><h2 id="_1ï¸âƒ£-é—®é¢˜ï¼šå¼‚æ­¥åˆå§‹åŒ–ä¸€ä¸ªå±æ€§" tabindex="-1">1ï¸âƒ£ é—®é¢˜ï¼šå¼‚æ­¥åˆå§‹åŒ–ä¸€ä¸ªå±æ€§ <a class="header-anchor" href="#_1ï¸âƒ£-é—®é¢˜ï¼šå¼‚æ­¥åˆå§‹åŒ–ä¸€ä¸ªå±æ€§" aria-hidden="true">#</a></h2><p>ä¸‹é¢å®¹å™¨ç±»åº”è¯¥ <strong>å¼‚æ­¥çš„</strong> æ¥å—å®ƒçš„å±æ€§ <code>data</code> çš„å†…å®¹ã€‚ä¸‹é¢æ˜¯ç¬¬ä¸€æ¬¡å°è¯•ï¼š</p><div class="language-js"><span class="copy"></span><div class="highlight-lines"><br><div class="highlighted">Â </div><br><br><div class="highlighted">Â </div><br><br><br><div class="highlighted">Â </div><br><br><br><br><br><br><br><br><br><br><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><br></div><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DataContainer</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  #data </span><span style="color:#676E95;font-style:italic;">// A</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">downloaded</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// B</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">getData</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Data: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// C</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> dc </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataContainer</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(dc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getData</span><span style="color:#A6ACCD;">())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">setTimeout</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">dc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getData</span><span style="color:#F07178;">())</span></span>
<span class="line"><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ‰“å°ç»“æœ</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// DATA: undefined</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Data: downloaded</span></span>
<span class="line"></span></code></pre></div><p><code>Aè¡Œ</code> å£°æ˜äº†ä¸€ä¸ª <a href="https://2ality.com/2019/07/private-class-fields.html" target="_blank" rel="noopener noreferrer">ç§æœ‰å±æ€§</a> <code>#data</code>, åœ¨ <code>B</code> &amp; <code>C</code> è¡Œä½¿ç”¨äº†è¯¥ç§æœ‰å±æ€§ã€‚</p><p>ğŸ¤” åœ¨ <code>DataContainer</code> æ„é€ å™¨å†…çš„Promiseå¼‚æ­¥æ•²å®šï¼ˆ<code>settlement</code>ï¼‰, è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåªæœ‰å½“æˆ‘ä»¬å®Œæˆå½“å‰ä»»åŠ¡ï¼Œç„¶åé€šè¿‡ <code>setTimeout</code> å¼€å¯ä¸€ä¸ªæ–°çš„ä»»åŠ¡æ‰èƒ½çœ‹åˆ°æœ€ç»ˆçš„ <code>.data</code> å€¼ã€‚æ¢å¥è¯è¯´ï¼Œ<em>å½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡çœ‹åˆ° <code>DataContainer</code> å®ä¾‹æ—¶ï¼Œå®ƒæ²¡æœ‰å®Œå…¨å®ä¾‹åŒ–ğŸ˜¥</em>ã€‚</p><p id="2"></p><h2 id="_2ï¸âƒ£-â­ï¸è§£å†³æ–¹æ¡ˆï¼šåŸºäºpromiseçš„æ„é€ å™¨" tabindex="-1">2ï¸âƒ£ â­ï¸è§£å†³æ–¹æ¡ˆï¼šåŸºäºPromiseçš„æ„é€ å™¨ <a class="header-anchor" href="#_2ï¸âƒ£-â­ï¸è§£å†³æ–¹æ¡ˆï¼šåŸºäºpromiseçš„æ„é€ å™¨" aria-hidden="true">#</a></h2><p>é‚£å‡å¦‚æˆ‘ä»¬å»¶è¿Ÿè®¿é—® <code>DataContainer</code> å®ä¾‹ç›´åˆ°å®ƒå®Œå…¨å®ä¾‹åŒ–å‘¢ï¼Ÿ<strong>ğŸ“šæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨æ„é€ å™¨ä¸­è¿”å›ä¸€ä¸ªPromiseå°±å¯ä»¥å®Œæˆã€‚</strong></p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ„é€ å‡½æ•°è¿”å›å®ƒæ‰€å±çš„ç±»çš„æ–°å®ä¾‹ï¼Œä½†æˆ‘ä»¬å¯ä»¥æ˜¾å¼çš„è¿”å›ä¸€ä¸ªå¯¹è±¡è¦†ç›–è¿™ç§é»˜è®¤è¡Œä¸ºã€‚</p></div><div class="language-js"><span class="copy"></span><div class="highlight-lines"><br><br><br><div class="highlighted">Â </div><br><br><br><div class="highlighted">Â </div><br><br><br><br><br><br><br><br><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><br><br><br><br></div><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DataContainer</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">#data</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// ğŸ˜ è¿”å›ä¸€ä¸ªPromise è¦†ç›–é»˜è®¤è¿”å›çš„ç±»çš„å®ä¾‹</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">downloaded</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// A</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">getData</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DATA: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataContainer</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(dc </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// B</span></span>
<span class="line"><span style="color:#F07178;">  	</span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">dc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getData</span><span style="color:#F07178;">())</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ‰“å°</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Data: downloaded</span></span>
<span class="line"></span></code></pre></div><p>ç°åœ¨æˆ‘ä»¬å¿…é¡»ç­‰åˆ°æˆ‘ä»¬å¯ä»¥è®¿é—®æˆ‘ä»¬çš„å®ä¾‹ï¼ˆ<code>Bè¡Œ</code>ï¼‰ã€‚æ•°æ® â€œä¸‹è½½å®Œâ€ï¼ˆ<code>downloaded</code>ï¼‰åä¼ ç»™æˆ‘ä»¬ï¼ˆ<code>Aè¡Œ</code>ï¼‰ã€‚</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>ä¸Šé¢ä»£ç å­˜åœ¨2ç§å¯èƒ½é”™è¯¯çš„æ¥æºï¼š</p><ol><li>ä¸‹è½½å¯èƒ½å¤±è´¥ï¼Œäº§ç”Ÿä¸€ä¸ªæ‹’ç»çŠ¶æ€ï¼ˆ<code>rejection</code>ï¼‰</li><li>åœ¨ç¬¬ä¸€ä¸ª <code>.then()</code> å›è°ƒå‡½æ•°ä½“ä¸­å¯èƒ½æŠ›å‡ºå¼‚å¸¸</li></ol></div><p>ä¸è®ºé‚£ç§æƒ…å†µï¼Œé”™è¯¯éƒ½ä¼šæˆä¸ºä»æ„é€ å‡½æ•°ä¸­è¿”å›çš„Promiseçš„æ‹’ç»çŠ¶æ€ï¼ˆ<code>rejection</code>ï¼‰ã€‚</p><p>ğŸ‘©ğŸ»â€ğŸ« ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼š</p><ul><li>è¿™ç§æ–¹å¼çš„ä¸€ä¸ªå¥½å¤„å°±æ˜¯ï¼Œåªæœ‰è¯¥å®ä¾‹å®Œå…¨åˆå§‹åŒ–åæˆ‘ä»¬æ‰èƒ½å¯ä»¥è®¿é—®ã€‚å¹¶ä¸”æ²¡æœ‰å…¶å®ƒæ–¹å¼åˆ›å»º <code>DataContainer</code> å®ä¾‹ã€‚</li><li>ç¼ºç‚¹å°±æ˜¯ï¼Œè¯¥ç±»æ„é€ å™¨è¿”å›çš„æ˜¯ä¸€ä¸ªPromiseï¼Œè€Œä¸æ˜¯è¯¥ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œè¿™å¯èƒ½ä»¤äººæ„Ÿåˆ°æƒŠè®¶ã€‚ğŸ˜®</li></ul><h3 id="_2-1-ä½¿ç”¨ä¸€ä¸ªç«‹å³è°ƒç”¨çš„å¼‚æ­¥ç®­å¤´å‡½æ•°" tabindex="-1">2.1 ä½¿ç”¨ä¸€ä¸ªç«‹å³è°ƒç”¨çš„å¼‚æ­¥ç®­å¤´å‡½æ•° <a class="header-anchor" href="#_2-1-ä½¿ç”¨ä¸€ä¸ªç«‹å³è°ƒç”¨çš„å¼‚æ­¥ç®­å¤´å‡½æ•°" aria-hidden="true">#</a></h3><p>é™¤äº†ç›´æ¥ä½¿ç”¨ Promise API æ¥åˆ›å»ºä»æ„é€ å‡½æ•°è¿”å›çš„ Promiseï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨æˆ‘ä»¬ <a href="https://exploringjs.com/impatient-js/ch_async-functions.html#immediately-invoked-async-arrow-functions" target="_blank" rel="noopener noreferrer">ç«‹å³è°ƒç”¨</a> çš„å¼‚æ­¥ç®­å¤´å‡½æ•°ï¼š</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DataContainer</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">#data</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">async</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">downloaded</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// A</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">getData</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DATA: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> dc </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataContainer</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">dc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(dc </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">dc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getData</span><span style="color:#F07178;">())</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ‰“å°</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// DATA: downloaded</span></span>
<span class="line"></span></code></pre></div><h2 id="_3ï¸âƒ£-è§£å†³æ–¹æ¡ˆï¼šé™æ€å·¥å‚æ–¹æ³•-ğŸ¤©" tabindex="-1">3ï¸âƒ£ è§£å†³æ–¹æ¡ˆï¼šé™æ€å·¥å‚æ–¹æ³• ğŸ¤© <a class="header-anchor" href="#_3ï¸âƒ£-è§£å†³æ–¹æ¡ˆï¼šé™æ€å·¥å‚æ–¹æ³•-ğŸ¤©" aria-hidden="true">#</a></h2><p>ç±» <code>C</code> çš„é™æ€å·¥å‚æ–¹æ³•ä¼šåˆ›å»ºä¸€ä¸ªç±» <code>C</code> çš„å®ä¾‹ï¼Œè¿™æ˜¯ä½¿ç”¨ <code>new C()</code> å¤–çš„å¦ä¸€ç§é€‰æ‹©ã€‚JSä¸­å¸¸è§çš„é™æ€å·¥å‚ğŸ­æ–¹æ³•åå­—æœ‰ï¼š</p><ol><li><code>.create()</code>ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚ä¾‹å­ï¼š <code>Object.create()</code></li><li><code>.from()</code>ï¼šåŸºäºä¸åŒçš„å¯¹è±¡é€šè¿‡æ‹·è´æˆ–è€…è½¬æ¢çš„æ–¹å¼åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚ä¾‹å­ï¼š<code>Array.from()</code></li><li><code>.of()</code>ï¼šé€šè¿‡å‚æ•°ç»„åˆçš„æ–¹å¼åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚ä¾‹å­ï¼š<code>Array.of()</code></li></ol><p>ä¸‹é¢ä¾‹å­ä¸­ï¼Œ<code>DataContainer.create()</code> æ˜¯ä¸€ä¸ªé™æ€å·¥å‚å‡½æ•°ã€‚å®ƒè¿”å› DataContainer å®ä¾‹çš„ Promisesï¼š</p><div class="language-js"><span class="copy"></span><div class="highlight-lines"><br><br><br><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><br><br><br><br><br><br><br><br><br><br><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><br><br><br><br></div><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DataContainer</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">#data</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">create</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">downloaded</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// ğŸ’¡ è¿™é‡Œè°ƒç”¨äº†DataContainerçš„æ„é€ å‡½æ•°</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">getData</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DATA: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">DataContainer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(dc </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> dc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getData</span><span style="color:#A6ACCD;">())</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ‰“å°</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// DATA: downloaded</span></span>
<span class="line"></span></code></pre></div><p>ç°åœ¨ï¼Œæ‰€æœ‰çš„å¼‚æ­¥åŠŸèƒ½éƒ½åŒ…å«åœ¨äº† <code>.create()</code> ä¸­ï¼Œè¿™ä¹Ÿä½¿å¾—ç±»çš„å…¶ä½™éƒ¨åˆ†éƒ½å®Œå…¨åŒæ­¥ï¼Œå› æ­¤æ›´åŠ ç®€æ´ã€‚</p><p>ğŸ‘©ğŸ»â€ğŸ« ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼š</p><ul><li>ä¼˜ç‚¹ï¼šæ„é€ å™¨å˜å¾—ååˆ†ç®€æ´</li><li>ç¼ºç‚¹ï¼šå¯èƒ½é€šè¿‡ <code>new DataContainer()</code> çš„æ–¹å¼ï¼Œå¯¼è‡´ä¸èƒ½æ­£ç¡®çš„åˆ›å»ºå®ä¾‹</li></ul><h3 id="_3-1-â­ï¸æ”¹è¿›ï¼šé€šè¿‡ç§å¯†tokenåˆ›å»ºç§æœ‰æ„é€ å™¨" tabindex="-1">3.1 â­ï¸æ”¹è¿›ï¼šé€šè¿‡ç§å¯†tokenåˆ›å»ºç§æœ‰æ„é€ å™¨ <a class="header-anchor" href="#_3-1-â­ï¸æ”¹è¿›ï¼šé€šè¿‡ç§å¯†tokenåˆ›å»ºç§æœ‰æ„é€ å™¨" aria-hidden="true">#</a></h3><p>å¦‚æœä½ æƒ³å®ä¾‹æ€»æ˜¯è¢«æ­£ç¡®çš„åˆ›å»ºï¼Œæˆ‘ä»¬å¿…é¡»ä¿è¯åªæœ‰ <code>DataContainer.create()</code> æ‰èƒ½è°ƒç”¨æ„é€ å™¨å‡½æ•°ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç§å¯†tokençš„æ–¹å¼å®Œæˆï¼š</p><div class="language-js"><span class="copy"></span><div class="highlight-lines"><br><br><div class="highlighted">Â </div><br><br><br><br><br><br><div class="highlighted">Â </div><br><br><br><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><br><br><br><br></div><pre><code><span class="line"><span style="color:#676E95;font-style:italic;">// ğŸ¤© ç§˜å¯†token ä¸å‘å¤–å¯¼å‡º å› æ­¤å¤–éƒ¨æ— æ³•ä½¿ç”¨è¯¥token </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ä»è€Œä¿è¯æ„é€ å™¨æ— æ³•ç›´æ¥è°ƒç”¨ åªèƒ½è°ƒç”¨å·¥å‚å‡½æ•°</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> secretToken </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Symbol</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DataContainer</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DataContainer</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">#data</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">create</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">downloaded</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">secretToken</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">token</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> data</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">token</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">secretToken</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">è¯·ä½¿ç”¨DataContainer.create()åˆ›å»ºå®ä¾‹</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">getData</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DATA: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">DataContainer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(dc </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> dc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getData</span><span style="color:#A6ACCD;">())</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ‰“å°</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// DATA: downloaded</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// âŒ</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// å¦‚æœä½¿ç”¨æ„é€ å™¨è°ƒç”¨</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> dc </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DataContainer</span><span style="color:#A6ACCD;">(</span><span style="color:#FFCB6B;">Symbol</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DataContainer</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">xxx</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ç›´æ¥æŠ›å‡ºé”™è¯¯</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// Error: è¯·ä½¿ç”¨DataContainer.create()åˆ›å»ºå®ä¾‹</span></span>
<span class="line"></span></code></pre></div><p>å¦‚æœ <code>secretToken</code> å’Œ <code>DataContainer</code> åœ¨åŒä¸€ä¸ªæ¨¡å—ä¸‹ï¼Œåªå¯¼å‡º <code>DataContainer</code>ï¼Œåˆ™å¤–éƒ¨æ¨¡æ¿æ˜¯æ— æ³•è®¿é—® <code>secretToken</code>ï¼Œå› æ­¤æ˜¯æ— æ³•åˆ›å»º <code>DataContainer</code> å®ä¾‹çš„ã€‚</p><p>ğŸ‘©ğŸ»â€ğŸ« ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼š</p><ul><li>ä¼˜ç‚¹ï¼šå®‰å…¨å’Œç›´ç™½</li><li>ç¼ºç‚¹ï¼šæœ‰ç‚¹å¤æ‚å†—ä½™</li></ul><h3 id="_3-2-æ”¹è¿›ï¼šæ„é€ å™¨æŠ›å‡ºé”™è¯¯ï¼Œå·¥å‚å‡½æ•°å€Ÿç”¨ç±»åŸå‹-ğŸ˜" tabindex="-1">3.2 æ”¹è¿›ï¼šæ„é€ å™¨æŠ›å‡ºé”™è¯¯ï¼Œå·¥å‚å‡½æ•°å€Ÿç”¨ç±»åŸå‹ ğŸ˜ <a class="header-anchor" href="#_3-2-æ”¹è¿›ï¼šæ„é€ å™¨æŠ›å‡ºé”™è¯¯ï¼Œå·¥å‚å‡½æ•°å€Ÿç”¨ç±»åŸå‹-ğŸ˜" aria-hidden="true">#</a></h3><p>ä¸‹é¢è§£å†³æ–¹æ¡ˆå˜ç§ä¸­ï¼Œ<code>DataContainer</code> æ„é€ å‡½æ•°è¢«ç¦ç”¨ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªæŠ€å·§çš„æ–¹å¼åˆ›å»ºå®ä¾‹ï¼ˆ<code>Aè¡Œ</code>ï¼‰:</p><div class="language-js"><span class="copy"></span><div class="highlight-lines"><br><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><br><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><br><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><br><br><br><br><br><br><br><br><div class="highlighted">Â </div><br><br><br><br><br><br><br><br><br></div><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DataContainer</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">create</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">downloaded</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">_init</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// A</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">æ„é€ å™¨æ˜¯ç§æœ‰çš„ï¼Œè¯·é€šè¿‡DataContainer.create()åˆ›å»ºå®ä¾‹</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">_init</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">getData</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DATA: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_data</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">DataContainer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(dc </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">dc</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">instanceof</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">DataContainer</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// B</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">dc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getData</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ‰“å°</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// true</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// DATA: downloaded</span></span>
<span class="line"></span></code></pre></div><p>åœ¨å†…éƒ¨ï¼Œ<code>DataContainer</code> çš„å®ä¾‹æ˜¯å…¶åŸå‹ä¸º <code>DataContainer.prototype</code> çš„ä»»ä½•å¯¹è±¡ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>Object.create()</code> (<code>Aè¡Œ</code>) åˆ›å»ºå®ä¾‹ï¼Œä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ <code>B</code> è¡Œè¿”å› <code>true</code>ã€‚</p><p>ğŸ‘©ğŸ»â€ğŸ« ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼š</p><ul><li>ä¼˜ç‚¹ï¼šä¼˜é›…ï¼›<code>instanceof</code> ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œï¼ˆè¯‘è€…æ³¨ï¼šå…¶ä½™çš„æ–¹å¼éƒ½æ˜¯é€šè¿‡è¿”å› <code>Promise</code> çš„æ–¹å¼ï¼‰</li><li>ç¼ºç‚¹ï¼š <ul><li>åˆ›å»ºå®ä¾‹æ²¡æœ‰è¢«å®Œå…¨è¢«é˜»æ­¢ã€‚ä¸è¿‡ï¼Œå…¬å¹³åœ°è¯´ï¼Œé€šè¿‡ <code>Object.create()</code> çš„å˜é€šæ–¹æ³•ä¹Ÿå¯ä»¥ç”¨äºæˆ‘ä»¬ä¹‹å‰çš„è§£å†³æ–¹æ¡ˆã€‚</li><li>ä¸èƒ½åœ¨DataContainerä¸­ä½¿ç”¨ <a href="https://2ality.com/2019/07/private-class-fields.html" target="_blank" rel="noopener noreferrer">ç§æœ‰å­—æ®µ</a> å’Œ <a href="https://2ality.com/2019/07/private-methods-accessors-in-classes.html" target="_blank" rel="noopener noreferrer">ç§æœ‰æ–¹æ³•</a>ï¼Œå› ä¸ºè¿™äº›ä»…é’ˆå¯¹é€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºçš„å®ä¾‹æ‰èƒ½è¢«æ­£ç¡®è®¾ç½®ã€‚</li></ul></li></ul><h3 id="_3-3-æ”¹è¿›ï¼šå®ä¾‹é»˜è®¤ä¸æ¿€æ´»ï¼Œåªèƒ½é€šè¿‡å·¥å‚æ–¹æ³•æ¿€æ´»" tabindex="-1">3.3 æ”¹è¿›ï¼šå®ä¾‹é»˜è®¤ä¸æ¿€æ´»ï¼Œåªèƒ½é€šè¿‡å·¥å‚æ–¹æ³•æ¿€æ´» <a class="header-anchor" href="#_3-3-æ”¹è¿›ï¼šå®ä¾‹é»˜è®¤ä¸æ¿€æ´»ï¼Œåªèƒ½é€šè¿‡å·¥å‚æ–¹æ³•æ¿€æ´»" aria-hidden="true">#</a></h3><p>å¦ä¸€ç§æ›´å†—ä½™çš„å˜ç§æ–¹å¼æ˜¯ï¼Œé€šè¿‡ <code>.#active</code> æ ‡å¿—å…³é—­å®ä¾‹ã€‚å¼€å¯å®ä¾‹çš„æ–¹æ³• <code>.#init()</code> ä¸èƒ½è¢«è®¿é—®è®¿é—®ï¼Œä½†æ˜¯ <code>Data.container()</code> å¯ä»¥è°ƒç”¨å®ƒ</p><div class="language-js"><span class="copy"></span><div class="highlight-lines"><br><br><br><br><div class="highlighted">Â </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DataContainer</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">#data</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">static</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">create</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">downloaded</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">#init</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// è°ƒç”¨ç§æœ‰æ–¹æ³•</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">#active</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  #</span><span style="color:#F07178;">init</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#active</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">getData</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">#check</span><span style="color:#F07178;">()</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DATA: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  #</span><span style="color:#F07178;">check</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!this.</span><span style="color:#A6ACCD;">#active</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">è¯·ä½¿ç”¨DataContainer.create()åˆ›å»ºå®ä¾‹</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">DataContainer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">create</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(dc </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> dc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getData</span><span style="color:#A6ACCD;">())</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ‰“å°</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// DATA: downloaded</span></span>
<span class="line"></span></code></pre></div><p>æ ‡å¿— <code>.#active</code> å¼ºåˆ¶åœ¨æ¯ä¸ªæ–¹æ³•å¼€å§‹å‰éƒ½å¿…é¡»è°ƒç”¨ç§æœ‰æ–¹æ³• <code>.#check()</code>.</p><p>è¿™ç§æ–¹æ³•çš„ç¼ºç‚¹å°±æ˜¯å¤ªè¿‡å†—ä½™ã€‚æœ‰å¯èƒ½åœ¨æŸä¸ªæ–¹æ³•ä¸­å¿˜è®°è°ƒç”¨ <code>#check()</code>ã€‚</p><h3 id="_3-4-å˜ç§ï¼šåˆ†ç¦»å·¥å‚å‡½æ•°" tabindex="-1">3.4 å˜ç§ï¼šåˆ†ç¦»å·¥å‚å‡½æ•° <a class="header-anchor" href="#_3-4-å˜ç§ï¼šåˆ†ç¦»å·¥å‚å‡½æ•°" aria-hidden="true">#</a></h3><p>ä¸ºäº†å®Œæ•´æ€§ï¼Œä¸‹é¢å±•ç¤ºå¦ä¸€ç§å˜ç§ï¼šé™¤äº†ä½¿ç”¨é™æ€æ–¹æ³•ä½œä¸ºå·¥å‚å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨åˆ†ç¦»ç‰ˆæœ¬çš„å·¥å‚å‡½æ•°ï¼š</p><div class="language-js"><span class="copy"></span><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><div class="highlighted">Â </div><br><br><br><br><br><br><br><br></div><pre><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> secretToken </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Symbol</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">secretToken</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DataContainer</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">#data</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">token</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> data</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">token</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">secretToken</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Error</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">æ„é€ å™¨æ˜¯ç§æœ‰çš„</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">getData</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DATA: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createDataContainer</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">await</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">downloaded</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">DataContainer</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">secretToken</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">createDataContainer</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(dc </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> dc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getData</span><span style="color:#A6ACCD;">())</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(console</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">log)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æ‰“å°</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// DATA: downloaded</span></span>
<span class="line"></span></code></pre></div><p>å•ç‹¬å‡½æ•°ä½œä¸ºå·¥å‚ä¼˜åŠ¿å¾ˆæœ‰ç”¨ï¼Œä½†åœ¨è¿™é‡Œè¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘æ›´åå¥½é™æ€æ–¹æ³•çš„å½¢å¼ï¼š</p><ul><li>å•ç‹¬å‡½æ•°ä¸èƒ½è®¿é—®DataContainerä¸­çš„ç§æœ‰æˆå‘˜</li><li><code>DataContainer.create()</code> è¿™ç§å½¢å¼æ›´ç¾è§‚ğŸ˜…</li></ul><h2 id="_4ï¸âƒ£-ç»§æ‰¿ä¸€ä¸ªåŸºäºpromiseçš„æ„é€ å™¨ï¼ˆå¯é€‰ï¼‰" tabindex="-1">4ï¸âƒ£ ç»§æ‰¿ä¸€ä¸ªåŸºäºPromiseçš„æ„é€ å™¨ï¼ˆå¯é€‰ï¼‰ <a class="header-anchor" href="#_4ï¸âƒ£-ç»§æ‰¿ä¸€ä¸ªåŸºäºpromiseçš„æ„é€ å™¨ï¼ˆå¯é€‰ï¼‰" aria-hidden="true">#</a></h2><p>é€šå¸¸ï¼Œç»§æ‰¿ä¸€èˆ¬ç”¨çš„å¾ˆå°‘ã€‚</p><p>ä½¿ç”¨ä¸€ä¸ªå•ç‹¬çš„å·¥å‚å‡½æ•°ï¼Œç›¸å¯¹æ¥è¯´ç»§æ‰¿ <code>DataContainer</code> å¾ˆç®€å•ã€‚</p><p>ä½¿ç”¨åŸºäº Promise çš„æ„é€ å‡½æ•°æ‰©å±•ç±»ä¼šå¯¼è‡´ä¸¥é‡çš„é™åˆ¶ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ç»§æ‰¿äº† <code>DataContainer</code>ã€‚å­ç±» <code>SubDataContainer</code> æœ‰è‡ªå·±çš„ç§æœ‰å­—æ®µ <code>.#moreData</code> ï¼Œå®ƒé€šè¿‡æŒ‚é’©åˆ°å…¶çˆ¶ç±»çš„æ„é€ å‡½æ•°è¿”å›çš„ <code>Promise</code> æ¥å¼‚æ­¥åˆå§‹åŒ–ã€‚</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DataContainer</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">#data</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">downloaded</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">getData</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">DATA: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#data</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">SubDataContainer</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DataContainer</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">#moreData</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">constructor</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">super</span><span style="color:#F07178;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">promise</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">_this</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">resolve</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">more</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">moreData</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#A6ACCD;">_this</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">#moreData</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">moreData</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">_this</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">getData</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">super</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getData</span><span style="color:#F07178;">() </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">#moreData</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><p>æˆ‘ä»¬ä¸èƒ½å®ä¾‹åŒ–è¿™ä¸ªç±»ï¼š</p><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">assert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">rejects</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">SubDataContainer</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">TypeError</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">message</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Cannot write private member #moreData </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">to an object whose class did not declare it</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>ä¸ºä»€ä¹ˆä¼šå¤±è´¥å‘¢ï¼Ÿä¸€ä¸ªæ„é€ å™¨æ€»æ˜¯å°†å®ƒçš„ç§æœ‰å±æ€§æ·»åŠ åˆ°å®ƒçš„ <code>this</code> ä¸­ã€‚ä½†æ˜¯è¿™é‡Œï¼Œåœ¨å­æ„é€ å™¨çš„ <code>this</code> æ˜¯çˆ¶æ„é€ å™¨ä¸­è¿”å›çš„Promise(è€Œä¸æ˜¯é€šè¿‡ <code>Promise</code> ä¼ é€’çš„ <code>SubDataContainer</code> çš„å®ä¾‹)ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœ <code>SubDataContainer</code> æ²¡æœ‰ä»»ä½•ç§æœ‰å­—æ®µï¼Œè¿™ç§æ–¹æ³•ä»ç„¶æœ‰æ•ˆã€‚</p><h2 id="_6ï¸âƒ£-æ€»ç»“" tabindex="-1">6ï¸âƒ£ æ€»ç»“ <a class="header-anchor" href="#_6ï¸âƒ£-æ€»ç»“" aria-hidden="true">#</a></h2><p>å¯¹äºæœ¬ç« ç ”ç©¶çš„åœºæ™¯ï¼Œæˆ‘æ›´å–œæ¬¢åŸºäºPromiseçš„æ„é€ å‡½æ•°ï¼ˆå³ <a href="#2.1">2.1</a>ï¼‰æˆ–é™æ€å·¥å‚æ–¹æ³•åŠ ä¸Šé€šè¿‡ç§˜å¯†ä»¤ç‰Œçš„ç§æœ‰æ„é€ å‡½æ•°ï¼ˆå³ <a href="#3.1">3.1</a>ï¼‰ã€‚</p><p>ä½†æ˜¯ï¼Œæ­¤å¤„ä»‹ç»çš„å…¶ä»–æŠ€æœ¯åœ¨å…¶ä»–åœºæ™¯ä¸­ä»ç„¶æœ‰ç”¨ã€‚</p><h2 id="_7ï¸âƒ£-æ‰©å±•é˜…è¯»" tabindex="-1">7ï¸âƒ£ æ‰©å±•é˜…è¯» <a class="header-anchor" href="#_7ï¸âƒ£-æ‰©å±•é˜…è¯»" aria-hidden="true">#</a></h2><ul><li>å¼‚æ­¥ç¼–ç¨‹ï¼š <ul><li><a href="https://exploringjs.com/impatient-js/ch_promises.html" target="_blank" rel="noopener noreferrer">Promise for asynchronous programming</a> - â€œJavaScript for impatient programmersâ€ ğŸ“š</li><li><a href="https://exploringjs.com/impatient-js/ch_async-functions.html" target="_blank" rel="noopener noreferrer">Async Functions</a> - â€œJavaScript for impatient programmersâ€ ğŸ“š</li><li><a href="https://exploringjs.com/impatient-js/ch_async-functions.html#immediately-invoked-async-arrow-functions" target="_blank" rel="noopener noreferrer">Immediately invoked async arrow function</a> - â€œJavaScript for impatient programmersâ€ ğŸ“š</li></ul></li><li>OOP: <ul><li><a href="https://exploringjs.com/impatient-js/ch_proto-chains-classes.html" target="_blank" rel="noopener noreferrer">Prototype chains and classed</a> - â€œJavaScript for impatient programmersâ€ ğŸ“š</li><li><a href="https://2ality.com/2019/07/private-class-fields.html" target="_blank" rel="noopener noreferrer">åšå®¢ï¼š ES proposal: private class fields</a></li><li><a href="https://2ality.com/2019/07/private-methods-accessors-in-classes.html" target="_blank" rel="noopener noreferrer">åšå®¢ï¼š ES proposal: private methods and accessors in JavaScript classes</a></li></ul></li></ul><p>è¯‘è€…æ³¨ï¼šå…³äºè¿™ä¸€ç« ï¼Œæ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯ï¼Œ</p><ul><li>æ„é€ å™¨ä¸­è¿”å›çš„ä¸æ˜¯å®ä¾‹è‡ªèº«ï¼Œè€Œæ˜¯è‡ªå®šä¹‰çš„Promiseï¼ŒåŠ ä¸Šå¼‚æ­¥çš„ç‰¹æ€§ã€‚</li><li>è¿˜æœ‰äº›å¥‡å¥‡æ€ªæ€ªçš„ç”¨æ³•ï¼Œæ¯”å¦‚ <a href="#3.2">Object.create(this.prototype)._init(data)</a> å€Ÿç”¨ç±»åŸå‹çš„æ–¹å¼ã€‚</li><li>å¦å¤–å¦‚ä½•ä½¿ç”¨ <code>secretToken</code> çš„æ–¹å¼ä¿è¯æ„é€ å™¨çš„æ­£ç¡®è°ƒç”¨ã€‚</li><li>ç§æœ‰æ–¹æ³•å’Œå±æ€§çš„ä½¿ç”¨</li></ul><p>2022å¹´07æœˆ08æ—¥11:24:33</p></div></div></main><footer class="VPDocFooter" data-v-79ca2460 data-v-04568844><div class="edit-info" data-v-04568844><div class="edit-link" data-v-04568844><a class="VPLink link edit-link-button" href="https://github.com/jamessawyer/deep-javascript-cn/edit/main/docs/5/Techniques-for-instantiating-classes.md" target="_blank" rel="noopener noreferrer" data-v-04568844 data-v-5704c677><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" data-v-04568844><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> åœ¨GitHubç¼–è¾‘æ­¤é¡µ<!--]--><!----></a></div><div class="last-updated" data-v-04568844><p class="VPLastUpdated" data-v-04568844 data-v-0ce8c960>Last updated: <time datatime="2022-07-25T13:16:33.000Z" data-v-0ce8c960></time></p></div></div><div class="prev-next" data-v-04568844><div class="pager" data-v-04568844><a class="pager-link prev" href="/deep-javascript-cn/4/Enumerability-of-Properties.html" data-v-04568844><span class="desc" data-v-04568844>Previous page</span><span class="title" data-v-04568844>13.å±æ€§çš„å¯æšä¸¾æ€§</span></a></div><div class="has-prev pager" data-v-04568844><a class="pager-link next" href="/deep-javascript-cn/7/Metaprogramming-with-Proxies.html" data-v-04568844><span class="desc" data-v-04568844>Next page</span><span class="title" data-v-04568844>20.âš¡ä½¿ç”¨Proxiesè¿›è¡Œå…ƒç¼–ç¨‹</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><!----><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"2_a-detailed-look-at-global-variables.md\":\"f49a63f6\",\"2_environments-under-the-hood-of-variables.md\":\"4b555357\",\"2_the-destructuring-algorithm.md\":\"d10bb3c8\",\"2_type-coercion-in-javascript.md\":\"a1c9d389\",\"4_enumerability-of-properties.md\":\"4e3eb04e\",\"4_properties-assignment-vs-definition.md\":\"ad93b466\",\"4_property-attributes-an-introduction.md\":\"6944ea75\",\"4_protecting-objects-from-changed.md\":\"9a762796\",\"5_techniques-for-instantiating-classes.md\":\"7b977339\",\"7_metaprogramming-with-proxies.md\":\"cd96fead\",\"index.md\":\"31614216\"}")</script>
    <script type="module" async src="/deep-javascript-cn/assets/app.1f1ae7ae.js"></script>
    
  </body>
</html>